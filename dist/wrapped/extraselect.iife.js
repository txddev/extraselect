(function(){"use strict";try{if(typeof document!="undefined"){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
var Extraselect=function(t){"use strict";const z=new WeakMap;class N{static put(i,n,r){z.has(i)||z.set(i,new Map),z.get(i).set(n,r)}static get(i,n){return z.get(i).get(n)}static has(i,n){return z.has(i)&&z.get(i).has(n)}static remove(i,n){var r=z.get(i).delete(n);return!z.get(i).size===0&&z.delete(i),r}static lock(i,n,r){return N.has(i,n)?!1:(N.put(i,n,!0),r())}}window.__Store=z;function ee(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var n=e.indexOf("Trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}let A;function j(){j.init||(j.init=!0,A=ee()!==-1)}var L={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){j(),t.nextTick(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",A&&this.$el.appendChild(e),e.data="about:blank",A||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!A&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const te=t.withScopeId("data-v-b329ee4c");t.pushScopeId("data-v-b329ee4c");const ie={class:"resize-observer",tabindex:"-1"};t.popScopeId();const ne=te((e,i,n,r,s,l)=>(t.openBlock(),t.createBlock("div",ie)));L.render=ne,L.__scopeId="data-v-b329ee4c",L.__file="src/components/ResizeObserver.vue";function M(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(i){return typeof i}:M=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},M(e)}function re(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function W(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function se(e,i,n){return i&&W(e.prototype,i),n&&W(e,n),e}function K(e){return le(e)||oe(e)||ae(e)||ce()}function le(e){if(Array.isArray(e))return R(e)}function oe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ae(e,i){if(!!e){if(typeof e=="string")return R(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R(e,i)}}function R(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=e[n];return r}function ce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function de(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function ue(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,s,l,a=function(o){for(var u=arguments.length,m=new Array(u>1?u-1:0),g=1;g<u;g++)m[g-1]=arguments[g];if(l=m,!(r&&o===s)){var p=n.leading;typeof p=="function"&&(p=p(o,s)),(!r||o!==s)&&p&&e.apply(void 0,[o].concat(K(l))),s=o,clearTimeout(r),r=setTimeout(function(){e.apply(void 0,[o].concat(K(l))),r=0},i)}};return a._clear=function(){clearTimeout(r),r=null},a}function X(e,i){if(e===i)return!0;if(M(e)==="object"){for(var n in e)if(!X(e[n],i[n]))return!1;return!0}return!1}var fe=function(){function e(i,n,r){re(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(n,r)}return se(e,[{key:"createObserver",value:function(n,r){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=de(n),this.callback=function(c,o){s.options.callback(c,o),c&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var l=this.options.throttleOptions||{},a=l.leading;this.callback=ue(this.callback,this.options.throttle,{leading:function(o){return a==="both"||a==="visible"&&o||a==="hidden"&&!o}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(c){var o=c[0];if(c.length>1){var u=c.find(function(g){return g.isIntersecting});u&&(o=u)}if(s.callback){var m=o.isIntersecting&&o.intersectionRatio>=s.threshold;if(m===s.oldResult)return;s.oldResult=m,s.callback(m,o)}},this.options.intersection),t.nextTick(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function J(e,i,n){var r=i.value;if(!!r)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new fe(e,r,n);e._vue_visibilityState=s}}function he(e,i,n){var r=i.value,s=i.oldValue;if(!X(r,s)){var l=e._vue_visibilityState;if(!r){Y(e);return}l?l.createObserver(r,n):J(e,{value:r},n)}}function Y(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var pe={beforeMount:J,updated:he,unmounted:Y},me={itemsLimit:1e3},ye=/(auto|scroll)/;function G(e,i){return e.parentNode===null?i:G(e.parentNode,i.concat([e]))}var D=function(i,n){return getComputedStyle(i,null).getPropertyValue(n)},ge=function(i){return D(i,"overflow")+D(i,"overflow-y")+D(i,"overflow-x")},be=function(i){return ye.test(ge(i))};function ve(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=G(e.parentNode,[]),n=0;n<i.length;n+=1)if(be(i[n]))return i[n];return document.scrollingElement||document.documentElement}}function F(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?F=function(i){return typeof i}:F=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},F(e)}var we={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}}};function ke(){return this.items.length&&F(this.items[0])!=="object"}var H=!1;if(typeof window<"u"){H=!1;try{var _e=Object.defineProperty({},"passive",{get:function(){H=!0}});window.addEventListener("test",null,_e)}catch{}}let Se=0;var q={name:"RecycleScroller",components:{ResizeObserver:L},directives:{ObserveVisibility:pe},props:{...we,itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}},emits:["resize","visible","hidden","update"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,n=this.sizeField,r=this.minItemSize;let s=1e4,l=0,a;for(let c=0,o=i.length;c<o;c++)a=i[c][n]||r,a<s&&(s=a),l+=a,e[c]={accumulator:l,size:a};return this.$_computedMinItemSize=s,e}return[]},simpleArray:ke},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,n,r,s){const l=t.markRaw({id:Se++,index:i,used:!0,key:r,type:s}),a=t.shallowReactive({item:n,position:0,nr:l});return e.push(a),a},unuseView(e,i=!1){const n=this.$_unusedViews,r=e.nr.type;let s=n.get(r);s||(s=[],n.set(r,s)),s.push(e),i||(e.nr.used=!1,e.position=-9999,this.$_views.delete(e.nr.key))},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:i}=this.updateVisibleItems(!1,!0);i||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,100))}))},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const n=this.itemSize,r=this.$_computedMinItemSize,s=this.typeField,l=this.simpleArray?null:this.keyField,a=this.items,c=a.length,o=this.sizes,u=this.$_views,m=this.$_unusedViews,g=this.pool;let p,y,k;if(!c)p=y=k=0;else if(this.$_prerender)p=0,y=this.prerender,k=null;else{const h=this.getScroll();if(i){let S=h.start-this.$_lastUpdateScrollPosition;if(S<0&&(S=-S),n===null&&S<r||S<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=h.start;const w=this.buffer;if(h.start-=w,h.end+=w,n===null){let S,C=0,I=c-1,_=~~(c/2),f;do f=_,S=o[_].accumulator,S<h.start?C=_:_<c-1&&o[_+1].accumulator>h.start&&(I=_),_=~~((C+I)/2);while(_!==f);for(_<0&&(_=0),p=_,k=o[c-1].accumulator,y=_;y<c&&o[y].accumulator<h.end;y++);y===-1?y=a.length-1:(y++,y>c&&(y=c))}else p=~~(h.start/n),y=Math.ceil(h.end/n),p<0&&(p=0),y>c&&(y=c),k=c*n}y-p>me.itemsLimit&&this.itemsLimitError(),this.totalSize=k;let d;const O=p<=this.$_endIndex&&y>=this.$_startIndex;if(this.$_continuous!==O){if(O){u.clear(),m.clear();for(let h=0,w=g.length;h<w;h++)d=g[h],this.unuseView(d)}this.$_continuous=O}else if(O)for(let h=0,w=g.length;h<w;h++)d=g[h],d.nr.used&&(e&&(d.nr.index=a.findIndex(S=>l?S[l]===d.item[l]:S===d.item)),(d.nr.index===-1||d.nr.index<p||d.nr.index>=y)&&this.unuseView(d));const P=O?null:new Map;let V,x,E,$;for(let h=p;h<y;h++){V=a[h];const w=l?V[l]:V;if(w==null)throw new Error(`Key is ${w} on item (keyField is '${l}')`);if(d=u.get(w),!n&&!o[h].size){d&&this.unuseView(d);continue}d?(d.nr.used=!0,d.item=V):(x=V[s],E=m.get(x),O?E&&E.length?(d=E.pop(),d.item=V,d.nr.used=!0,d.nr.index=h,d.nr.key=w,d.nr.type=x):d=this.addView(g,h,V,w,x):($=P.get(x)||0,(!E||$>=E.length)&&(d=this.addView(g,h,V,w,x),this.unuseView(d,!0),E=m.get(x)),d=E[$],d.item=V,d.nr.used=!0,d.nr.index=h,d.nr.key=w,d.nr.type=x,P.set(x,$+1),$++),u.set(w,d)),n===null?d.position=o[h-1].accumulator:d.position=h*n}return this.$_startIndex=p,this.$_endIndex=y,this.emitUpdate&&this.$emit("update",p,y),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:O}},getListenerTarget(){let e=ve(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,n=i==="vertical";let r;if(this.pageMode){const s=e.getBoundingClientRect(),l=n?s.height:s.width;let a=-(n?s.top:s.left),c=n?window.innerHeight:window.innerWidth;a<0&&(c+=a,a=0),a+c>l&&(c=l-a),r={start:a,end:a+c}}else n?r={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:r={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return r},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,H?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){!this.listenerTarget||(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=e*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){this.direction==="vertical"?this.$el.scrollTop=e:this.$el.scrollLeft=e},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.index-i.index)}}};const Ve={key:0,class:"vue-recycle-scroller__slot"},xe={key:1,class:"vue-recycle-scroller__slot"};function Ee(e,i,n,r,s,l){const a=t.resolveComponent("ResizeObserver"),c=t.resolveDirective("observe-visibility");return t.withDirectives((t.openBlock(),t.createBlock("div",{class:["vue-recycle-scroller",{ready:s.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}],onScrollPassive:i[2]||(i[2]=(...o)=>l.handleScroll&&l.handleScroll(...o))},[e.$slots.before?(t.openBlock(),t.createBlock("div",Ve,[t.renderSlot(e.$slots,"before")])):t.createCommentVNode("v-if",!0),t.createVNode("div",{ref:"wrapper",style:{[e.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"},class:"vue-recycle-scroller__item-wrapper"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(s.pool,o=>(t.openBlock(),t.createBlock("div",{key:o.nr.id,style:s.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${o.position}px)`}:null,class:["vue-recycle-scroller__item-view",{hover:s.hoverKey===o.nr.key}],onMouseenter:u=>s.hoverKey=o.nr.key,onMouseleave:i[1]||(i[1]=u=>s.hoverKey=null)},[t.renderSlot(e.$slots,"default",{item:o.item,index:o.nr.index,active:o.nr.used})],46,["onMouseenter"]))),128))],4),e.$slots.after?(t.openBlock(),t.createBlock("div",xe,[t.renderSlot(e.$slots,"after")])):t.createCommentVNode("v-if",!0),t.createVNode(a,{onNotify:l.handleResize},null,8,["onNotify"])],34)),[[c,l.handleVisibilityChange]])}q.render=Ee,q.__file="src/components/RecycleScroller.vue";const B=function(e){if(e==null)return{top:0,left:0};let i=e.getBoundingClientRect();return{top:i.top+window.scrollY,left:i.left+window.scrollX,width:i.width,height:i.height}},ze=function(e,i){i===void 0&&(i=document);for(var n=[],r=e.parentNode;r!==i;){var s=r;n.push(s),r=s.parentNode}return n.push(i),n},Oe=function(e){var i=Array.prototype.slice.call(e.childNodes);i.forEach(function(n){e.removeChild(n)})},$e=(e,i)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const n={defaultArray:e.value,get:()=>e.value,push:(r,s,l=null)=>{const a=e.value.find(c=>c.key==r);a?(a.value=s,a.data=l):e.value.push({value:s,key:r,data:l})},addRange:r=>{for(let s of r)e.actions.push(s.key,s.value,s.data)},remove:r=>{e.value.splice(e.value.findIndex(s=>s.key==r),1)},clear:()=>{e.value=[]},sort:(r=null)=>{r==null&&(r=(s,l)=>s.value.localeCompare(l.value)),e.value=e.value.sort(r)},setDefault:function(r){this.defaultArray=r},restoreDefault:function(){e.value=this.defaultArray},filter:function(r){}};window.ExtraSelectOptions[i]=n,e.actions=n};let Ne=1;const Be=e=>{e&&(e.style.display="none",Oe(e))},Ce=(e,i,n,r)=>{var a,c;const s=t.ref([]);t.watchEffect(()=>{s.value=n});const l=t.ref([]);return t.watchEffect(()=>{l.value=i}),e&&(s.value=Array.apply(null,e.selectedOptions).map(o=>o.value).filter(o=>o),l.value=Array.apply(null,e.options).reduce((o,u)=>(o.push({value:u.text,key:u.value,data:u.dataset}),o),[])),$e(l,(c=(a=e==null?void 0:e.id)!=null?a:r)!=null?c:"extraselect_"+(++Ne).toString()),{options:l,selectedOptions:s}},Q=async function(e,i=null,n={}){var l;const r={method:"POST",credentials:"include",...n,headers:{"Content-Type":"application/json",...(l=n.headers)!=null?l:{}},body:JSON.stringify({search:i,...n.body})};return await(await fetch(e,r)).json()},Ie=(e,i,n,r,s,l="limited",a={})=>{const c=t.ref(0),o=t.ref(!1),u=t.computed(()=>o.value||c.value>0);if(i!=null&&i.length>0)if(n){const m=[];t.watchEffect(g=>{if(r.value.length>=s){let p=!0;switch(l){case"always":break;default:case"limited":p=!m.includes(r.value);break;case"complete":p=m.reduce((y,k)=>y&&!r.value.startsWith(k),!0);break}if(p){o.value=!0;const y=setTimeout(()=>{m.push(r.value),c.value+=1,Q(i,r.value,a).then(k=>{e.actions.addRange(k),e.actions.sort(),c.value-=1,o.value=!1})},500);g(()=>{clearTimeout(y)})}}})}else Q(i,null,a).then(m=>{e.actions.addRange(m),e.actions.sort()});return{searchingFlag:u}},Te=(e,i)=>{const n=t.ref(""),r=t.ref([]),s=function(l,a){return l.value.filter(o=>a.length>0?o.value.toLowerCase().includes(a.toLowerCase()):!0)};return t.watchEffect(()=>{n.value.length>=i?r.value=s(e,n.value):r.value=[]}),{filterText:n,filteredOptions:r}},Ae=(e,i,n,r,s)=>{const l=function(u,m){const p=document.createElement("canvas").getContext("2d");return p.font=m,p.measureText(u).width},a=function(){var u=B(n.value),m=B(document.querySelector("body"));r.value.style.top=-m.top+u.top},c=t.computed(()=>{var m;const u=(m=B(n.value).width)!=null?m:100;if(s==="inherit")return u;if(s==null||s==="dynamic"){const g=getComputedStyle(document.querySelector("body")).font;return Math.max(u,Math.max(...e.value.map(p=>l(p.value,g)))+15)}return s}),o=t.ref({position:"absolute","min-width":"max-content"});return t.watchPostEffect(()=>{i.value.length<0&&console.log("empty selection");var u=B(n.value),m=B(document.querySelector("body"));o.value={position:"absolute","min-width":"max-content",width:c.value.toString()+"px",top:(-m.top+u.top+u.height).toString()+"px",left:(-m.left+u.left).toString()+"px"}}),{dropdownStyle:o,placeDropdown:a}},Le={key:0,class:"extra-select selection"},Me=["onClick"],Fe=["innerHTML"],Pe=["value"],je={key:0,class:"input-searching"},Re={key:0,class:"allselect-clear"},De={class:"row-input"},He=["checked"],qe=t.createElementVNode("b",null,"Select all",-1),Ue={class:"row-input"},We=["checked"],Ke=t.createElementVNode("b",null,"Select Filtered",-1),Xe={key:1,class:"no-matches"},Je={key:2},Ye=["onClick"],Ge={class:"row-input"},Qe=["checked"],Ze=["value"],et={__name:"ExtraSelect",props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},modelValue:{type:Array,required:!1},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!0},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},removeIcon:{type:String,default:"X"}},emits:["update:modelValue"],setup(e,{emit:i}){var C,I,_;const n=e,r=t.computed(()=>{var f,b;return(b=(f=n.originalNode)==null?void 0:f.multiple)!=null?b:n.multiple}),{options:s,selectedOptions:l}=Ce(n.originalNode,n.options,n.modelValue),a=(C=n.originalNode)==null?void 0:C.classList,c=Object.values((_=(I=n.originalNode)==null?void 0:I.style)!=null?_:{});Be(n.originalNode);const{filterText:o,filteredOptions:u}=Te(s,n.minChars),{searchingFlag:m}=Ie(s,n.url,n.searchableUrl,o,n.minChars,n.fetchMode,n.fetchOptions),g=t.ref(null),p=t.ref(null),y=t.ref(null),k=t.ref(!1),d=function(f){const b=ze(f.target);b.push(f.target),!b.includes(g.value)&&!b.includes(p.value)&&(k.value=!1)};t.onMounted(()=>{if(n.originalNode){for(let f of a)f!="extraselect"&&g.value.classList.add(f);for(let f of c)g.value.style[f]=n.originalNode.style[f];c.includes("background-color")||(g.value.style.backgroundColor="white")}window.document.addEventListener("mousedown",d),window.document.addEventListener("focusin",d)}),t.onUnmounted(()=>{window.document.removeEventListener("mousedown",d),window.document.removeEventListener("focusin",d)});const{dropdownStyle:O,placeDropdown:P}=Ae(s,l,g,p,n.maxWidth),V=f=>{r.value?l.value.includes(f)?l.value.splice(l.value.indexOf(f),1):l.value.push(f):(l.value=[f],k.value=!1),i("update:modelValue",l.value)},x=f=>{E(f,!1),o.value=""},E=(f,b=null)=>{b==null&&(b=!h.value),b?l.value=s.value.map(v=>v.key):l.value=[],i("update:modelValue",l.value)},$=()=>{w.value?u.value.forEach(f=>{l.value.includes(f.key)&&l.value.splice(l.value.indexOf(f.key),1)}):u.value.forEach(f=>{l.value.includes(f.key)||l.value.push(f.key)}),i("update:modelValue",l.value)};t.watchEffect(()=>{k.value?(P(),n.search&&t.nextTick(()=>{y.value.focus({focusVisible:!0})})):o.value=""});const h=t.computed(()=>l.value.length==s.value.length),w=t.computed(()=>u.value.reduce((f,b)=>f&&l.value.includes(b.key),!0));t.computed(()=>l.value.length==0);const S=t.computed(()=>{const f=l.value.map(b=>{var v;return(v=s.value.find(T=>T.key==b))==null?void 0:v.value}).join(", ");return f.length>0?f:"--"});return(f,b)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[n.showSelected?(t.openBlock(),t.createElementBlock("div",Le,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(l),v=>{var T;return t.openBlock(),t.createElementBlock("div",{key:v,onClick:Z=>V(v),class:"selection-badge"},[t.createTextVNode(t.toDisplayString((T=t.unref(s).find(Z=>Z.key==v))==null?void 0:T.value)+" ",1),t.createElementVNode("div",{class:"selection-remove",innerHTML:n.removeIcon},null,8,Fe)],8,Me)}),128))])):t.createCommentVNode("",!0),t.createElementVNode("input",{onFocus:b[0]||(b[0]=v=>k.value=!0),onClick:b[1]||(b[1]=v=>k.value=!0),ref_key:"inputNode",ref:g,value:t.unref(S),class:"extra-select extra-select-input",readonly:""},null,40,Pe),(t.openBlock(),t.createBlock(t.Teleport,{to:"body"},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(["extra-select dropdown",{searching:t.unref(m)>0}]),ref_key:"dropdownNode",ref:p,style:t.normalizeStyle(t.unref(O))},[n.search?(t.openBlock(),t.createElementBlock("div",je,[t.withDirectives(t.createElementVNode("input",{ref_key:"searchNode",ref:y,class:"extra-select-search","onUpdate:modelValue":b[2]||(b[2]=v=>t.isRef(o)?o.value=v:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:"Cerca..."},null,512),[[t.vModelText,t.unref(o)]])])):t.createCommentVNode("",!0),t.unref(o).length>=n.minChars?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(r)?(t.openBlock(),t.createElementBlock("div",Re,[t.unref(o).length==0?(t.openBlock(),t.createElementBlock("div",{key:0,onClick:E,class:"all-select"},[t.createElementVNode("div",De,[t.createElementVNode("input",{checked:t.unref(h),type:"checkbox"},null,8,He),qe])])):t.createCommentVNode("",!0),t.unref(u).length>0&&t.unref(o).length>0?(t.openBlock(),t.createElementBlock("div",{key:1,onClick:$,class:"all-select"},[t.createElementVNode("div",Ue,[t.createElementVNode("input",{checked:t.unref(w),type:"checkbox"},null,8,We),Ke])])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"clear",onClick:x},"Clear")])):t.createCommentVNode("",!0),t.unref(u).length==0?(t.openBlock(),t.createElementBlock("div",Xe,"No matches found")):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createElementBlock("div",Je,"Insert at least "+t.toDisplayString(n.minChars)+" characters",1)),t.createVNode(t.unref(q),{items:t.unref(u),"item-size":32,"key-field":"key",class:"scroller"},{default:t.withCtx(({item:v})=>[t.createElementVNode("div",{class:"dropdown-row",onClick:T=>V(v.key),style:{height:"32px"}},[t.createElementVNode("div",Ge,[t.unref(r)?(t.openBlock(),t.createElementBlock("input",{key:0,checked:t.unref(l).includes(v.key),type:"checkbox"},null,8,Qe)):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(v.value),1)])],8,Ye)]),_:1},8,["items"])],6),[[t.vShow,k.value]])])),n.originalNode?(t.openBlock(),t.createBlock(t.Teleport,{key:1,to:n.originalNode},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(l),v=>(t.openBlock(),t.createElementBlock("option",{key:v,selected:"selected",value:v},null,8,Ze))),128))],8,["to"])):t.createCommentVNode("",!0)],64))}},U={init:function(){document.querySelectorAll(".extraselect").forEach(function(e){U.bindNew(e)})},bindNew(e){N.lock(e,"extra-select",()=>{const i={};for(let s in e.dataset)try{i[s]=JSON.parse(e.dataset[s])}catch{i[s]=e.dataset[s]}i.originalNode=e;const n=document.createElement("div");e.parentNode.insertBefore(n,e.nextSibling),n.dataset.isVue=!0;const r=t.createApp(et,i);r.mount(n),e.addEventListener("remove",function(){r.unmount(),n.remove(),e.remove(),N.remove(e,"extra-select")})})}};return U.init(),U}(Vue);
