var Extraselect=function(z,e){"use strict";const C=new WeakMap;class L{static put(l,t,o){C.has(l)||C.set(l,new Map),C.get(l).set(t,o)}static get(l,t){return C.get(l).get(t)}static has(l,t){return C.has(l)&&C.get(l).has(t)}static remove(l,t){var o=C.get(l).delete(t);return C.get(l).size!==0&&C.delete(l),o}static lock(l,t,o){return L.has(l,t)?!1:(L.put(l,t,!0),o())}}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).DATASTORE_DEBUG&&(window.__Store=C);function $(n){if(n==null)return{top:0,left:0,width:null,height:null};let l=n.getBoundingClientRect();return{top:l.top+window.scrollY,left:l.left+window.scrollX,width:l.width,height:l.height}}function F(n,l){l===void 0&&(l=window.document);for(var t=[],o=n.parentNode;o!=null&&o instanceof HTMLElement&&!(l instanceof HTMLElement&&o===l)&&!(typeof l=="string"&&o.matches(l));){var a=o;t.push(a),o=a.parentNode}return o!=null&&t.push(o),t}function Se(n){var l=Array.prototype.slice.call(n.childNodes);l.forEach(function(t){n.removeChild(t)})}var X;const I=typeof window<"u";I&&((X=window==null?void 0:window.navigator)==null?void 0:X.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function xe(n){return typeof n=="function"?n():e.unref(n)}function Oe(n){return n}function Ce(n){return e.getCurrentScope()?(e.onScopeDispose(n),!0):!1}function Ne(n,l=!0){e.getCurrentInstance()?e.onMounted(n):l?n():e.nextTick(n)}function D(n){var l;const t=xe(n);return(l=t==null?void 0:t.$el)!=null?l:t}const Y=I?window:void 0;I&&window.document,I&&window.navigator,I&&window.location;function Be(n,l=!1){const t=e.ref(),o=()=>t.value=Boolean(n());return o(),Ne(o,l),t}const W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},U="__vueuse_ssr_handlers__";W[U]=W[U]||{},W[U];var Z=Object.getOwnPropertySymbols,Ve=Object.prototype.hasOwnProperty,Le=Object.prototype.propertyIsEnumerable,Te=(n,l)=>{var t={};for(var o in n)Ve.call(n,o)&&l.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&Z)for(var o of Z(n))l.indexOf(o)<0&&Le.call(n,o)&&(t[o]=n[o]);return t};function Fe(n,l,t={}){const o=t,{window:a=Y}=o,r=Te(o,["window"]);let u;const s=Be(()=>a&&"ResizeObserver"in a),c=()=>{u&&(u.disconnect(),u=void 0)},i=e.watch(()=>D(n),d=>{c(),s.value&&a&&d&&(u=new ResizeObserver(l),u.observe(d,r))},{immediate:!0,flush:"post"}),f=()=>{c(),i()};return Ce(f),{isSupported:s,stop:f}}function Ae(n,l={width:0,height:0},t={}){const{window:o=Y,box:a="content-box"}=t,r=e.computed(()=>{var c,i;return(i=(c=D(n))==null?void 0:c.namespaceURI)==null?void 0:i.includes("svg")}),u=e.ref(l.width),s=e.ref(l.height);return Fe(n,([c])=>{const i=a==="border-box"?c.borderBoxSize:a==="content-box"?c.contentBoxSize:c.devicePixelContentBoxSize;if(o&&r.value){const f=D(n);if(f){const d=o.getComputedStyle(f);u.value=parseFloat(d.width),s.value=parseFloat(d.height)}}else if(i){const f=Array.isArray(i)?i:[i];u.value=f.reduce((d,{inlineSize:p})=>d+p,0),s.value=f.reduce((d,{blockSize:p})=>d+p,0)}else u.value=c.contentRect.width,s.value=c.contentRect.height},t),e.watch(()=>D(n),c=>{u.value=c?l.width:0,s.value=c?l.height:0}),{width:u,height:s}}var ee;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(ee||(ee={}));var Pe=Object.defineProperty,te=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,Ie=Object.prototype.propertyIsEnumerable,ne=(n,l,t)=>l in n?Pe(n,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[l]=t,Me=(n,l)=>{for(var t in l||(l={}))ze.call(l,t)&&ne(n,t,l[t]);if(te)for(var t of te(l))Ie.call(l,t)&&ne(n,t,l[t]);return n};Me({linear:Oe},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function le(n,l){const{containerStyle:t,wrapperProps:o,scrollTo:a,calculateRange:r,currentList:u,containerRef:s}="itemHeight"in l?Re(l,n):De(l,n);return{list:u,scrollTo:a,containerProps:{ref:s,onScroll:()=>{r()},style:t},wrapperProps:o}}function oe(n){const l=e.ref(null),t=Ae(l),o=e.ref([]),a=e.shallowRef(n);return{state:e.ref({start:0,end:10}),source:a,currentList:o,size:t,containerRef:l}}function ae(n,l,t){return o=>{if(typeof t=="number")return Math.ceil(o/t);const{start:a=0}=n.value;let r=0,u=0;for(let s=a;s<l.value.length;s++){const c=t(s);if(r+=c,u=s,r>o)break}return u-a}}function re(n,l){return t=>{if(typeof l=="number")return Math.floor(t/l)+1;let o=0,a=0;for(let r=0;r<n.value.length;r++){const u=l(r);if(o+=u,o>=t){a=r;break}}return a+1}}function se(n,l,t,o,{containerRef:a,state:r,currentList:u,source:s}){return()=>{const c=a.value;if(c){const i=t(n==="vertical"?c.scrollTop:c.scrollLeft),f=o(n==="vertical"?c.clientHeight:c.clientWidth),d=i-l,p=i+f+l;r.value={start:d<0?0:d,end:p>s.value.length?s.value.length:p},u.value=s.value.slice(r.value.start,r.value.end).map((g,y)=>({data:g,index:y+r.value.start}))}}}function ie(n,l){return t=>typeof n=="number"?t*n:l.value.slice(0,t).reduce((a,r,u)=>a+n(u),0)}function ce(n,l,t){e.watch([n.width,n.height,l],()=>{t()})}function ue(n,l){return e.computed(()=>typeof n=="number"?l.value.length*n:l.value.reduce((t,o,a)=>t+n(a),0))}const $e={horizontal:"scrollLeft",vertical:"scrollTop"};function de(n,l,t,o){return a=>{o.value&&(o.value[$e[n]]=t(a),l())}}function De(n,l){const t=oe(l),{state:o,source:a,currentList:r,size:u,containerRef:s}=t,c={overflowX:"auto"},{itemWidth:i,overscan:f=5}=n,d=ae(o,a,i),p=re(a,i),g=se("horizontal",f,p,d,t),y=ie(i,a),w=e.computed(()=>y(o.value.start)),E=ue(i,a);ce(u,l,g);const N=de("horizontal",g,y,s),S=e.computed(()=>({style:{height:"100%",width:`${E.value-w.value}px`,marginLeft:`${w.value}px`,display:"flex"}}));return{scrollTo:N,calculateRange:g,wrapperProps:S,containerStyle:c,currentList:r,containerRef:s}}function Re(n,l){const t=oe(l),{state:o,source:a,currentList:r,size:u,containerRef:s}=t,c={overflowY:"auto"},{itemHeight:i,overscan:f=5}=n,d=ae(o,a,i),p=re(a,i),g=se("vertical",f,p,d,t),y=ie(i,a),w=e.computed(()=>y(o.value.start)),E=ue(i,a);ce(u,l,g);const N=de("vertical",g,y,s),S=e.computed(()=>({style:{width:"100%",height:`${E.value-w.value}px`,marginTop:`${w.value}px`}}));return{calculateRange:g,scrollTo:N,containerStyle:c,wrapperProps:S,currentList:r,containerRef:s}}const T=n=>{let l=parseInt(n);return l==n?l:n},je=(n,l)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const t={defaultArray:n.value,get:()=>n.value,push:(o,a,r=null)=>{parseInt(o)==o&&(o=parseInt(o));const u=n.map.get(o);if(u)u.value=a,u.data=r;else{let s={value:a,key:o,data:r};n.value.push(s),n.map.set(s.key,s)}},addRange:o=>{for(let a of o)n.actions.push(a.key,a.value,a.data)},remove:o=>{n.value.splice(n.value.findIndex(a=>a.key==o),1)},clear:()=>{n.value=[]},sort:(o=null)=>{o==null&&(o=(a,r)=>a.value.localeCompare(r.value)),n.value=n.value.sort(o)},setDefault:function(o){this.defaultArray=o},restoreDefault:function(){n.value=this.defaultArray},filter:function(o){}};window.ExtraSelectOptions[l]=t,n.actions=t};let qe=1;const fe=n=>{n&&(n.style.display="none",Se(n))},pe=(n,l,t,o)=>{var c;const a=e.ref(new Map);e.watchEffect(()=>{if(Array.isArray(t.value)){a.value.clear();for(let i of t.value)a.value.set(i,i)}});const r=e.ref([]);if(r.map=new Map,r.rebuildMap=()=>{if(r.map.clear(),r.value)for(let i of r.value)r.map.set(i.key,i)},e.watchEffect(()=>{l.value&&(r.value=l.value.map(i=>({...i,key:T(i.key)})),r.rebuildMap())}),n){if(a.value.clear(),n.matches("select")){for(let i of Array.apply(null,n.selectedOptions).map(f=>T(f.value)).filter(f=>f))a.value.set(i,i);r.value=Array.apply(null,n.options).reduce((i,f)=>(i.push({value:f.text,key:T(f.value),data:Object.assign({},f.dataset)}),i),[])}if(n.matches("input")){let i=n.value;i!=null&&i.length>0&&(r.value=[{value:i,key:i}])}r.rebuildMap()}if(Array.isArray(o))for(let i of o)a.value.set(T(i),T(i));else o!=null&&a.value.set(T(o),T(o));je(r,(c=n==null?void 0:n.id)!=null?c:"extraselect_"+(++qe).toString());const u=[];return a.value.forEach((i,f)=>{u.push([f,i])}),{options:r,selectedOptions:a,onReset:()=>{a.value.clear();for(let[i,f]of u)a.value.set(i,f)}}};e.ref({});function He(n,l={}){for(let t in l)n=n.replace(`:${t}`,l[t]);return n}const Q=(n=null)=>{var o,a;window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={});let t={...(a=(o=window.ExtraSelectLocalization.defaults)==null?void 0:o.defaultArray)!=null?a:{}};Object.assign(t,n!=null?n:{}),me(e.ref(t),"defaults")},me=(n,l)=>{window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={},Q());const t={defaultArray:n.value,list:()=>n.value,get:o=>{var a;return(a=n.value[o])!=null?a:null},push:(o,a)=>{n.value[o]=a}};window.ExtraSelectLocalization[l]=t,n.actions=t};let We=0;const he=(n,l)=>{var o;return me(l,(o=n==null?void 0:n.id)!=null?o:"extraselect_"+(++We).toString()),{propLocalization:l,t:(a,r={})=>{var s;let u=(s=l.value[a])!=null?s:window.ExtraSelectLocalization.defaults.get(a);return u==null&&(window.ExtraSelectLocalization.defaults.push(a,a),u=a),He(u,r)}}},ge=async function(n,l=null,t={}){var r;const o={method:"POST",credentials:"include",...t,headers:{"Content-Type":"application/json",...(r=t.headers)!=null?r:{}},body:JSON.stringify({search:l,...t.body})};return await(await fetch(n,o)).json()},ye=(n,l,t,o,a,r,u="limited",s={})=>{const c=e.ref(0),i=e.ref(!1),f=e.computed(()=>i.value||c.value>0);if(l!=null&&l.length>0)if(t){const d=[];e.watchEffect(p=>{if(o.value.length>=a){let g=!0;switch(u){case"always":break;default:case"limited":g=!d.includes(o.value);break;case"complete":g=d.reduce((y,w)=>y&&!o.value.startsWith(w),!0);break}if(g){i.value=!0;const y=setTimeout(()=>{d.push(o.value),c.value+=1,s.body={...s.body,...r.value},ge(l,o.value,s).then(w=>{n.actions.addRange(w),n.actions.sort(),c.value-=1,i.value=!1})},500);p(()=>{clearTimeout(y)})}}})}else ge(l,null,s).then(d=>{n.actions.addRange(d),n.actions.sort()});return{searchingFlag:f}},we=(n,l,t,o=[],a=[])=>{const r=e.ref(""),u=e.ref([]),s=e.ref({}),c={...o.reduce((f,d)=>(f[d]=!1,f),{}),...a.reduce((f,d)=>(f[d]=!0,f),{})};for(let f in c){let d=c[f],p=document.getElementById(f);s.value[f]=p==null?void 0:p.value,p&&p.addEventListener("change",g=>{s.value[f]=g.target.value,d&&e.nextTick(()=>{if(l!=null)for(let y of Array.from(l.value.keys()))u.value.find(w=>w.key==y)||t(y,!1);else u.value.find(y=>y.key==r.value)||t(r.value,!1)})})}const i=function(f,d){let p=f.value;return Object.keys(s.value).length>0&&(p=p.filter(g=>{var y,w;for(let E in s.value)if((c[E]?!0:((y=s.value[E])!=null?y:"").length>0)&&((w=g.data)==null?void 0:w.hasOwnProperty(E))&&g.data[E]!=s.value[E])return!1;return!0})),d.length>0&&(p=p.filter(g=>g.value.toLowerCase().includes(d.toLowerCase()))),p};return e.watchEffect(()=>{u.value=i(n,r.value)}),{filterText:r,filteredOptions:u,filterValues:s}},ke=(n,l,t,o,a,r,u)=>{const s=getComputedStyle(document.querySelector("body")).font,c=function(d){const g=document.createElement("canvas").getContext("2d");return g.font=s,g.measureText(d).width},i=e.computed(()=>{var p,g;const d=(p=$(o.value).width)!=null?p:100;if(u==="inherit")return d;if(u==null||u==="dynamic"){const y=(g=parseInt(getComputedStyle(document.querySelector("html"))["font-size"]))!=null?g:16;return Math.max(d,Math.max(...n.value.map(w=>c(w.value)))+20+y*3)}return u}),f=e.ref({position:"absolute","min-width":"max-content"});return e.watchPostEffect(()=>{t.value<0&&console.log("is open"),l.value.size<0&&console.log("empty selection");var d=$(o.value),p=$(null);if(r.value&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(r.value).position))var p=$(r.value);let g=-p.left+d.left;const y=window.document.documentElement.clientWidth;g+i.value>y&&(g=y-i.value),f.value={position:"absolute","min-width":"max-content",width:i.value.toString()+"px",top:(-p.top+d.top+d.height).toString()+"px",left:g.toString()+"px"}}),{dropdownStyle:f,getTextWidth:c}},Ue=["name"],Qe={key:1,class:"extra-select selection"},Ge=["onClick"],Je=["innerHTML"],Ke=["value"],Xe={key:0,class:"input-searching"},Ye=["placeholder"],Ze={key:0,class:"allselect-clear"},et={class:"row-input"},tt=["checked"],nt={class:"row-input"},lt=["checked"],ot={key:1,class:"no-matches"},at={key:2},rt=["onClick"],st={class:"row-input"},it=["checked"],ct=["value"],ut=Object.assign({name:"ExtraSelect",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:Array,required:!1,default:[]},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!1},searchableUrl:{type:Boolean,default:!1},initialValue:{default:null},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null}},emits:["update:modelValue"],setup(n,{emit:l}){var ve,Ee,be;const t=n,o=e.computed(()=>{var m,h;return(h=(m=t.originalNode)==null?void 0:m.multiple)!=null?h:t.multiple}),{options:a,selectedOptions:r,onReset:u}=pe(t.originalNode,e.toRef(t,"options"),e.toRef(t,"modelValue"),t.initialValue),{t:s}=he(t.originalNode,e.toRef(t,"localization")),c=(ve=t.originalNode)==null?void 0:ve.classList,i=Object.values((be=(Ee=t.originalNode)==null?void 0:Ee.style)!=null?be:{});fe(t.originalNode);const f=(m,h=null)=>{if(o.value){let x=h;switch(x==null&&(x=!r.value.has(m)),x){case!0:r.value.set(m,m);break;case!1:r.value.delete(m);break}}else r.value.clear(),h!==!1&&r.value.set(m,m),S.value=!1;P(Array.from(r.value.keys()))},{filterText:d,filteredOptions:p,filterValues:g}=we(a,r,f,t.filterFields,t.hardFilterFields),{searchingFlag:y}=ye(a,t.url,t.searchableUrl,d,t.minChars,g,t.fetchMode,t.fetchOptions),w=e.ref(null),E=e.ref(null),N=e.ref(null),S=e.ref(!1),V=e.ref(null),A=function(m){const h=F(m.target);h.push(m.target),!h.includes(w.value)&&!h.includes(E.value)&&(S.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let m=!1;V.value=F(w.value).find(h=>!!(h instanceof Element&&(h.matches(t.dropdownContainer)&&(m=!0),m&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(h).position))))}if(V.value==null&&(V.value=document.querySelector("body")),t.originalNode){for(let h of c)h!="extraselect"&&w.value.classList.add(h);for(let h of i)w.value.style[h]=t.originalNode.style[h];i.includes("background-color")||(w.value.style.backgroundColor="white");let m=F(w.value,"form").pop();m instanceof HTMLElement&&m.matches("form")&&m.addEventListener("reset",()=>setTimeout(u))}window.document.addEventListener("mousedown",A),window.document.addEventListener("focusin",A)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",A),window.document.removeEventListener("focusin",A)});const{dropdownStyle:K,getTextWidth:R}=ke(a,r,S,w,E,V,t.maxWidth),P=m=>{e.nextTick(()=>{var h;return(h=t.originalNode)==null?void 0:h.dispatchEvent(new Event("change",{bubbles:!0}))}),l("update:modelValue",m)},j=m=>{v(m,!1),d.value=""},v=(m,h=null)=>{h==null&&(h=!_.value),h?(r.value.clear(),a.value.forEach(x=>r.value.set(x.key,x.key))):r.value.clear(),P(Array.from(r.value.keys()))},k=()=>{B.value?p.value.forEach(m=>{r.value.has(m.key)&&r.value.delete(m.key)}):p.value.forEach(m=>{r.value.has(m.key)||r.value.set(m.key,m.key)}),P(Array.from(r.value.keys()))};e.watch(S,(m,h)=>{m!=h&&(m?t.search&&e.nextTick(()=>{N.value.focus({focusVisible:!0})}):d.value="")});const _=e.computed(()=>r.value.size==a.value.length),B=e.computed(()=>p.value.reduce((m,h)=>m&&r.value.has(h.key),!0)),yt=e.computed(()=>r.value.size==0),wt=e.computed(()=>{var m,h,x,M,b;if(a.value.length<0)return"";if(o.value){if(yt.value)return s("No selection");if(!t.searchableUrl&&_.value)return $$t("All selected");const O=w.value?getComputedStyle(w.value):null,q=((m=w.value)==null?void 0:m.clientWidth)-parseInt(O==null?void 0:O.paddingLeft)-parseInt(O==null?void 0:O.paddingRight);let H=s(":n selected - ",{n:r.value.size}),_e=!0;for(let bt of r.value)if(_e?_e=!1:H+=", ",H+=(x=(h=a.map.get(bt[0]))==null?void 0:h.value)!=null?x:y.value?s("Loading..."):s("Value not found"),q<R(H))return r.value.size+s(" selected");return H}else for(let O of r.value)return(b=(M=a.map.get(O[0]))==null?void 0:M.value)!=null?b:y.value?s("Loading..."):s("Value not found");return s("No selection")}),{list:kt,containerProps:vt,wrapperProps:Et}=le(p,{itemHeight:32});return(m,h)=>{var x,M;return e.openBlock(),e.createElementBlock(e.Fragment,null,[o.value&&e.unref(r).size==0?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:(M=(x=t.originalNode)==null?void 0:x.name)==null?void 0:M.replace("[]",""),value:""},null,8,Ue)):e.createCommentVNode("",!0),t.showSelected?(e.openBlock(),e.createElementBlock("div",Qe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),b=>{var O;return e.openBlock(),e.createElementBlock("div",{key:b,onClick:q=>f(b[0]),class:"selection-badge"},[e.createTextVNode(e.toDisplayString((O=e.unref(a).find(q=>q.key==b[0]))==null?void 0:O.value)+" ",1),e.createElementVNode("div",{class:"selection-remove",innerHTML:t.removeIcon},null,8,Je)],8,Ge)}),128))])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({onFocus:h[0]||(h[0]=b=>S.value=!0),onClick:h[1]||(h[1]=b=>S.value=!0),ref_key:"inputNode",ref:w,value:wt.value,class:"extra-select extra-select-input",readonly:""},m.$attrs),null,16,Ke),V.value?(e.openBlock(),e.createBlock(e.Teleport,{key:2,to:V.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(y)>0}]),ref_key:"dropdownNode",ref:E,style:e.normalizeStyle(e.unref(K))},[t.search?(e.openBlock(),e.createElementBlock("div",Xe,[e.withDirectives(e.createElementVNode("input",{ref_key:"searchNode",ref:N,class:"extra-select-search","onUpdate:modelValue":h[2]||(h[2]=b=>e.isRef(d)?d.value=b:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:e.unref(s)("Search...")},null,8,Ye),[[e.vModelText,e.unref(d)]])])):e.createCommentVNode("",!0),e.unref(d).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o.value?(e.openBlock(),e.createElementBlock("div",Ze,[e.unref(d).length==0?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:v,class:"all-select"},[e.createElementVNode("div",et,[e.createElementVNode("input",{checked:_.value,type:"checkbox"},null,8,tt),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select all")),1)])])):e.createCommentVNode("",!0),e.unref(p).length>0&&e.unref(d).length>0?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:k,class:"all-select"},[e.createElementVNode("div",nt,[e.createElementVNode("input",{checked:B.value,type:"checkbox"},null,8,lt),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select Filtered")),1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"clear",onClick:j},e.toDisplayString(e.unref(s)("Clear")),1)])):e.createCommentVNode("",!0),e.unref(p).length==0?(e.openBlock(),e.createElementBlock("div",ot,e.toDisplayString(e.unref(s)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",at,e.toDisplayString(e.unref(s)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(vt),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(Et))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(kt),b=>(e.openBlock(),e.createElementBlock("button",{key:b.index,class:"dropdown-row",onClick:e.withModifiers(O=>f(b.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",st,[o.value?(e.openBlock(),e.createElementBlock("input",{key:0,checked:e.unref(r).has(b.data.key),type:"checkbox"},null,8,it)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(b.data.value),1)])],8,rt))),128))],16)],16)],6),[[e.vShow,S.value]])],8,["to"])):e.createCommentVNode("",!0),t.originalNode?(e.openBlock(),e.createBlock(e.Teleport,{key:3,to:t.originalNode},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),b=>(e.openBlock(),e.createElementBlock("option",{key:b[0],selected:"selected",value:b[0]},null,8,ct))),128))],8,["to"])):e.createCommentVNode("",!0)],64)}}}),dt={key:0,class:"no-matches"},ft={key:1},pt=["onClick"],mt={class:"row-input"},ht=Object.assign({name:"ExtraSuggest",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},url:{type:String,required:!1},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},dropdownContainer:{type:String,default:null}},emits:["update:modelValue"],setup(n,{emit:l}){var R,P,j;const t=n,{options:o}=pe(t.originalNode,e.toRef(t,"options"),e.ref([])),{t:a}=he(t.originalNode,e.toRef(t,"localization")),r=(R=t.originalNode)==null?void 0:R.classList,u=Object.values((j=(P=t.originalNode)==null?void 0:P.style)!=null?j:{});fe(t.originalNode);const s=(v,k=null)=>{k===!1?c.value="":c.value=o.map.get(v).value,y.value=!1},{filterText:c,filteredOptions:i,filterValues:f}=we(o,null,s,t.filterFields,t.hardFilterFields),{searchingFlag:d}=ye(o,t.url,t.searchableUrl,c,t.minChars,f,t.fetchMode,t.fetchOptions),p=e.ref(null),g=e.ref(null),y=e.ref(!1),w=e.ref(null),E=function(v){const k=F(v.target);k.push(v.target),!k.includes(p.value)&&!k.includes(g.value)&&(y.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let v=!1;w.value=F(p.value).find(k=>!!(k instanceof Element&&(k.matches(t.dropdownContainer)&&(v=!0),v&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(k).position))))}if(w.value==null&&(w.value=document.querySelector("body")),t.originalNode){for(let B of r)B!="extrasuggest"&&p.value.classList.add(B);for(let B of u)p.value.style[B]=t.originalNode.style[B];u.includes("background-color")||(p.value.style.backgroundColor="white"),c.value=t.originalNode.value,e.watchEffect(()=>{t.modelValue!=null&&(c.value=t.modelValue)});const v=c.value,k=()=>{c.value=v};let _=F(p.value,"form").pop();_ instanceof HTMLElement&&_.matches("form")&&_.addEventListener("reset",()=>setTimeout(k))}window.document.addEventListener("mousedown",E),window.document.addEventListener("focusin",E)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",E),window.document.removeEventListener("focusin",E)});const{dropdownStyle:N}=ke(o,e.ref([]),y,p,g,w,t.maxWidth),S=()=>{var v;t.originalNode&&(t.originalNode.value=c.value,(v=t.originalNode)==null||v.dispatchEvent(new Event("change",{bubbles:!0}))),l("update:modelValue",c.value)};e.watch(()=>y.value,v=>{v===!1&&S()});const{list:V,containerProps:A,wrapperProps:K}=le(i,{itemHeight:32});return(v,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({onFocus:k[0]||(k[0]=_=>y.value=!0),onClick:k[1]||(k[1]=_=>y.value=!0),ref_key:"inputNode",ref:p,"onUpdate:modelValue":k[2]||(k[2]=_=>e.isRef(c)?c.value=_:null),class:"extra-select extra-select-input"},v.$attrs),null,16),[[e.vModelDynamic,e.unref(c)]]),w.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:w.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(d)>0}]),ref_key:"dropdownNode",ref:g,style:e.normalizeStyle(e.unref(N))},[e.unref(c).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(i).length==0?(e.openBlock(),e.createElementBlock("div",dt,e.toDisplayString(e.unref(a)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",ft,e.toDisplayString(e.unref(a)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(A),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(K))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(V),_=>(e.openBlock(),e.createElementBlock("button",{key:_.index,class:"dropdown-row",onClick:e.withModifiers(B=>s(_.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",mt,e.toDisplayString(_.data.value),1)],8,pt))),128))],16)],16)],6),[[e.vShow,y.value]])],8,["to"])):e.createCommentVNode("",!0)],64))}}),gt=Q,G={init:function(){document.querySelectorAll(".extraselect").forEach(function(n){G.bindNew(n)})},bindNew(n){L.lock(n,"extra-select",()=>{const l={};for(let a in n.dataset)try{l[a]=JSON.parse(n.dataset[a])}catch{l[a]=n.dataset[a]}l.originalNode=n;const t=document.createElement("div");n.parentNode.insertBefore(t,n.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const o=e.createApp(ut,l);o.mount(t),n.addEventListener("remove",function(){o.unmount(),t.remove(),n.remove(),L.remove(n,"extra-select")})})}},J={init:function(){document.querySelectorAll(".extrasuggest").forEach(function(n){J.bindNew(n)})},bindNew(n){L.lock(n,"extra-suggest",()=>{const l={};for(let a in n.dataset)try{l[a]=JSON.parse(n.dataset[a])}catch{l[a]=n.dataset[a]}l.originalNode=n;const t=document.createElement("div");n.parentNode.insertBefore(t,n.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const o=e.createApp(ht,l);o.mount(t),n.addEventListener("remove",function(){o.unmount(),t.remove(),n.remove(),L.remove(n,"extra-suggest")})})}};return document.addEventListener("DOMContentLoaded",function(){G.init(),J.init(),Q()}),z.ExtraSelect=G,z.ExtraSuggest=J,z.loadExtraSelectDefaultLocalization=gt,Object.defineProperties(z,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),z}({},Vue);
