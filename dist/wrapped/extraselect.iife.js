var Extraselect=function($,e){"use strict";const T=new WeakMap;class I{static put(n,t,r){T.has(n)||T.set(n,new Map),T.get(n).set(t,r)}static get(n,t){return T.get(n).get(t)}static has(n,t){return T.has(n)&&T.get(n).has(t)}static remove(n,t){var r=T.get(n).delete(t);return T.get(n).size!==0&&T.delete(n),r}static lock(n,t,r){return I.has(n,t)?!1:(I.put(n,t,!0),r())}}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).DATASTORE_DEBUG&&(window.__Store=T);function q(l){if(l==null)return{top:0,left:0,width:null,height:null};let n=l.getBoundingClientRect();return{top:n.top+window.scrollY,left:n.left+window.scrollX,width:n.width,height:n.height}}function z(l,n){n===void 0&&(n=window.document);for(var t=[],r=l.parentNode;r!=null&&r instanceof HTMLElement&&!(n instanceof HTMLElement&&r===n)&&!(typeof n=="string"&&r.matches(n));){var a=r;t.push(a),r=a.parentNode}return r!=null&&t.push(r),t}function ge(l){var n=Array.prototype.slice.call(l.childNodes);n.forEach(function(t){l.removeChild(t)})}var X;const D=typeof window<"u";D&&((X=window==null?void 0:window.navigator)==null?void 0:X.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ye(l){return typeof l=="function"?l():e.unref(l)}function we(l){return l}function ke(l){return e.getCurrentScope()?(e.onScopeDispose(l),!0):!1}function Ee(l,n=!0){e.getCurrentInstance()?e.onMounted(l):n?l():e.nextTick(l)}function Y(l){var n;const t=ye(l);return(n=t==null?void 0:t.$el)!=null?n:t}const ve=D?window:void 0;D&&window.document,D&&window.navigator,D&&window.location;function be(l,n=!1){const t=e.ref(),r=()=>t.value=Boolean(l());return r(),Ee(r,n),t}const W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q="__vueuse_ssr_handlers__";W[Q]=W[Q]||{},W[Q];var Z=Object.getOwnPropertySymbols,Se=Object.prototype.hasOwnProperty,_e=Object.prototype.propertyIsEnumerable,Ne=(l,n)=>{var t={};for(var r in l)Se.call(l,r)&&n.indexOf(r)<0&&(t[r]=l[r]);if(l!=null&&Z)for(var r of Z(l))n.indexOf(r)<0&&_e.call(l,r)&&(t[r]=l[r]);return t};function Oe(l,n,t={}){const r=t,{window:a=ve}=r,o=Ne(r,["window"]);let i;const s=be(()=>a&&"ResizeObserver"in a),d=()=>{i&&(i.disconnect(),i=void 0)},c=e.watch(()=>Y(l),u=>{d(),s.value&&a&&u&&(i=new ResizeObserver(n),i.observe(u,o))},{immediate:!0,flush:"post"}),p=()=>{d(),c()};return ke(p),{isSupported:s,stop:p}}function xe(l,n={width:0,height:0},t={}){const{box:r="content-box"}=t,a=e.ref(n.width),o=e.ref(n.height);return Oe(l,([i])=>{const s=r==="border-box"?i.borderBoxSize:r==="content-box"?i.contentBoxSize:i.devicePixelContentBoxSize;s?(a.value=s.reduce((d,{inlineSize:c})=>d+c,0),o.value=s.reduce((d,{blockSize:c})=>d+c,0)):(a.value=i.contentRect.width,o.value=i.contentRect.height)},t),e.watch(()=>Y(l),i=>{a.value=i?n.width:0,o.value=i?n.height:0}),{width:a,height:o}}var ee;(function(l){l.UP="UP",l.RIGHT="RIGHT",l.DOWN="DOWN",l.LEFT="LEFT",l.NONE="NONE"})(ee||(ee={}));var Ce=Object.defineProperty,te=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,le=(l,n,t)=>n in l?Ce(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,Le=(l,n)=>{for(var t in n||(n={}))Be.call(n,t)&&le(l,t,n[t]);if(te)for(var t of te(n))Ve.call(n,t)&&le(l,t,n[t]);return l};Le({linear:we},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function ne(l,n){const t=e.ref(),r=xe(t),a=e.ref([]),o=e.shallowRef(l),i=e.ref({start:0,end:10}),{itemHeight:s,overscan:d=5}=n,c=k=>{if(typeof s=="number")return Math.ceil(k/s);const{start:O=0}=i.value;let E=0,b=0;for(let C=O;C<o.value.length;C++)if(E+=s(C),E>=k){b=C;break}return b-O},p=k=>{if(typeof s=="number")return Math.floor(k/s)+1;let O=0,E=0;for(let b=0;b<o.value.length;b++)if(O+=s(b),O>=k){E=b;break}return E+1},u=()=>{const k=t.value;if(k){const O=p(k.scrollTop),E=c(k.clientHeight),b=O-d,C=O+E+d;i.value={start:b<0?0:b,end:C>o.value.length?o.value.length:C},a.value=o.value.slice(i.value.start,i.value.end).map((M,A)=>({data:M,index:A+i.value.start}))}};e.watch([r.width,r.height,l],()=>{u()});const h=e.computed(()=>typeof s=="number"?o.value.length*s:o.value.reduce((k,O,E)=>k+s(E),0)),y=k=>typeof s=="number"?k*s:o.value.slice(0,k).reduce((E,b,C)=>E+s(C),0),w=k=>{t.value&&(t.value.scrollTop=y(k),u())},g=e.computed(()=>y(i.value.start)),x=e.computed(()=>({style:{width:"100%",height:`${h.value-g.value}px`,marginTop:`${g.value}px`}}));return{list:a,scrollTo:w,containerProps:{ref:t,onScroll:()=>{u()},style:{overflowY:"auto"}},wrapperProps:x}}const P=l=>{let n=parseInt(l);return n==l?n:l},Te=(l,n,t)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const r={defaultArray:l.value,get:()=>l.value,push:(a,o,i=null)=>{parseInt(a)==a&&(a=parseInt(a));const s=l.map.get(a);if(s)s.value=o,s.data=i;else{let d={value:o,key:a,data:i};l.value.push(d),l.map.set(d.key,d)}},addRange:a=>{for(let o of a)l.actions.push(o.key,o.value,o.data)},remove:a=>{l.value.splice(l.value.findIndex(o=>o.key==a),1)},clear:()=>{l.value=[]},sort:(a=null)=>{a==null&&(a=(o,i)=>o.value.localeCompare(i.value)),l.value=l.value.sort(a)},setDefault:function(a){this.defaultArray=a},restoreDefault:function(){l.value=this.defaultArray},filter:function(a){},selection:{get(){return n.value},clear(){n.value.clear()},add(a){n.value.set(a,a)},remove(a){n.value.delete(a)}}};window.ExtraSelectOptions[t]=r,l.actions=r};let Fe=1;const ae=l=>{l&&(l.style.display="none",ge(l))},oe=(l,n,t,r)=>{var d;const a=e.ref(new Map);e.watchEffect(()=>{if(Array.isArray(t.value)){a.value.clear();for(let c of t.value)a.value.set(c,c)}});const o=e.ref([]);if(o.map=new Map,o.rebuildMap=()=>{if(o.map.clear(),o.value)for(let c of o.value)o.map.set(c.key,c)},e.watchEffect(()=>{n.value&&(o.value=n.value.map(c=>({...c,key:P(c.key)})),o.rebuildMap())}),l){if(a.value.clear(),l.matches("select")){for(let c of Array.apply(null,l.selectedOptions).map(p=>P(p.value)).filter(p=>p!=null))a.value.set(c,c);o.value=Array.apply(null,l.options).reduce((c,p)=>(c.push({value:p.text,key:P(p.value),data:Object.assign({},p.dataset)}),c),[])}if(l.matches("input")){let c=l.value;c!=null&&c.length>0&&(o.value=[{value:c,key:c}])}o.rebuildMap()}if(Array.isArray(r))for(let c of r)a.value.set(P(c),P(c));else r!=null&&a.value.set(P(r),P(r));Te(o,a,(d=l==null?void 0:l.id)!=null?d:"extraselect_"+(++Fe).toString());const i=[];return a.value.forEach((c,p)=>{i.push([p,c])}),{options:o,selectedOptions:a,onReset:()=>{a.value.clear();for(let[c,p]of i)a.value.set(c,p)}}};e.ref({});function Ae(l,n={}){for(let t in n)l=l.replace(`:${t}`,n[t]);return l}const G=(l=null)=>{var r,a;window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={});let t={...(a=(r=window.ExtraSelectLocalization.defaults)==null?void 0:r.defaultArray)!=null?a:{}};Object.assign(t,l!=null?l:{}),re(e.ref(t),"defaults")},re=(l,n)=>{window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={},G());const t={defaultArray:l.value,list:()=>l.value,get:r=>{var a;return(a=l.value[r])!=null?a:null},push:(r,a)=>{l.value[r]=a}};window.ExtraSelectLocalization[n]=t,l.actions=t};let Ie=0;const se=(l,n)=>{var r;return re(n,(r=l==null?void 0:l.id)!=null?r:"extraselect_"+(++Ie).toString()),{propLocalization:n,t:(a,o={})=>{var s;let i=(s=n.value[a])!=null?s:window.ExtraSelectLocalization.defaults.get(a);return i==null&&(window.ExtraSelectLocalization.defaults.push(a,a),i=a),Ae(i,o)}}},ie=async function(l,n=null,t={}){var o;const r={method:"POST",credentials:"include",...t,headers:{"Content-Type":"application/json",...(o=t.headers)!=null?o:{}},body:JSON.stringify({search:n,...t.body})};return await(await fetch(l,r)).json()},ce=(l,n,t,r,a,o,i="limited",s={})=>{const d=e.ref(0),c=e.ref(!1),p=e.computed(()=>c.value||d.value>0);if(n!=null&&n.length>0)if(t){const u=[];e.watchEffect(h=>{if(r.value.length>=a){let y=!0;switch(i){case"always":break;default:case"limited":y=!u.includes(r.value);break;case"complete":y=u.reduce((w,g)=>w&&!r.value.startsWith(g),!0);break}if(y){c.value=!0;const w=setTimeout(()=>{u.push(r.value),d.value+=1,s.body={...s.body,...o.value},ie(n,r.value,s).then(g=>{l.actions.addRange(g),l.actions.sort(),d.value-=1,c.value=!1})},500);h(()=>{clearTimeout(w)})}}})}else ie(n,null,s).then(u=>{l.actions.addRange(u),l.actions.sort()});return{searchingFlag:p}},de=(l,n,t,r=[],a=[])=>{const o=e.ref(""),i=e.ref([]),s=e.ref({}),d={...r.reduce((p,u)=>(p[u]=!1,p),{}),...a.reduce((p,u)=>(p[u]=!0,p),{})};for(let p in d){let u=d[p],h=document.getElementById(p);s.value[p]=h==null?void 0:h.value,h&&h.addEventListener("change",y=>{s.value[p]=y.target.value,u&&e.nextTick(()=>{if(n!=null)for(let w of Array.from(n.value.keys()))i.value.find(g=>g.key==w)||t(w,!1);else i.value.find(w=>w.key==o.value)||t(o.value,!1)})})}const c=function(p,u){let h=p.value;return Object.keys(s.value).length>0&&(h=h.filter(y=>{var w,g;for(let x in s.value)if((d[x]?!0:((w=s.value[x])!=null?w:"").length>0)&&((g=y.data)==null?void 0:g.hasOwnProperty(x))&&y.data[x]!=s.value[x])return!1;return!0})),u.length>0&&(h=h.filter(y=>y.value.toLowerCase().includes(u.toLowerCase()))),h};return e.watchEffect(()=>{i.value=c(l,o.value)}),{filterText:o,filteredOptions:i,filterValues:s}},ue=(l,n,t,r,a,o,i)=>{const s=getComputedStyle(document.querySelector("body")).font,d=function(u){const y=document.createElement("canvas").getContext("2d");return y.font=s,y.measureText(u).width},c=e.computed(()=>{var h,y;const u=(h=q(r.value).width)!=null?h:100;if(i==="inherit")return u;if(i==null||i==="dynamic"){const w=(y=parseInt(getComputedStyle(document.querySelector("html"))["font-size"]))!=null?y:16;return Math.max(u,Math.max(...l.value.map(g=>d(g.value)))+20+w*3)}return i}),p=e.ref({position:"absolute","min-width":"max-content"});return e.watchPostEffect(()=>{t.value<0&&console.log("is open"),n.value.size<0&&console.log("empty selection");var u=q(r.value),h=q(null);if(o.value&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(o.value).position))var h=q(o.value);let y=-h.left+u.left;const w=window.document.documentElement.clientWidth;y+c.value>w&&(y=w-c.value),p.value={position:"absolute","min-width":"max-content",width:c.value.toString()+"px",top:(-h.top+u.top+u.height).toString()+"px",left:y.toString()+"px"}}),{dropdownStyle:p,getTextWidth:d}},Pe=["name"],Me={key:1,class:"extra-select selection"},ze=["onClick"],$e=["innerHTML"],De=["value","disabled"],je={key:0,class:"input-searching"},qe=["placeholder"],He={key:0,class:"allselect-clear"},Re={class:"row-input"},Ue=["checked"],We={class:"row-input"},Qe=["checked"],Ge={key:1,class:"no-matches"},Je={key:2},Ke=["onClick"],Xe={class:"row-input"},Ye=["checked"],Ze=["value"],et=Object.assign({name:"ExtraSelect",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:Array,required:!1,default:[]},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!1},searchableUrl:{type:Boolean,default:!1},initialValue:{default:null},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:n}){var fe,pe,me;const t=l,r=e.computed(()=>{var f,m;return(m=(f=t.originalNode)==null?void 0:f.multiple)!=null?m:t.multiple}),{options:a,selectedOptions:o,onReset:i}=oe(t.originalNode,e.toRef(t,"options"),e.toRef(t,"modelValue"),t.initialValue),{t:s}=se(t.originalNode,e.toRef(t,"localization")),d=(fe=t.originalNode)==null?void 0:fe.classList,c=Object.values((me=(pe=t.originalNode)==null?void 0:pe.style)!=null?me:{});ae(t.originalNode);const p=(f,m=null)=>{if(r.value){let B=m;switch(B==null&&(B=!o.value.has(f)),B){case!0:o.value.set(f,f);break;case!1:o.value.delete(f);break}}else o.value.clear(),m!==!1&&o.value.set(f,f),k.value=!1;A(Array.from(o.value.keys()))},{filterText:u,filteredOptions:h,filterValues:y}=de(a,o,p,t.filterFields,t.hardFilterFields),{searchingFlag:w}=ce(a,t.url,t.searchableUrl,u,t.minChars,y,t.fetchMode,t.fetchOptions),g=e.ref(null),x=e.ref(null),F=e.ref(null),k=e.ref(!1);function O(f){t.disabled||(k.value=f)}e.watch(u,()=>{x.value.querySelector(".scroller").scrollTop=0});const E=e.ref(null),b=function(f){const m=z(f.target);m.push(f.target),!m.includes(g.value)&&!m.includes(x.value)&&(k.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let f=!1;E.value=z(g.value).find(m=>!!(m instanceof Element&&(m.matches(t.dropdownContainer)&&(f=!0),f&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(m).position))))}if(E.value==null&&(E.value=document.querySelector("body")),t.originalNode){for(let m of d)m!="extraselect"&&g.value.classList.add(m);for(let m of c)g.value.style[m]=t.originalNode.style[m];let f=z(g.value,"form").pop();f instanceof HTMLElement&&f.matches("form")&&f.addEventListener("reset",()=>setTimeout(i)),t.originalNode.toggleValue=p,t.originalNode.setValues=m=>{o.value.clear();for(let B of m)p(B)}}window.document.addEventListener("mousedown",b),window.document.addEventListener("focusin",b)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",b),window.document.removeEventListener("focusin",b)});const{dropdownStyle:C,getTextWidth:M}=ue(a,o,k,g,x,E,t.maxWidth),A=f=>{e.nextTick(()=>{var m;return(m=t.originalNode)==null?void 0:m.dispatchEvent(new Event("change",{bubbles:!0}))}),n("update:modelValue",f)},H=f=>{N(f,!1),u.value=""},N=(f,m=null)=>{m==null&&(m=!S.value),m?(o.value.clear(),a.value.forEach(B=>o.value.set(B.key,B.key))):o.value.clear(),A(Array.from(o.value.keys()))},v=()=>{V.value?h.value.forEach(f=>{o.value.has(f.key)&&o.value.delete(f.key)}):h.value.forEach(f=>{o.value.has(f.key)||o.value.set(f.key,f.key)}),A(Array.from(o.value.keys()))};e.watch(k,(f,m)=>{f!=m&&(f?t.search&&e.nextTick(()=>{F.value.focus({focusVisible:!0})}):u.value="")});const S=e.computed(()=>o.value.size==a.value.length),V=e.computed(()=>h.value.reduce((f,m)=>f&&o.value.has(m.key),!0)),it=e.computed(()=>o.value.size==0),ct=e.computed(()=>{var f,m,B,j,_;if(a.value.length<0)return"";if(r.value){if(it.value)return s("No selection");if(!t.searchableUrl&&S.value)return s("All selected");const L=g.value?getComputedStyle(g.value):null,R=((f=g.value)==null?void 0:f.clientWidth)-parseInt(L==null?void 0:L.paddingLeft)-parseInt(L==null?void 0:L.paddingRight);let U=s(":n selected - ",{n:o.value.size}),he=!0;for(let pt of o.value)if(he?he=!1:U+=", ",U+=(B=(m=a.map.get(pt[0]))==null?void 0:m.value)!=null?B:w.value?s("Loading..."):s("Value not found"),R<M(U))return o.value.size+s(" selected");return U}else for(let L of o.value)return(_=(j=a.map.get(L[0]))==null?void 0:j.value)!=null?_:w.value?s("Loading..."):s("Value not found");return s("No selection")}),{list:dt,containerProps:ut,wrapperProps:ft}=ne(h,{itemHeight:32});return(f,m)=>{var B,j;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(r)&&e.unref(o).size==0?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:(j=(B=t.originalNode)==null?void 0:B.name)==null?void 0:j.replace("[]",""),value:""},null,8,Pe)):e.createCommentVNode("",!0),t.showSelected?(e.openBlock(),e.createElementBlock("div",Me,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),_=>{var L;return e.openBlock(),e.createElementBlock("div",{key:_,onClick:R=>p(_[0]),class:"selection-badge"},[e.createTextVNode(e.toDisplayString((L=e.unref(a).find(R=>R.key==_[0]))==null?void 0:L.value)+" ",1),e.createElementVNode("div",{class:"selection-remove",innerHTML:t.removeIcon},null,8,$e)],8,ze)}),128))])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({onFocus:m[0]||(m[0]=_=>O(!0)),onClick:m[1]||(m[1]=_=>O(!0)),ref_key:"inputNode",ref:g,value:e.unref(ct),class:"extra-select extra-select-input",readonly:""},f.$attrs,{disabled:l.disabled}),null,16,De),E.value?(e.openBlock(),e.createBlock(e.Teleport,{key:2,to:E.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(w)>0}]),ref_key:"dropdownNode",ref:x,style:e.normalizeStyle(e.unref(C))},[t.search?(e.openBlock(),e.createElementBlock("div",je,[e.withDirectives(e.createElementVNode("input",{ref_key:"searchNode",ref:F,class:"extra-select-search","onUpdate:modelValue":m[2]||(m[2]=_=>e.isRef(u)?u.value=_:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:e.unref(s)("Search...")},null,8,qe),[[e.vModelText,e.unref(u)]])])):e.createCommentVNode("",!0),e.unref(u).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(r)?(e.openBlock(),e.createElementBlock("div",He,[e.unref(u).length==0?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:N,class:"all-select"},[e.createElementVNode("div",Re,[e.createElementVNode("input",{checked:e.unref(S),type:"checkbox"},null,8,Ue),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select all")),1)])])):e.createCommentVNode("",!0),e.unref(h).length>0&&e.unref(u).length>0?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:v,class:"all-select"},[e.createElementVNode("div",We,[e.createElementVNode("input",{checked:e.unref(V),type:"checkbox"},null,8,Qe),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select Filtered")),1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"clear",onClick:H},e.toDisplayString(e.unref(s)("Clear")),1)])):e.createCommentVNode("",!0),e.unref(h).length==0?(e.openBlock(),e.createElementBlock("div",Ge,e.toDisplayString(e.unref(s)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",Je,e.toDisplayString(e.unref(s)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(ut),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(ft))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(dt),_=>(e.openBlock(),e.createElementBlock("button",{key:_.index,class:"dropdown-row",onClick:e.withModifiers(L=>p(_.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",Xe,[e.unref(r)?(e.openBlock(),e.createElementBlock("input",{key:0,checked:e.unref(o).has(_.data.key),type:"checkbox"},null,8,Ye)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(_.data.value),1)])],8,Ke))),128))],16)],16)],6),[[e.vShow,k.value]])],8,["to"])):e.createCommentVNode("",!0),t.originalNode?(e.openBlock(),e.createBlock(e.Teleport,{key:3,to:t.originalNode},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),_=>(e.openBlock(),e.createElementBlock("option",{key:_[0],selected:"selected",value:_[0]},null,8,Ze))),128))],8,["to"])):e.createCommentVNode("",!0)],64)}}}),tt=["disabled"],lt={key:0,class:"no-matches"},nt={key:1},at=["onClick"],ot={class:"row-input"},rt=Object.assign({name:"ExtraSuggest",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},url:{type:String,required:!1},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:n}){var M,A,H;const t=l,{options:r}=oe(t.originalNode,e.toRef(t,"options"),e.ref([])),{t:a}=se(t.originalNode,e.toRef(t,"localization")),o=(M=t.originalNode)==null?void 0:M.classList,i=Object.values((H=(A=t.originalNode)==null?void 0:A.style)!=null?H:{});ae(t.originalNode);const s=(N,v=null)=>{v===!1?d.value="":d.value=r.map.get(N).value,w.value=!1},{filterText:d,filteredOptions:c,filterValues:p}=de(r,null,s,t.filterFields,t.hardFilterFields),{searchingFlag:u}=ce(r,t.url,t.searchableUrl,d,t.minChars,p,t.fetchMode,t.fetchOptions),h=e.ref(null),y=e.ref(null),w=e.ref(!1),g=e.ref(null);function x(N){t.disabled||(w.value=N)}e.watch(d,()=>{y.value.querySelector(".scroller").scrollTop=0});const F=function(N){const v=z(N.target);v.push(N.target),!v.includes(h.value)&&!v.includes(y.value)&&(w.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let S=!1;g.value=z(h.value).find(V=>!!(V instanceof Element&&(V.matches(t.dropdownContainer)&&(S=!0),S&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(V).position))))}if(g.value==null&&(g.value=document.querySelector("body")),t.originalNode){for(let V of o)V!="extrasuggest"&&h.value.classList.add(V);for(let V of i)h.value.style[V]=t.originalNode.style[V];d.value=t.originalNode.value;let S=z(h.value,"form").pop();S instanceof HTMLElement&&S.matches("form")&&S.addEventListener("reset",()=>setTimeout(v)),t.originalNode.addEventListener("change",()=>{O(!0)})}e.watchEffect(()=>{t.modelValue!=null&&(d.value=t.modelValue)});const N=d.value,v=()=>{d.value=N};window.document.addEventListener("mousedown",F),window.document.addEventListener("focusin",F)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",F),window.document.removeEventListener("focusin",F)});const{dropdownStyle:k}=ue(r,e.ref([]),w,h,y,g,t.maxWidth),O=(N=!1)=>{var v;t.originalNode&&(N?d.value=t.originalNode.value:(t.originalNode.value=d.value,(v=t.originalNode)==null||v.dispatchEvent(new Event("change",{bubbles:!0})))),n("update:modelValue",d.value)};e.watch(()=>w.value,N=>{N===!1&&O()});const{list:E,containerProps:b,wrapperProps:C}=ne(c,{itemHeight:32});return(N,v)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({onFocus:v[0]||(v[0]=S=>x(!0)),onClick:v[1]||(v[1]=S=>x(!0)),ref_key:"inputNode",ref:h,"onUpdate:modelValue":v[2]||(v[2]=S=>e.isRef(d)?d.value=S:null),class:"extra-select extra-select-input"},N.$attrs,{disabled:l.disabled}),null,16,tt),[[e.vModelDynamic,e.unref(d)]]),g.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:g.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(u)>0}]),ref_key:"dropdownNode",ref:y,style:e.normalizeStyle(e.unref(k))},[e.unref(d).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(c).length==0?(e.openBlock(),e.createElementBlock("div",lt,e.toDisplayString(e.unref(a)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",nt,e.toDisplayString(e.unref(a)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(b),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(C))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(E),S=>(e.openBlock(),e.createElementBlock("button",{key:S.index,class:"dropdown-row",onClick:e.withModifiers(V=>s(S.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",ot,e.toDisplayString(S.data.value),1)],8,at))),128))],16)],16)],6),[[e.vShow,w.value]])],8,["to"])):e.createCommentVNode("",!0)],64))}}),st=G,J={init:function(){document.querySelectorAll(".extraselect").forEach(function(l){J.bindNew(l)})},bindNew(l){I.lock(l,"extra-select",()=>{const n={};for(let a in l.dataset)try{n[a]=JSON.parse(l.dataset[a])}catch{n[a]=l.dataset[a]}n.disabled=l.disabled,n.originalNode=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const r=e.createApp(et,n);r.mount(t),l.addEventListener("remove",function(){r.unmount(),t.remove(),l.remove(),I.remove(l,"extra-select")})})}},K={init:function(){document.querySelectorAll(".extrasuggest").forEach(function(l){K.bindNew(l)})},bindNew(l){I.lock(l,"extra-suggest",()=>{const n={};for(let a in l.dataset)try{n[a]=JSON.parse(l.dataset[a])}catch{n[a]=l.dataset[a]}n.disabled=l.disabled,n.originalNode=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const r=e.createApp(rt,n);r.mount(t),l.addEventListener("remove",function(){r.unmount(),t.remove(),l.remove(),I.remove(l,"extra-suggest")})})}};return document.addEventListener("DOMContentLoaded",function(){J.init(),K.init(),G()}),$.ExtraSelect=J,$.ExtraSuggest=K,$.loadExtraSelectDefaultLocalization=st,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),$}({},Vue);
