var Extraselect=function(D,e){"use strict";const T=new WeakMap;class I{static put(n,t,r){T.has(n)||T.set(n,new Map),T.get(n).set(t,r)}static get(n,t){return T.get(n).get(t)}static has(n,t){return T.has(n)&&T.get(n).has(t)}static remove(n,t){var r=T.get(n).delete(t);return T.get(n).size!==0&&T.delete(n),r}static lock(n,t,r){return I.has(n,t)?!1:(I.put(n,t,!0),r())}}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).DATASTORE_DEBUG&&(window.__Store=T);function q(l){if(l==null)return{top:0,left:0,width:null,height:null};let n=l.getBoundingClientRect();return{top:n.top+window.scrollY,left:n.left+window.scrollX,width:n.width,height:n.height}}function z(l,n){n===void 0&&(n=window.document);for(var t=[],r=l.parentNode;r!=null&&r instanceof HTMLElement&&!(n instanceof HTMLElement&&r===n)&&!(typeof n=="string"&&r.matches(n));){var o=r;t.push(o),r=o.parentNode}return r!=null&&t.push(r),t}function ge(l){var n=Array.prototype.slice.call(l.childNodes);n.forEach(function(t){l.removeChild(t)})}var X;const $=typeof window<"u";$&&((X=window==null?void 0:window.navigator)==null?void 0:X.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ye(l){return typeof l=="function"?l():e.unref(l)}function we(l){return l}function ke(l){return e.getCurrentScope()?(e.onScopeDispose(l),!0):!1}function Ee(l,n=!0){e.getCurrentInstance()?e.onMounted(l):n?l():e.nextTick(l)}function Y(l){var n;const t=ye(l);return(n=t==null?void 0:t.$el)!=null?n:t}const ve=$?window:void 0;$&&window.document,$&&window.navigator,$&&window.location;function be(l,n=!1){const t=e.ref(),r=()=>t.value=Boolean(l());return r(),Ee(r,n),t}const W=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Q="__vueuse_ssr_handlers__";W[Q]=W[Q]||{},W[Q];var Z=Object.getOwnPropertySymbols,_e=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,Ne=(l,n)=>{var t={};for(var r in l)_e.call(l,r)&&n.indexOf(r)<0&&(t[r]=l[r]);if(l!=null&&Z)for(var r of Z(l))n.indexOf(r)<0&&Se.call(l,r)&&(t[r]=l[r]);return t};function Oe(l,n,t={}){const r=t,{window:o=ve}=r,a=Ne(r,["window"]);let i;const s=be(()=>o&&"ResizeObserver"in o),u=()=>{i&&(i.disconnect(),i=void 0)},c=e.watch(()=>Y(l),f=>{u(),s.value&&o&&f&&(i=new ResizeObserver(n),i.observe(f,a))},{immediate:!0,flush:"post"}),p=()=>{u(),c()};return ke(p),{isSupported:s,stop:p}}function xe(l,n={width:0,height:0},t={}){const{box:r="content-box"}=t,o=e.ref(n.width),a=e.ref(n.height);return Oe(l,([i])=>{const s=r==="border-box"?i.borderBoxSize:r==="content-box"?i.contentBoxSize:i.devicePixelContentBoxSize;s?(o.value=s.reduce((u,{inlineSize:c})=>u+c,0),a.value=s.reduce((u,{blockSize:c})=>u+c,0)):(o.value=i.contentRect.width,a.value=i.contentRect.height)},t),e.watch(()=>Y(l),i=>{o.value=i?n.width:0,a.value=i?n.height:0}),{width:o,height:a}}var ee;(function(l){l.UP="UP",l.RIGHT="RIGHT",l.DOWN="DOWN",l.LEFT="LEFT",l.NONE="NONE"})(ee||(ee={}));var Ce=Object.defineProperty,te=Object.getOwnPropertySymbols,Be=Object.prototype.hasOwnProperty,Ve=Object.prototype.propertyIsEnumerable,le=(l,n,t)=>n in l?Ce(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,Le=(l,n)=>{for(var t in n||(n={}))Be.call(n,t)&&le(l,t,n[t]);if(te)for(var t of te(n))Ve.call(n,t)&&le(l,t,n[t]);return l};Le({linear:we},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function ne(l,n){const t=e.ref(),r=xe(t),o=e.ref([]),a=e.shallowRef(l),i=e.ref({start:0,end:10}),{itemHeight:s,overscan:u=5}=n,c=k=>{if(typeof s=="number")return Math.ceil(k/s);const{start:O=0}=i.value;let E=0,_=0;for(let C=O;C<a.value.length;C++)if(E+=s(C),E>=k){_=C;break}return _-O},p=k=>{if(typeof s=="number")return Math.floor(k/s)+1;let O=0,E=0;for(let _=0;_<a.value.length;_++)if(O+=s(_),O>=k){E=_;break}return E+1},f=()=>{const k=t.value;if(k){const O=p(k.scrollTop),E=c(k.clientHeight),_=O-u,C=O+E+u;i.value={start:_<0?0:_,end:C>a.value.length?a.value.length:C},o.value=a.value.slice(i.value.start,i.value.end).map((A,M)=>({data:A,index:M+i.value.start}))}};e.watch([r.width,r.height,l],()=>{f()});const h=e.computed(()=>typeof s=="number"?a.value.length*s:a.value.reduce((k,O,E)=>k+s(E),0)),y=k=>typeof s=="number"?k*s:a.value.slice(0,k).reduce((E,_,C)=>E+s(C),0),w=k=>{t.value&&(t.value.scrollTop=y(k),f())},g=e.computed(()=>y(i.value.start)),x=e.computed(()=>({style:{width:"100%",height:`${h.value-g.value}px`,marginTop:`${g.value}px`}}));return{list:o,scrollTo:w,containerProps:{ref:t,onScroll:()=>{f()},style:{overflowY:"auto"}},wrapperProps:x}}const P=l=>{let n=parseInt(l);return n==l?n:l},Te=(l,n,t)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const r={defaultArray:l.value,get:()=>l.value,push:(o,a,i=null)=>{parseInt(o)==o&&(o=parseInt(o));const s=l.map.get(o);if(s)s.value=a,s.data=i;else{let u={value:a,key:o,data:i};l.value.push(u),l.map.set(u.key,u)}},addRange:o=>{for(let a of o)l.actions.push(a.key,a.value,a.data)},remove:o=>{l.value.splice(l.value.findIndex(a=>a.key==o),1)},clear:()=>{l.value=[]},sort:(o=null)=>{o==null&&(o=(a,i)=>a.value.localeCompare(i.value)),l.value=l.value.sort(o)},setDefault:function(o){this.defaultArray=o},restoreDefault:function(){l.value=this.defaultArray},filter:function(o){},selection:{get(){return n.value},clear(){n.value.clear()},add(o){n.value.set(o,o)},remove(o){n.value.delete(o)}}};window.ExtraSelectOptions[t]=r,l.actions=r};let Fe=1;const oe=l=>{l&&(l.style.display="none",ge(l))},ae=(l,n,t,r)=>{const o=e.ref(new Map);e.watchEffect(()=>{if(Array.isArray(t.value)){o.value.clear();for(let c of t.value)o.value.set(c,c)}});const a=e.ref([]);if(a.map=new Map,a.rebuildMap=()=>{if(a.map.clear(),a.value)for(let c of a.value)a.map.set(c.key,c)},e.watchEffect(()=>{n.value&&(a.value=n.value.map(c=>({...c,key:P(c.key)})),a.rebuildMap())}),l){if(o.value.clear(),l.matches("select")){for(let c of Array.apply(null,l.selectedOptions).map(p=>P(p.value)).filter(p=>p!=null))o.value.set(c,c);a.value=Array.apply(null,l.options).reduce((c,p)=>(c.push({value:p.text,key:P(p.value),data:Object.assign({},p.dataset)}),c),[])}if(l.matches("input")){let c=l.value;c!=null&&c.length>0&&(a.value=[{value:c,key:c}])}a.rebuildMap()}if(Array.isArray(r))for(let c of r)o.value.set(P(c),P(c));else r!=null&&o.value.set(P(r),P(r));let i=l==null?void 0:l.id;(i==null||i===""||i==0)&&(i="extraselect_"+(++Fe).toString()),Te(a,o,i);const s=[];return o.value.forEach((c,p)=>{s.push([p,c])}),{options:a,selectedOptions:o,onReset:()=>{o.value.clear();for(let[c,p]of s)o.value.set(c,p)}}};e.ref({});function Me(l,n={}){for(let t in n)l=l.replace(`:${t}`,n[t]);return l}const G=(l=null)=>{var r,o;window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={});let t={...(o=(r=window.ExtraSelectLocalization.defaults)==null?void 0:r.defaultArray)!=null?o:{}};Object.assign(t,l!=null?l:{}),re(e.ref(t),"defaults")},re=(l,n)=>{window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={},G());const t={defaultArray:l.value,list:()=>l.value,get:r=>{var o;return(o=l.value[r])!=null?o:null},push:(r,o)=>{l.value[r]=o}};window.ExtraSelectLocalization[n]=t,l.actions=t};let Ie=0;const se=(l,n)=>{var r;return re(n,(r=l==null?void 0:l.id)!=null?r:"extraselect_"+(++Ie).toString()),{propLocalization:n,t:(o,a={})=>{var s;let i=(s=n.value[o])!=null?s:window.ExtraSelectLocalization.defaults.get(o);return i==null&&(window.ExtraSelectLocalization.defaults.push(o,o),i=o),Me(i,a)}}},ie=async function(l,n=null,t={}){var a;const r={method:"POST",credentials:"include",...t,headers:{"Content-Type":"application/json",...(a=t.headers)!=null?a:{}},body:JSON.stringify({search:n,...t.body})};return await(await fetch(l,r)).json()},ce=(l,n,t,r,o,a,i="limited",s={})=>{const u=e.ref(0),c=e.ref(!1),p=e.computed(()=>c.value||u.value>0);if(n!=null&&n.length>0)if(t){const f=[];e.watchEffect(h=>{if(r.value.length>=o){let y=!0;switch(i){case"always":break;default:case"limited":y=!f.includes(r.value);break;case"complete":y=f.reduce((w,g)=>w&&!r.value.startsWith(g),!0);break}if(y){c.value=!0;const w=setTimeout(()=>{f.push(r.value),u.value+=1,s.body={...s.body,...a.value},ie(n,r.value,s).then(g=>{l.actions.addRange(g),l.actions.sort(),u.value-=1,c.value=!1})},500);h(()=>{clearTimeout(w)})}}})}else ie(n,null,s).then(f=>{l.actions.addRange(f),l.actions.sort()});return{searchingFlag:p}},de=(l,n,t,r=[],o=[])=>{const a=e.ref(""),i=e.ref([]),s=e.ref({}),u={...r.reduce((p,f)=>(p[f]=!1,p),{}),...o.reduce((p,f)=>(p[f]=!0,p),{})};for(let p in u){let f=u[p],h=document.getElementById(p);s.value[p]=h==null?void 0:h.value,h&&h.addEventListener("change",y=>{s.value[p]=y.target.value,f&&e.nextTick(()=>{if(n!=null)for(let w of Array.from(n.value.keys()))i.value.find(g=>g.key==w)||t(w,!1);else i.value.find(w=>w.key==a.value)||t(a.value,!1)})})}const c=function(p,f){let h=p.value;return Object.keys(s.value).length>0&&(h=h.filter(y=>{var w,g;for(let x in s.value)if((u[x]?!0:((w=s.value[x])!=null?w:"").length>0)&&((g=y.data)==null?void 0:g.hasOwnProperty(x))&&y.data[x]!=s.value[x])return!1;return!0})),f.length>0&&(h=h.filter(y=>y.value.toLowerCase().includes(f.toLowerCase()))),h};return e.watchEffect(()=>{i.value=c(l,a.value)}),{filterText:a,filteredOptions:i,filterValues:s}},ue=(l,n,t,r,o,a,i)=>{const s=getComputedStyle(document.querySelector("body")).font,u=function(f){const y=document.createElement("canvas").getContext("2d");return y.font=s,y.measureText(f).width},c=e.computed(()=>{var h,y;const f=(h=q(r.value).width)!=null?h:100;if(i==="inherit")return f;if(i==null||i==="dynamic"){const w=(y=parseInt(getComputedStyle(document.querySelector("html"))["font-size"]))!=null?y:16;return Math.max(f,Math.max(...l.value.map(g=>u(g.value)))+20+w*3)}return i}),p=e.ref({position:"absolute","min-width":"max-content"});return e.watchPostEffect(()=>{t.value<0&&console.log("is open"),n.value.size<0&&console.log("empty selection");var f=q(r.value),h=q(null);if(a.value&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(a.value).position))var h=q(a.value);let y=-h.left+f.left;const w=window.document.documentElement.clientWidth;y+c.value>w&&(y=w-c.value),p.value={position:"absolute","min-width":"max-content",width:c.value.toString()+"px",top:(-h.top+f.top+f.height).toString()+"px",left:y.toString()+"px"}}),{dropdownStyle:p,getTextWidth:u}},Pe=["name"],Ae={key:1,class:"extra-select selection"},ze=["onClick"],De=["innerHTML"],$e=["value","disabled"],je={key:0,class:"input-searching"},qe=["placeholder"],He={key:0,class:"allselect-clear"},Re=["onClick"],Ue={class:"row-input"},We=["checked"],Qe=["onClick"],Ge={class:"row-input"},Je=["checked"],Ke=["onClick"],Xe={key:1,class:"no-matches"},Ye={key:2},Ze=["onClick"],et={class:"row-input"},tt=["checked"],lt=["value"],nt=Object.assign({name:"ExtraSelect",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:Array,required:!1,default:[]},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!1},searchableUrl:{type:Boolean,default:!1},initialValue:{default:null},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:n}){var fe,pe,me;const t=l,r=e.computed(()=>{var d,m;return(m=(d=t.originalNode)==null?void 0:d.multiple)!=null?m:t.multiple}),{options:o,selectedOptions:a,onReset:i}=ae(t.originalNode,e.toRef(t,"options"),e.toRef(t,"modelValue"),t.initialValue),{t:s}=se(t.originalNode,e.toRef(t,"localization")),u=(fe=t.originalNode)==null?void 0:fe.classList,c=Object.values((me=(pe=t.originalNode)==null?void 0:pe.style)!=null?me:{});oe(t.originalNode);const p=(d,m=null)=>{if(r.value){let B=m;switch(B==null&&(B=!a.value.has(d)),B){case!0:a.value.set(d,d);break;case!1:a.value.delete(d);break}}else a.value.clear(),m!==!1&&a.value.set(d,d),k.value=!1;M(Array.from(a.value.keys()))},{filterText:f,filteredOptions:h,filterValues:y}=de(o,a,p,t.filterFields,t.hardFilterFields),{searchingFlag:w}=ce(o,t.url,t.searchableUrl,f,t.minChars,y,t.fetchMode,t.fetchOptions),g=e.ref(null),x=e.ref(null),F=e.ref(null),k=e.ref(!1);function O(d){t.disabled||(k.value=d)}e.watch(f,()=>{x.value.querySelector(".scroller").scrollTop=0});const E=e.ref(null),_=function(d){const m=z(d.target);m.push(d.target),!m.includes(g.value)&&!m.includes(x.value)?k.value=!1:(d.stopImmediatePropagation(),d.preventDefault())};e.onMounted(()=>{if(t.dropdownContainer){let d=!1;E.value=z(g.value).find(m=>!!(m instanceof Element&&(m.matches(t.dropdownContainer)&&(d=!0),d&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(m).position))))}if(E.value==null&&(E.value=document.querySelector("body")),t.originalNode){for(let m of u)m!="extraselect"&&g.value.classList.add(m);for(let m of c)g.value.style[m]=t.originalNode.style[m];let d=z(g.value,"form").pop();d instanceof HTMLElement&&d.matches("form")&&d.addEventListener("reset",()=>setTimeout(i)),t.originalNode.toggleValue=p,t.originalNode.setValues=m=>{a.value.clear();for(let B of m)p(B)}}window.document.addEventListener("mousedown",_),window.document.addEventListener("focusin",_)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",_),window.document.removeEventListener("focusin",_)});const{dropdownStyle:C,getTextWidth:A}=ue(o,a,k,g,x,E,t.maxWidth),M=d=>{e.nextTick(()=>{var m;return(m=t.originalNode)==null?void 0:m.dispatchEvent(new Event("change",{bubbles:!0}))}),n("update:modelValue",d)},H=d=>{v(d,!1),f.value=""},v=(d,m=null)=>{m==null&&(m=!S.value),m?(a.value.clear(),o.value.forEach(B=>a.value.set(B.key,B.key))):a.value.clear(),M(Array.from(a.value.keys()))},b=()=>{V.value?h.value.forEach(d=>{a.value.has(d.key)&&a.value.delete(d.key)}):h.value.forEach(d=>{a.value.has(d.key)||a.value.set(d.key,d.key)}),M(Array.from(a.value.keys()))};e.watch(k,(d,m)=>{d!=m&&(d?t.search&&e.nextTick(()=>{F.value.focus({focusVisible:!0})}):f.value="")});const S=e.computed(()=>a.value.size==o.value.length),V=e.computed(()=>h.value.reduce((d,m)=>d&&a.value.has(m.key),!0)),ut=e.computed(()=>a.value.size==0),ft=e.computed(()=>{var d,m,B,j,N;if(o.value.length<0)return"";if(r.value){if(ut.value)return s("No selection");if(!t.searchableUrl&&S.value)return s("All selected");const L=g.value?getComputedStyle(g.value):null,R=((d=g.value)==null?void 0:d.clientWidth)-parseInt(L==null?void 0:L.paddingLeft)-parseInt(L==null?void 0:L.paddingRight);let U=s(":n selected - ",{n:a.value.size}),he=!0;for(let gt of a.value)if(he?he=!1:U+=", ",U+=(B=(m=o.map.get(gt[0]))==null?void 0:m.value)!=null?B:w.value?s("Loading..."):s("Value not found"),R<A(U))return a.value.size+s(" selected");return U}else for(let L of a.value)return(N=(j=o.map.get(L[0]))==null?void 0:j.value)!=null?N:w.value?s("Loading..."):s("Value not found");return s("No selection")}),{list:pt,containerProps:mt,wrapperProps:ht}=ne(h,{itemHeight:32});return(d,m)=>{var B,j;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(r)&&e.unref(a).size==0?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:(j=(B=t.originalNode)==null?void 0:B.name)==null?void 0:j.replace("[]",""),value:""},null,8,Pe)):e.createCommentVNode("",!0),t.showSelected?(e.openBlock(),e.createElementBlock("div",Ae,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),N=>{var L;return e.openBlock(),e.createElementBlock("div",{key:N,onClick:e.withModifiers(R=>p(N[0]),["stop","prevent"]),class:"selection-badge"},[e.createTextVNode(e.toDisplayString((L=e.unref(o).find(R=>R.key==N[0]))==null?void 0:L.value)+" ",1),e.createElementVNode("div",{class:"selection-remove",innerHTML:t.removeIcon},null,8,De)],8,ze)}),128))])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({onFocus:m[0]||(m[0]=N=>O(!0)),onClick:m[1]||(m[1]=e.withModifiers(N=>O(!0),["stop","prevent"])),ref_key:"inputNode",ref:g,value:e.unref(ft),class:"extra-select extra-select-input",readonly:""},d.$attrs,{disabled:l.disabled}),null,16,$e),E.value?(e.openBlock(),e.createBlock(e.Teleport,{key:2,to:E.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(w)>0}]),ref_key:"dropdownNode",ref:x,style:e.normalizeStyle(e.unref(C))},[t.search?(e.openBlock(),e.createElementBlock("div",je,[e.withDirectives(e.createElementVNode("input",{ref_key:"searchNode",ref:F,class:"extra-select-search","onUpdate:modelValue":m[2]||(m[2]=N=>e.isRef(f)?f.value=N:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:e.unref(s)("Search...")},null,8,qe),[[e.vModelText,e.unref(f)]])])):e.createCommentVNode("",!0),e.unref(f).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(r)?(e.openBlock(),e.createElementBlock("div",He,[e.unref(f).length==0?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:e.withModifiers(v,["stop","prevent"]),class:"all-select"},[e.createElementVNode("div",Ue,[e.createElementVNode("input",{checked:e.unref(S),type:"checkbox"},null,8,We),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select all")),1)])],8,Re)):e.createCommentVNode("",!0),e.unref(h).length>0&&e.unref(f).length>0?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:e.withModifiers(b,["stop","prevent"]),class:"all-select"},[e.createElementVNode("div",Ge,[e.createElementVNode("input",{checked:e.unref(V),type:"checkbox"},null,8,Je),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select Filtered")),1)])],8,Qe)):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"clear",onClick:e.withModifiers(H,["stop","prevent"])},e.toDisplayString(e.unref(s)("Clear")),9,Ke)])):e.createCommentVNode("",!0),e.unref(h).length==0?(e.openBlock(),e.createElementBlock("div",Xe,e.toDisplayString(e.unref(s)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",Ye,e.toDisplayString(e.unref(s)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(mt),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(ht))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(pt),N=>(e.openBlock(),e.createElementBlock("button",{key:N.index,class:"dropdown-row",onClick:e.withModifiers(L=>p(N.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",et,[e.unref(r)?(e.openBlock(),e.createElementBlock("input",{key:0,checked:e.unref(a).has(N.data.key),type:"checkbox"},null,8,tt)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(N.data.value),1)])],8,Ze))),128))],16)],16)],6),[[e.vShow,k.value]])],8,["to"])):e.createCommentVNode("",!0),t.originalNode?(e.openBlock(),e.createBlock(e.Teleport,{key:3,to:t.originalNode},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(a),N=>(e.openBlock(),e.createElementBlock("option",{key:N[0],selected:"selected",value:N[0]},null,8,lt))),128))],8,["to"])):e.createCommentVNode("",!0)],64)}}}),ot=["disabled"],at={key:0,class:"no-matches"},rt={key:1},st=["onClick"],it={class:"row-input"},ct=Object.assign({name:"ExtraSuggest",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},url:{type:String,required:!1},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:n}){var A,M,H;const t=l,{options:r}=ae(t.originalNode,e.toRef(t,"options"),e.ref([])),{t:o}=se(t.originalNode,e.toRef(t,"localization")),a=(A=t.originalNode)==null?void 0:A.classList,i=Object.values((H=(M=t.originalNode)==null?void 0:M.style)!=null?H:{});oe(t.originalNode);const s=(v,b=null)=>{b===!1?u.value="":u.value=r.map.get(v).value,w.value=!1},{filterText:u,filteredOptions:c,filterValues:p}=de(r,null,s,t.filterFields,t.hardFilterFields),{searchingFlag:f}=ce(r,t.url,t.searchableUrl,u,t.minChars,p,t.fetchMode,t.fetchOptions),h=e.ref(null),y=e.ref(null),w=e.ref(!1),g=e.ref(null);function x(v){t.disabled||(w.value=v)}e.watch(u,()=>{y.value.querySelector(".scroller").scrollTop=0});const F=function(v){const b=z(v.target);b.push(v.target),!b.includes(h.value)&&!b.includes(y.value)?w.value=!1:(v.stopImmediatePropagation(),v.preventDefault())};e.onMounted(()=>{if(t.dropdownContainer){let S=!1;g.value=z(h.value).find(V=>!!(V instanceof Element&&(V.matches(t.dropdownContainer)&&(S=!0),S&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(V).position))))}if(g.value==null&&(g.value=document.querySelector("body")),t.originalNode){for(let V of a)V!="extrasuggest"&&h.value.classList.add(V);for(let V of i)h.value.style[V]=t.originalNode.style[V];u.value=t.originalNode.value;let S=z(h.value,"form").pop();S instanceof HTMLElement&&S.matches("form")&&S.addEventListener("reset",()=>setTimeout(b)),t.originalNode.addEventListener("change",()=>{O(!0)})}e.watchEffect(()=>{t.modelValue!=null&&(u.value=t.modelValue)});const v=u.value,b=()=>{u.value=v};window.document.addEventListener("mousedown",F),window.document.addEventListener("focusin",F)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",F),window.document.removeEventListener("focusin",F)});const{dropdownStyle:k}=ue(r,e.ref([]),w,h,y,g,t.maxWidth),O=(v=!1)=>{var b;t.originalNode&&(v?u.value=t.originalNode.value:(t.originalNode.value=u.value,(b=t.originalNode)==null||b.dispatchEvent(new Event("change",{bubbles:!0})))),n("update:modelValue",u.value)};e.watch(()=>w.value,v=>{v===!1&&O()});const{list:E,containerProps:_,wrapperProps:C}=ne(c,{itemHeight:32});return(v,b)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({onFocus:b[0]||(b[0]=S=>x(!0)),onClick:b[1]||(b[1]=e.withModifiers(S=>x(!0),["stop","prevent"])),ref_key:"inputNode",ref:h,"onUpdate:modelValue":b[2]||(b[2]=S=>e.isRef(u)?u.value=S:null),class:"extra-select extra-select-input"},v.$attrs,{disabled:l.disabled}),null,16,ot),[[e.vModelDynamic,e.unref(u)]]),g.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:g.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(f)>0}]),ref_key:"dropdownNode",ref:y,style:e.normalizeStyle(e.unref(k))},[e.unref(u).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(c).length==0?(e.openBlock(),e.createElementBlock("div",at,e.toDisplayString(e.unref(o)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",rt,e.toDisplayString(e.unref(o)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(_),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(C))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(E),S=>(e.openBlock(),e.createElementBlock("button",{key:S.index,class:"dropdown-row",onClick:e.withModifiers(V=>s(S.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",it,e.toDisplayString(S.data.value),1)],8,st))),128))],16)],16)],6),[[e.vShow,w.value]])],8,["to"])):e.createCommentVNode("",!0)],64))}}),dt=G,J={init:function(){document.querySelectorAll(".extraselect").forEach(function(l){J.bindNew(l)})},bindNew(l){I.lock(l,"extra-select",()=>{const n={};for(let o in l.dataset)try{n[o]=JSON.parse(l.dataset[o])}catch{n[o]=l.dataset[o]}n.disabled=l.disabled,n.originalNode=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const r=e.createApp(nt,n);r.mount(t),l.addEventListener("remove",function(){r.unmount(),t.remove(),l.remove(),I.remove(l,"extra-select")})})}},K={init:function(){document.querySelectorAll(".extrasuggest").forEach(function(l){K.bindNew(l)})},bindNew(l){I.lock(l,"extra-suggest",()=>{const n={};for(let o in l.dataset)try{n[o]=JSON.parse(l.dataset[o])}catch{n[o]=l.dataset[o]}n.disabled=l.disabled,n.originalNode=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const r=e.createApp(ct,n);r.mount(t),l.addEventListener("remove",function(){r.unmount(),t.remove(),l.remove(),I.remove(l,"extra-suggest")})})}};return document.addEventListener("DOMContentLoaded",function(){J.init(),K.init(),G()}),D.ExtraSelect=J,D.ExtraSuggest=K,D.loadExtraSelectDefaultLocalization=dt,Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),D}({},Vue);
