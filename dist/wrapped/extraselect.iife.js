var Extraselect=function($,e){"use strict";const V=new WeakMap;class C{static put(n,t,o){V.has(n)||V.set(n,new Map),V.get(n).set(t,o)}static get(n,t){return V.get(n).get(t)}static has(n,t){return V.has(n)&&V.get(n).has(t)}static remove(n,t){var o=V.get(n).delete(t);return V.get(n).size!==0&&V.delete(n),o}static lock(n,t,o){if(!C.has(n,t)){C.put(n,t,!0);const a=o();return a!==void 0&&C.put(n,t,a),a}return!1}static async lockAsync(n,t,o){if(!C.has(n,t)){C.put(n,t,!0);const a=await o();return a!==void 0&&C.put(n,t,a),a}return!1}}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).DATASTORE_DEBUG&&(window.__Store=V);function H(l){if(l==null)return{top:0,left:0,width:null,height:null};let n=l.getBoundingClientRect();return{top:n.top+window.scrollY,left:n.left+window.scrollX,width:n.width,height:n.height}}function M(l,n){n===void 0&&(n=window.document);for(var t=[],o=l.parentNode;o!=null&&o instanceof HTMLElement&&!(n instanceof HTMLElement&&o===n)&&!(typeof n=="string"&&o.matches(n));){var a=o;t.push(a),o=a.parentNode}return o!=null&&t.push(o),t}function Ae(l){var n=Array.prototype.slice.call(l.childNodes);n.forEach(function(t){l.removeChild(t)})}var ne;const D=typeof window<"u";D&&((ne=window==null?void 0:window.navigator)==null?void 0:ne.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Fe(l){return typeof l=="function"?l():e.unref(l)}function Me(l){return l}function Pe(l){return e.getCurrentScope()?(e.onScopeDispose(l),!0):!1}function Ie(l,n=!0){e.getCurrentInstance()?e.onMounted(l):n?l():e.nextTick(l)}function W(l){var n;const t=Fe(l);return(n=t==null?void 0:t.$el)!=null?n:t}const ae=D?window:void 0;D&&window.document,D&&window.navigator,D&&window.location;function ze(l,n=!1){const t=e.ref(),o=()=>t.value=Boolean(l());return o(),Ie(o,n),t}const Y=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Z="__vueuse_ssr_handlers__";Y[Z]=Y[Z]||{},Y[Z];var oe=Object.getOwnPropertySymbols,$e=Object.prototype.hasOwnProperty,De=Object.prototype.propertyIsEnumerable,je=(l,n)=>{var t={};for(var o in l)$e.call(l,o)&&n.indexOf(o)<0&&(t[o]=l[o]);if(l!=null&&oe)for(var o of oe(l))n.indexOf(o)<0&&De.call(l,o)&&(t[o]=l[o]);return t};function Re(l,n,t={}){const o=t,{window:a=ae}=o,s=je(o,["window"]);let r;const d=ze(()=>a&&"ResizeObserver"in a),u=()=>{r&&(r.disconnect(),r=void 0)},i=e.watch(()=>W(l),f=>{u(),d.value&&a&&f&&(r=new ResizeObserver(n),r.observe(f,s))},{immediate:!0,flush:"post"}),c=()=>{u(),i()};return Pe(c),{isSupported:d,stop:c}}function qe(l,n={width:0,height:0},t={}){const{window:o=ae,box:a="content-box"}=t,s=e.computed(()=>{var u,i;return(i=(u=W(l))==null?void 0:u.namespaceURI)==null?void 0:i.includes("svg")}),r=e.ref(n.width),d=e.ref(n.height);return Re(l,([u])=>{const i=a==="border-box"?u.borderBoxSize:a==="content-box"?u.contentBoxSize:u.devicePixelContentBoxSize;if(o&&s.value){const c=W(l);if(c){const f=o.getComputedStyle(c);r.value=parseFloat(f.width),d.value=parseFloat(f.height)}}else if(i){const c=Array.isArray(i)?i:[i];r.value=c.reduce((f,{inlineSize:h})=>f+h,0),d.value=c.reduce((f,{blockSize:h})=>f+h,0)}else r.value=u.contentRect.width,d.value=u.contentRect.height},t),e.watch(()=>W(l),u=>{r.value=u?n.width:0,d.value=u?n.height:0}),{width:r,height:d}}var re;(function(l){l.UP="UP",l.RIGHT="RIGHT",l.DOWN="DOWN",l.LEFT="LEFT",l.NONE="NONE"})(re||(re={}));var He=Object.defineProperty,se=Object.getOwnPropertySymbols,We=Object.prototype.hasOwnProperty,Ue=Object.prototype.propertyIsEnumerable,ie=(l,n,t)=>n in l?He(l,n,{enumerable:!0,configurable:!0,writable:!0,value:t}):l[n]=t,Qe=(l,n)=>{for(var t in n||(n={}))We.call(n,t)&&ie(l,t,n[t]);if(se)for(var t of se(n))Ue.call(n,t)&&ie(l,t,n[t]);return l};Qe({linear:Me},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function ce(l,n){const{containerStyle:t,wrapperProps:o,scrollTo:a,calculateRange:s,currentList:r,containerRef:d}="itemHeight"in n?Xe(n,l):Je(n,l);return{list:r,scrollTo:a,containerProps:{ref:d,onScroll:()=>{s()},style:t},wrapperProps:o}}function ue(l){const n=e.ref(null),t=qe(n),o=e.ref([]),a=e.shallowRef(l);return{state:e.ref({start:0,end:10}),source:a,currentList:o,size:t,containerRef:n}}function de(l,n,t){return o=>{if(typeof t=="number")return Math.ceil(o/t);const{start:a=0}=l.value;let s=0,r=0;for(let d=a;d<n.value.length;d++){const u=t(d);if(s+=u,r=d,s>o)break}return r-a}}function fe(l,n){return t=>{if(typeof n=="number")return Math.floor(t/n)+1;let o=0,a=0;for(let s=0;s<l.value.length;s++){const r=n(s);if(o+=r,o>=t){a=s;break}}return a+1}}function pe(l,n,t,o,{containerRef:a,state:s,currentList:r,source:d}){return()=>{const u=a.value;if(u){const i=t(l==="vertical"?u.scrollTop:u.scrollLeft),c=o(l==="vertical"?u.clientHeight:u.clientWidth),f=i-n,h=i+c+n;s.value={start:f<0?0:f,end:h>d.value.length?d.value.length:h},r.value=d.value.slice(s.value.start,s.value.end).map((p,y)=>({data:p,index:y+s.value.start}))}}}function me(l,n){return t=>typeof l=="number"?t*l:n.value.slice(0,t).reduce((a,s,r)=>a+l(r),0)}function he(l,n,t){e.watch([l.width,l.height,n],()=>{t()})}function ge(l,n){return e.computed(()=>typeof l=="number"?n.value.length*l:n.value.reduce((t,o,a)=>t+l(a),0))}const Ge={horizontal:"scrollLeft",vertical:"scrollTop"};function ye(l,n,t,o){return a=>{o.value&&(o.value[Ge[l]]=t(a),n())}}function Je(l,n){const t=ue(n),{state:o,source:a,currentList:s,size:r,containerRef:d}=t,u={overflowX:"auto"},{itemWidth:i,overscan:c=5}=l,f=de(o,a,i),h=fe(a,i),p=pe("horizontal",c,h,f,t),y=me(i,a),v=e.computed(()=>y(o.value.start)),w=ge(i,a);he(r,n,p);const k=ye("horizontal",p,y,d),B=e.computed(()=>({style:{height:"100%",width:`${w.value-v.value}px`,marginLeft:`${v.value}px`,display:"flex"}}));return{scrollTo:k,calculateRange:p,wrapperProps:B,containerStyle:u,currentList:s,containerRef:d}}function Xe(l,n){const t=ue(n),{state:o,source:a,currentList:s,size:r,containerRef:d}=t,u={overflowY:"auto"},{itemHeight:i,overscan:c=5}=l,f=de(o,a,i),h=fe(a,i),p=pe("vertical",c,h,f,t),y=me(i,a),v=e.computed(()=>y(o.value.start)),w=ge(i,a);he(r,n,p);const k=ye("vertical",p,y,d),B=e.computed(()=>({style:{width:"100%",height:`${w.value-v.value}px`,marginTop:`${v.value}px`}}));return{calculateRange:p,scrollTo:k,containerStyle:u,wrapperProps:B,currentList:s,containerRef:d}}const A=l=>{let n=parseInt(l);return n==l?n:l},Ye=l=>{try{var n=JSON.parse(l);if(n&&typeof n=="object")return n}catch{}return l},Ze=(l,n,t)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const o={defaultArray:l.value,get:()=>l.value,push:(a,s,r=null)=>{parseInt(a)==a&&(a=parseInt(a));const d=l.map.get(a);if(d)d.value=s,d.data=r;else{let u={value:s,key:a,data:r};l.value.push(u),l.map.set(u.key,u)}},addRange:a=>{for(let s of a)l.actions.push(s.key,s.value,s.data)},remove:a=>{l.value.splice(l.value.findIndex(s=>s.key==a),1)},clear:()=>{l.value=[],l.rebuildMap()},sort:(a=null)=>{a==null&&(a=(s,r)=>s.value.localeCompare(r.value)),l.value=l.value.sort(a)},setDefault:function(a){this.defaultArray=a},restoreDefault:function(){l.value=this.defaultArray},filter:function(a){},selection:{get(){return n.value},clear(){n.value.clear()},add(a){n.value.set(a,a)},remove(a){n.value.delete(a)}}};window.ExtraSelectOptions[t]=o,l.actions=o};let Ke=1;const we=l=>{l&&(l.style.display="none",Ae(l))},ve=(l,n,t,o,a=null)=>{const s=e.ref(new Map);e.watchEffect(()=>{if(Array.isArray(t.value)){s.value.clear();for(let i of t.value)s.value.set(i,i)}});const r=e.ref([]);if(r.map=new Map,r.rebuildMap=()=>{if(r.map.clear(),r.value)for(let i of r.value)r.map.set(i.key,i)},e.watchEffect(()=>{n.value&&(r.value=n.value.map(i=>({...i,key:A(i.key)})),r.rebuildMap())}),l){if(s.value.clear(),l.matches("select")){for(let i of Array.apply(null,l.selectedOptions).map(c=>A(c.value)).filter(c=>c!=null))s.value.set(i,i);r.value=Array.apply(null,l.options).reduce((i,c)=>(i.push({value:c.text,key:A(c.value),data:Object.keys(c.dataset).reduce((f,h)=>(f[h]=Ye(c.dataset[h]),f),{})}),i),[])}if(l.matches("input")){let i=l.value;i!=null&&i.length>0&&(r.value=[{value:i,key:i}])}r.rebuildMap()}if(Array.isArray(o))for(let i of o)s.value.set(A(i),A(i));else o!=null&&s.value.set(A(o),A(o));(a==null||a===""||a==0)&&(a="extraselect_"+(++Ke).toString()),Ze(r,s,a);const d=[];return s.value.forEach((i,c)=>{d.push([c,i])}),{options:r,selectedOptions:s,onReset:()=>{s.value.clear();for(let[i,c]of d)s.value.set(i,c)}}};e.ref({});function et(l,n={}){for(let t in n)l=l.replace(`:${t}`,n[t]);return l}const K=(l=null)=>{var o,a;window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={});let t={...(a=(o=window.ExtraSelectLocalization.defaults)==null?void 0:o.defaultArray)!=null?a:{}};Object.assign(t,l!=null?l:{}),ke(e.ref(t),"defaults")},ke=(l,n)=>{window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={},K());const t={defaultArray:l.value,list:()=>l.value,get:o=>{var a;return(a=l.value[o])!=null?a:null},push:(o,a)=>{l.value[o]=a}};window.ExtraSelectLocalization[n]=t,l.actions=t};let tt=0;const Ee=(l,n)=>{var o;return ke(n,(o=l==null?void 0:l.id)!=null?o:"extraselect_"+(++tt).toString()),{propLocalization:n,t:(a,s={})=>{var d;let r=(d=n.value[a])!=null?d:window.ExtraSelectLocalization.defaults.get(a);return r==null&&(window.ExtraSelectLocalization.defaults.push(a,a),r=a),et(r,s)}}},be=async function(l,n=null,t={}){var s;const o={method:"POST",credentials:"include",...t,headers:{"Content-Type":"application/json",...(s=t.headers)!=null?s:{}},body:JSON.stringify({search:n,...t.body})};return await(await fetch(l,o)).json()},Se=(l,n,t,o,a,s,r="limited",d={})=>{const u=e.ref(0),i=e.ref(!1),c=e.computed(()=>i.value||u.value>0);if(n!=null&&n.length>0)if(t){const f={};e.watchEffect(h=>{const p=JSON.stringify(s.value);if(p==null&&(p="default"),f[p]==null&&(f[p]=[]),o.value.length>=a){let y=!0;switch(r){case"always":break;default:case"limited":y=!f[p].includes(o.value);break;case"complete":y=f[p].reduce((v,w)=>v&&!o.value.startsWith(w),!0);break}if(y){i.value=!0;const v=setTimeout(()=>{f[p].push(o.value),u.value+=1,d.body={...d.body,...s.value},be(n,o.value,d).then(w=>{l.actions.addRange(w),l.actions.sort(),u.value-=1,i.value=!1})},500);h(()=>{clearTimeout(v)})}}})}else be(n,null,d).then(f=>{l.actions.addRange(f),l.actions.sort()});return{searchingFlag:c}},Ne=(l,n,t,o=[],a=[])=>{const s=e.ref(""),r=e.ref([]),d=e.ref({}),u={...o.reduce((c,f)=>(c[f]=!1,c),{}),...a.reduce((c,f)=>(c[f]=!0,c),{})};for(let c in u){let f=u[c],h=document.getElementById(c);d.value[c]=h==null?void 0:h.value,h&&h.addEventListener("change",p=>{d.value[c]=p.target.value,f&&e.nextTick(()=>{if(n!=null)for(let y of Array.from(n.value.keys()))r.value.find(v=>v.key==y)||t(y,!1);else r.value.find(y=>y.key==s.value)||t(s.value,!1)})})}const i=function(c,f){let h=c.value;return Object.keys(d.value).length>0&&(h=h.filter(p=>{var y,v;for(let w in d.value)if((u[w]?!0:((y=d.value[w])!=null?y:"").length>0)&&((v=p.data)==null?void 0:v.hasOwnProperty(w))){if(Array.isArray(p.data[w])){if(!p.data[w].includes(d.value[w]))return!1}else if(p.data[w]!=d.value[w])return!1}return!0})),f.length>0&&(h=h.filter(p=>p.value.toLowerCase().includes(f.toLowerCase()))),h};return e.watchEffect(()=>{r.value=i(l,s.value)}),{filterText:s,filteredOptions:r,filterValues:d}},_e=(l,n,t,o,a,s,r)=>{const d=getComputedStyle(document.querySelector("body")).font,u=function(f){const p=document.createElement("canvas").getContext("2d");return p.font=d,p.measureText(f).width},i=e.computed(()=>{var h,p;const f=(h=H(o.value).width)!=null?h:100;if(r==="inherit")return f;if(r==null||r==="dynamic"){const y=(p=parseInt(getComputedStyle(document.querySelector("html"))["font-size"]))!=null?p:16;return Math.max(f,Math.max(...l.value.map(v=>u(v.value)))+20+y*3)}return r}),c=e.ref({position:"absolute","min-width":"max-content"});return e.watchPostEffect(()=>{t.value<0&&console.log("is open"),n.value.size<0&&console.log("empty selection");var f=H(o.value),h=H(null);if(s.value&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(s.value).position))var h=H(s.value);let p=-h.left+f.left;const y=window.document.documentElement.clientWidth;p+i.value>y&&(p=y-i.value),c.value={position:"absolute","min-width":"max-content",width:i.value.toString()+"px",top:(-h.top+f.top+f.height).toString()+"px",left:p.toString()+"px"}}),{dropdownStyle:c,getTextWidth:u}},lt=["name"],nt={key:1,class:"extra-select selection"},at=["onClick"],ot=["innerHTML"],rt=["value","disabled"],st={key:0,class:"input-searching"},it=["placeholder"],ct={key:0,class:"allselect-clear"},ut={class:"row-input"},dt=["checked"],ft={class:"row-input"},pt=["checked"],mt={key:1,class:"no-matches"},ht={key:2},gt=["onClick"],yt={class:"row-input"},wt=["checked"],vt=["value"],kt=Object.assign({name:"ExtraSelect",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:Array,required:!1,default:[]},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!1},searchableUrl:{type:Boolean,default:!1},initialValue:{default:null},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:n}){var Oe,xe,Ce,Be,Ve,Le;const t=l,o=e.computed(()=>{var m,g;return(g=(m=t.originalNode)==null?void 0:m.multiple)!=null?g:t.multiple});let a=e.useAttrs();const{options:s,selectedOptions:r,onReset:d}=ve(t.originalNode,e.toRef(t,"options"),e.toRef(t,"modelValue"),t.initialValue,(Ce=(xe=(Oe=t.originalNode)==null?void 0:Oe.id)!=null?xe:a.id)!=null?Ce:null),{t:u}=Ee(t.originalNode,e.toRef(t,"localization")),i=(Be=t.originalNode)==null?void 0:Be.classList,c=Object.values((Le=(Ve=t.originalNode)==null?void 0:Ve.style)!=null?Le:{});we(t.originalNode);const f=n,h=(m,g=null)=>{if(o.value){let _=g;switch(_==null&&(_=!r.value.has(m)),_){case!0:r.value.set(m,m);break;case!1:r.value.delete(m);break}}else r.value.clear(),g!==!1&&r.value.set(m,m),L.value=!1;I(Array.from(r.value.keys()))},{filterText:p,filteredOptions:y,filterValues:v}=Ne(s,r,h,t.filterFields,t.hardFilterFields),{searchingFlag:w}=Se(s,t.url,t.searchableUrl,p,t.minChars,v,t.fetchMode,t.fetchOptions),k=e.ref(null),B=e.ref(null),F=e.ref(null),L=e.ref(!1);function j(m){t.disabled||(L.value=m)}e.watch(p,()=>{B.value.querySelector(".scroller").scrollTop=0});const T=e.ref(null),P=function(m){const g=M(m.target);g.push(m.target),!g.includes(k.value)&&!g.includes(B.value)?L.value=!1:(m.stopImmediatePropagation(),m.preventDefault())};e.onMounted(()=>{if(t.dropdownContainer){let m=!1;T.value=M(k.value).find(g=>!!(g instanceof Element&&(g.matches(t.dropdownContainer)&&(m=!0),m&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(g).position))))}if(T.value==null&&(T.value=document.querySelector("body")),t.originalNode){for(let g of i)g!="extraselect"&&k.value.classList.add(g);for(let g of c)k.value.style[g]=t.originalNode.style[g];let m=M(k.value,"form").pop();m instanceof HTMLElement&&m.matches("form")&&m.addEventListener("reset",()=>setTimeout(d)),t.originalNode.toggleValue=h,t.originalNode.setValues=g=>{r.value.clear();for(let _ of g)h(_)}}window.document.addEventListener("mousedown",P),window.document.addEventListener("focusin",P)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",P),window.document.removeEventListener("focusin",P)});const{dropdownStyle:le,getTextWidth:U}=_e(s,r,L,k,B,T,t.maxWidth),I=m=>{e.nextTick(()=>{var g;return(g=t.originalNode)==null?void 0:g.dispatchEvent(new Event("change",{bubbles:!0}))}),f("update:modelValue",m)},Q=m=>{R(m,!1),p.value=""},R=(m,g=null)=>{g==null&&(g=!z.value),g?(r.value.clear(),s.value.forEach(_=>r.value.set(_.key,_.key))):r.value.clear(),I(Array.from(r.value.keys()))},G=()=>{S.value?y.value.forEach(m=>{r.value.has(m.key)&&r.value.delete(m.key)}):y.value.forEach(m=>{r.value.has(m.key)||r.value.set(m.key,m.key)}),I(Array.from(r.value.keys()))};e.watch(L,(m,g)=>{m!=g&&(m?t.search&&e.nextTick(()=>{F.value.focus({focusVisible:!0})}):p.value="")});const z=e.computed(()=>r.value.size==s.value.length),S=e.computed(()=>y.value.reduce((m,g)=>m&&r.value.has(g.key),!0)),E=e.computed(()=>r.value.size==0),N=e.computed(()=>{var m,g,_,q,b;if(s.value.length<0)return"";if(o.value){if(E.value)return u("No selection");if(!t.searchableUrl&&z.value)return u("All selected");const x=k.value?getComputedStyle(k.value):null,J=((m=k.value)==null?void 0:m.clientWidth)-parseInt(x==null?void 0:x.paddingLeft)-parseInt(x==null?void 0:x.paddingRight);let X=u(":n selected - ",{n:r.value.size}),Te=!0;for(let Vt of r.value)if(Te?Te=!1:X+=", ",X+=(_=(g=s.map.get(Vt[0]))==null?void 0:g.value)!=null?_:w.value?u("Loading..."):u("Value not found"),J<U(X))return r.value.size+u(" selected");return X}else for(let x of r.value)return(b=(q=s.map.get(x[0]))==null?void 0:q.value)!=null?b:w.value?u("Loading..."):u("Value not found");return u("No selection")}),{list:O,containerProps:Ct,wrapperProps:Bt}=ce(y,{itemHeight:32});return(m,g)=>{var _,q;return e.openBlock(),e.createElementBlock(e.Fragment,null,[o.value&&e.unref(r).size==0?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:(q=(_=t.originalNode)==null?void 0:_.name)==null?void 0:q.replace("[]",""),value:""},null,8,lt)):e.createCommentVNode("",!0),t.showSelected?(e.openBlock(),e.createElementBlock("div",nt,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),b=>{var x;return e.openBlock(),e.createElementBlock("div",{key:b,onClick:e.withModifiers(J=>h(b[0]),["stop","prevent"]),class:"selection-badge"},[e.createTextVNode(e.toDisplayString((x=e.unref(s).find(J=>J.key==b[0]))==null?void 0:x.value)+" ",1),e.createElementVNode("div",{class:"selection-remove",innerHTML:t.removeIcon},null,8,ot)],8,at)}),128))])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({onFocus:g[0]||(g[0]=b=>j(!0)),onClick:g[1]||(g[1]=e.withModifiers(b=>j(!0),["stop","prevent"])),ref_key:"inputNode",ref:k,value:N.value,class:"extra-select extra-select-input",readonly:""},m.$attrs,{disabled:l.disabled}),null,16,rt),T.value?(e.openBlock(),e.createBlock(e.Teleport,{key:2,to:T.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(w)>0}]),ref_key:"dropdownNode",ref:B,style:e.normalizeStyle(e.unref(le))},[t.search?(e.openBlock(),e.createElementBlock("div",st,[e.withDirectives(e.createElementVNode("input",{ref_key:"searchNode",ref:F,class:"extra-select-search","onUpdate:modelValue":g[2]||(g[2]=b=>e.isRef(p)?p.value=b:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:e.unref(u)("Search...")},null,8,it),[[e.vModelText,e.unref(p)]])])):e.createCommentVNode("",!0),e.unref(p).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o.value?(e.openBlock(),e.createElementBlock("div",ct,[e.unref(p).length==0?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:e.withModifiers(R,["stop","prevent"]),class:"all-select"},[e.createElementVNode("div",ut,[e.createElementVNode("input",{checked:z.value,type:"checkbox"},null,8,dt),e.createElementVNode("b",null,e.toDisplayString(e.unref(u)("Select all")),1)])])):e.createCommentVNode("",!0),e.unref(y).length>0&&e.unref(p).length>0?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:e.withModifiers(G,["stop","prevent"]),class:"all-select"},[e.createElementVNode("div",ft,[e.createElementVNode("input",{checked:S.value,type:"checkbox"},null,8,pt),e.createElementVNode("b",null,e.toDisplayString(e.unref(u)("Select Filtered")),1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"clear",onClick:e.withModifiers(Q,["stop","prevent"])},e.toDisplayString(e.unref(u)("Clear")),1)])):e.createCommentVNode("",!0),e.unref(y).length==0?(e.openBlock(),e.createElementBlock("div",mt,e.toDisplayString(e.unref(u)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",ht,e.toDisplayString(e.unref(u)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(Ct),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(Bt))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(O),b=>(e.openBlock(),e.createElementBlock("button",{key:b.index,class:"dropdown-row",onClick:e.withModifiers(x=>h(b.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",yt,[o.value?(e.openBlock(),e.createElementBlock("input",{key:0,checked:e.unref(r).has(b.data.key),type:"checkbox"},null,8,wt)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(b.data.value),1)])],8,gt))),128))],16)],16)],6),[[e.vShow,L.value]])],8,["to"])):e.createCommentVNode("",!0),t.originalNode?(e.openBlock(),e.createBlock(e.Teleport,{key:3,to:t.originalNode},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),b=>(e.openBlock(),e.createElementBlock("option",{key:b[0],selected:"selected",value:b[0]},null,8,vt))),128))],8,["to"])):e.createCommentVNode("",!0)],64)}}}),Et=["disabled"],bt={key:0,class:"no-matches"},St={key:1},Nt=["onClick"],_t={class:"row-input"},Ot=Object.assign({name:"ExtraSuggest",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},url:{type:String,required:!1},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:n}){var U,I,Q,R,G,z;const t=l;let o=e.useAttrs();const{options:a}=ve(t.originalNode,e.toRef(t,"options"),e.ref([]),null,(Q=(I=(U=t.originalNode)==null?void 0:U.id)!=null?I:o.id)!=null?Q:null),{t:s}=Ee(t.originalNode,e.toRef(t,"localization")),r=(R=t.originalNode)==null?void 0:R.classList,d=Object.values((z=(G=t.originalNode)==null?void 0:G.style)!=null?z:{});we(t.originalNode);const u=n,i=(S,E=null)=>{E===!1?c.value="":c.value=a.map.get(S).value,w.value=!1},{filterText:c,filteredOptions:f,filterValues:h}=Ne(a,null,i,t.filterFields,t.hardFilterFields),{searchingFlag:p}=Se(a,t.url,t.searchableUrl,c,t.minChars,h,t.fetchMode,t.fetchOptions),y=e.ref(null),v=e.ref(null),w=e.ref(!1),k=e.ref(null);function B(S){t.disabled||(w.value=S)}e.watch(c,()=>{v.value.querySelector(".scroller").scrollTop=0});const F=function(S){const E=M(S.target);E.push(S.target),!E.includes(y.value)&&!E.includes(v.value)&&(w.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let N=!1;k.value=M(y.value).find(O=>!!(O instanceof Element&&(O.matches(t.dropdownContainer)&&(N=!0),N&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(O).position))))}if(k.value==null&&(k.value=document.querySelector("body")),t.originalNode){for(let O of r)O!="extrasuggest"&&y.value.classList.add(O);for(let O of d)y.value.style[O]=t.originalNode.style[O];c.value=t.originalNode.value;let N=M(y.value,"form").pop();N instanceof HTMLElement&&N.matches("form")&&N.addEventListener("reset",()=>setTimeout(E)),t.originalNode.addEventListener("change",()=>{j(!0)})}e.watchEffect(()=>{t.modelValue!=null&&(c.value=t.modelValue)});const S=c.value,E=()=>{c.value=S};window.document.addEventListener("mousedown",F),window.document.addEventListener("focusin",F)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",F),window.document.removeEventListener("focusin",F)});const{dropdownStyle:L}=_e(a,e.ref([]),w,y,v,k,t.maxWidth),j=(S=!1)=>{var E;t.originalNode&&(S?c.value=t.originalNode.value:(t.originalNode.value=c.value,(E=t.originalNode)==null||E.dispatchEvent(new Event("change",{bubbles:!0})))),u("update:modelValue",c.value)};e.watch(()=>w.value,S=>{S===!1&&j()});const{list:T,containerProps:P,wrapperProps:le}=ce(f,{itemHeight:32});return(S,E)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({onFocus:E[0]||(E[0]=N=>B(!0)),onClick:E[1]||(E[1]=N=>B(!0)),ref_key:"inputNode",ref:y,"onUpdate:modelValue":E[2]||(E[2]=N=>e.isRef(c)?c.value=N:null),class:"extra-select extra-select-input"},S.$attrs,{disabled:l.disabled}),null,16,Et),[[e.vModelDynamic,e.unref(c)]]),k.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:k.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(p)>0}]),ref_key:"dropdownNode",ref:v,style:e.normalizeStyle(e.unref(L))},[e.unref(c).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(f).length==0?(e.openBlock(),e.createElementBlock("div",bt,e.toDisplayString(e.unref(s)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",St,e.toDisplayString(e.unref(s)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(P),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(le))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(T),N=>(e.openBlock(),e.createElementBlock("button",{key:N.index,class:"dropdown-row",onClick:e.withModifiers(O=>i(N.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",_t,e.toDisplayString(N.data.value),1)],8,Nt))),128))],16)],16)],6),[[e.vShow,w.value]])],8,["to"])):e.createCommentVNode("",!0)],64))}}),xt=K,ee={init:function(){document.querySelectorAll(".extraselect").forEach(function(l){ee.bindNew(l)})},bindNew(l){C.lock(l,"extra-select",()=>{const n={};for(let a in l.dataset)try{n[a]=JSON.parse(l.dataset[a])}catch{n[a]=l.dataset[a]}n.disabled=l.disabled,n.originalNode=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const o=e.createApp(kt,n);o.mount(t),l.addEventListener("remove",function(){o.unmount(),t.remove(),l.remove(),C.remove(l,"extra-select")})})}},te={init:function(){document.querySelectorAll(".extrasuggest").forEach(function(l){te.bindNew(l)})},bindNew(l){C.lock(l,"extra-suggest",()=>{const n={};for(let a in l.dataset)try{n[a]=JSON.parse(l.dataset[a])}catch{n[a]=l.dataset[a]}n.disabled=l.disabled,n.originalNode=l;const t=document.createElement("div");l.parentNode.insertBefore(t,l.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const o=e.createApp(Ot,n);o.mount(t),l.addEventListener("remove",function(){o.unmount(),t.remove(),l.remove(),C.remove(l,"extra-suggest")})})}};return document.addEventListener("DOMContentLoaded",function(){ee.init(),te.init(),K()}),$.ExtraSelect=ee,$.ExtraSuggest=te,$.loadExtraSelectDefaultLocalization=xt,Object.defineProperties($,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),$}({},Vue);
