var Extraselect=function(D,e){"use strict";const T=new WeakMap;class A{static put(l,t,r){T.has(l)||T.set(l,new Map),T.get(l).set(t,r)}static get(l,t){return T.get(l).get(t)}static has(l,t){return T.has(l)&&T.get(l).has(t)}static remove(l,t){var r=T.get(l).delete(t);return T.get(l).size!==0&&T.delete(l),r}static lock(l,t,r){return A.has(l,t)?!1:(A.put(l,t,!0),r())}}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).DATASTORE_DEBUG&&(window.__Store=T);function q(n){if(n==null)return{top:0,left:0,width:null,height:null};let l=n.getBoundingClientRect();return{top:l.top+window.scrollY,left:l.left+window.scrollX,width:l.width,height:l.height}}function P(n,l){l===void 0&&(l=window.document);for(var t=[],r=n.parentNode;r!=null&&r instanceof HTMLElement&&!(l instanceof HTMLElement&&r===l)&&!(typeof l=="string"&&r.matches(l));){var a=r;t.push(a),r=a.parentNode}return r!=null&&t.push(r),t}function he(n){var l=Array.prototype.slice.call(n.childNodes);l.forEach(function(t){n.removeChild(t)})}var K;const $=typeof window<"u";$&&((K=window==null?void 0:window.navigator)==null?void 0:K.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function ge(n){return typeof n=="function"?n():e.unref(n)}function ye(n){return n}function we(n){return e.getCurrentScope()?(e.onScopeDispose(n),!0):!1}function ke(n,l=!0){e.getCurrentInstance()?e.onMounted(n):l?n():e.nextTick(n)}function X(n){var l;const t=ge(n);return(l=t==null?void 0:t.$el)!=null?l:t}const Ee=$?window:void 0;$&&window.document,$&&window.navigator,$&&window.location;function ve(n,l=!1){const t=e.ref(),r=()=>t.value=Boolean(n());return r(),ke(r,l),t}const U=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},W="__vueuse_ssr_handlers__";U[W]=U[W]||{},U[W];var Y=Object.getOwnPropertySymbols,be=Object.prototype.hasOwnProperty,Se=Object.prototype.propertyIsEnumerable,_e=(n,l)=>{var t={};for(var r in n)be.call(n,r)&&l.indexOf(r)<0&&(t[r]=n[r]);if(n!=null&&Y)for(var r of Y(n))l.indexOf(r)<0&&Se.call(n,r)&&(t[r]=n[r]);return t};function Ne(n,l,t={}){const r=t,{window:a=Ee}=r,o=_e(r,["window"]);let i;const s=ve(()=>a&&"ResizeObserver"in a),d=()=>{i&&(i.disconnect(),i=void 0)},c=e.watch(()=>X(n),f=>{d(),s.value&&a&&f&&(i=new ResizeObserver(l),i.observe(f,o))},{immediate:!0,flush:"post"}),u=()=>{d(),c()};return we(u),{isSupported:s,stop:u}}function xe(n,l={width:0,height:0},t={}){const{box:r="content-box"}=t,a=e.ref(l.width),o=e.ref(l.height);return Ne(n,([i])=>{const s=r==="border-box"?i.borderBoxSize:r==="content-box"?i.contentBoxSize:i.devicePixelContentBoxSize;s?(a.value=s.reduce((d,{inlineSize:c})=>d+c,0),o.value=s.reduce((d,{blockSize:c})=>d+c,0)):(a.value=i.contentRect.width,o.value=i.contentRect.height)},t),e.watch(()=>X(n),i=>{a.value=i?l.width:0,o.value=i?l.height:0}),{width:a,height:o}}var Z;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(Z||(Z={}));var Oe=Object.defineProperty,ee=Object.getOwnPropertySymbols,Ce=Object.prototype.hasOwnProperty,Be=Object.prototype.propertyIsEnumerable,te=(n,l,t)=>l in n?Oe(n,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[l]=t,Ve=(n,l)=>{for(var t in l||(l={}))Ce.call(l,t)&&te(n,t,l[t]);if(ee)for(var t of ee(l))Be.call(l,t)&&te(n,t,l[t]);return n};Ve({linear:ye},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function ne(n,l){const t=e.ref(),r=xe(t),a=e.ref([]),o=e.shallowRef(n),i=e.ref({start:0,end:10}),{itemHeight:s,overscan:d=5}=l,c=k=>{if(typeof s=="number")return Math.ceil(k/s);const{start:E=0}=i.value;let v=0,x=0;for(let O=E;O<o.value.length;O++)if(v+=s(O),v>=k){x=O;break}return x-E},u=k=>{if(typeof s=="number")return Math.floor(k/s)+1;let E=0,v=0;for(let x=0;x<o.value.length;x++)if(E+=s(x),E>=k){v=x;break}return v+1},f=()=>{const k=t.value;if(k){const E=u(k.scrollTop),v=c(k.clientHeight),x=E-d,O=E+v+d;i.value={start:x<0?0:x,end:O>o.value.length?o.value.length:O},a.value=o.value.slice(i.value.start,i.value.end).map((F,z)=>({data:F,index:z+i.value.start}))}};e.watch([r.width,r.height,n],()=>{f()});const h=e.computed(()=>typeof s=="number"?o.value.length*s:o.value.reduce((k,E,v)=>k+s(v),0)),w=k=>typeof s=="number"?k*s:o.value.slice(0,k).reduce((v,x,O)=>v+s(O),0),y=k=>{t.value&&(t.value.scrollTop=w(k),f())},g=e.computed(()=>w(i.value.start)),N=e.computed(()=>({style:{width:"100%",height:`${h.value-g.value}px`,marginTop:`${g.value}px`}}));return{list:a,scrollTo:y,containerProps:{ref:t,onScroll:()=>{f()},style:{overflowY:"auto"}},wrapperProps:N}}const I=n=>{let l=parseInt(n);return l==n?l:n},Le=(n,l,t)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const r={defaultArray:n.value,get:()=>n.value,push:(a,o,i=null)=>{parseInt(a)==a&&(a=parseInt(a));const s=n.map.get(a);if(s)s.value=o,s.data=i;else{let d={value:o,key:a,data:i};n.value.push(d),n.map.set(d.key,d)}},addRange:a=>{for(let o of a)n.actions.push(o.key,o.value,o.data)},remove:a=>{n.value.splice(n.value.findIndex(o=>o.key==a),1)},clear:()=>{n.value=[]},sort:(a=null)=>{a==null&&(a=(o,i)=>o.value.localeCompare(i.value)),n.value=n.value.sort(a)},setDefault:function(a){this.defaultArray=a},restoreDefault:function(){n.value=this.defaultArray},filter:function(a){},selection:{get(){return l.value},clear(){l.value.clear()},add(a){l.value.set(a,a)},remove(a){l.value.delete(a)}}};window.ExtraSelectOptions[t]=r,n.actions=r};let Te=1;const le=n=>{n&&(n.style.display="none",he(n))},ae=(n,l,t,r)=>{var d;const a=e.ref(new Map);e.watchEffect(()=>{if(Array.isArray(t.value)){a.value.clear();for(let c of t.value)a.value.set(c,c)}});const o=e.ref([]);if(o.map=new Map,o.rebuildMap=()=>{if(o.map.clear(),o.value)for(let c of o.value)o.map.set(c.key,c)},e.watchEffect(()=>{l.value&&(o.value=l.value.map(c=>({...c,key:I(c.key)})),o.rebuildMap())}),n){if(a.value.clear(),n.matches("select")){for(let c of Array.apply(null,n.selectedOptions).map(u=>I(u.value)).filter(u=>u!=null))a.value.set(c,c);o.value=Array.apply(null,n.options).reduce((c,u)=>(c.push({value:u.text,key:I(u.value),data:Object.assign({},u.dataset)}),c),[])}if(n.matches("input")){let c=n.value;c!=null&&c.length>0&&(o.value=[{value:c,key:c}])}o.rebuildMap()}if(Array.isArray(r))for(let c of r)a.value.set(I(c),I(c));else r!=null&&a.value.set(I(r),I(r));Le(o,a,(d=n==null?void 0:n.id)!=null?d:"extraselect_"+(++Te).toString());const i=[];return a.value.forEach((c,u)=>{i.push([u,c])}),{options:o,selectedOptions:a,onReset:()=>{a.value.clear();for(let[c,u]of i)a.value.set(c,u)}}};e.ref({});function Fe(n,l={}){for(let t in l)n=n.replace(`:${t}`,l[t]);return n}const Q=(n=null)=>{var r,a;window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={});let t={...(a=(r=window.ExtraSelectLocalization.defaults)==null?void 0:r.defaultArray)!=null?a:{}};Object.assign(t,n!=null?n:{}),oe(e.ref(t),"defaults")},oe=(n,l)=>{window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={},Q());const t={defaultArray:n.value,list:()=>n.value,get:r=>{var a;return(a=n.value[r])!=null?a:null},push:(r,a)=>{n.value[r]=a}};window.ExtraSelectLocalization[l]=t,n.actions=t};let Ae=0;const re=(n,l)=>{var r;return oe(l,(r=n==null?void 0:n.id)!=null?r:"extraselect_"+(++Ae).toString()),{propLocalization:l,t:(a,o={})=>{var s;let i=(s=l.value[a])!=null?s:window.ExtraSelectLocalization.defaults.get(a);return i==null&&(window.ExtraSelectLocalization.defaults.push(a,a),i=a),Fe(i,o)}}},se=async function(n,l=null,t={}){var o;const r={method:"POST",credentials:"include",...t,headers:{"Content-Type":"application/json",...(o=t.headers)!=null?o:{}},body:JSON.stringify({search:l,...t.body})};return await(await fetch(n,r)).json()},ie=(n,l,t,r,a,o,i="limited",s={})=>{const d=e.ref(0),c=e.ref(!1),u=e.computed(()=>c.value||d.value>0);if(l!=null&&l.length>0)if(t){const f=[];e.watchEffect(h=>{if(r.value.length>=a){let w=!0;switch(i){case"always":break;default:case"limited":w=!f.includes(r.value);break;case"complete":w=f.reduce((y,g)=>y&&!r.value.startsWith(g),!0);break}if(w){c.value=!0;const y=setTimeout(()=>{f.push(r.value),d.value+=1,s.body={...s.body,...o.value},se(l,r.value,s).then(g=>{n.actions.addRange(g),n.actions.sort(),d.value-=1,c.value=!1})},500);h(()=>{clearTimeout(y)})}}})}else se(l,null,s).then(f=>{n.actions.addRange(f),n.actions.sort()});return{searchingFlag:u}},ce=(n,l,t,r=[],a=[])=>{const o=e.ref(""),i=e.ref([]),s=e.ref({}),d={...r.reduce((u,f)=>(u[f]=!1,u),{}),...a.reduce((u,f)=>(u[f]=!0,u),{})};for(let u in d){let f=d[u],h=document.getElementById(u);s.value[u]=h==null?void 0:h.value,h&&h.addEventListener("change",w=>{s.value[u]=w.target.value,f&&e.nextTick(()=>{if(l!=null)for(let y of Array.from(l.value.keys()))i.value.find(g=>g.key==y)||t(y,!1);else i.value.find(y=>y.key==o.value)||t(o.value,!1)})})}const c=function(u,f){let h=u.value;return Object.keys(s.value).length>0&&(h=h.filter(w=>{var y,g;for(let N in s.value)if((d[N]?!0:((y=s.value[N])!=null?y:"").length>0)&&((g=w.data)==null?void 0:g.hasOwnProperty(N))&&w.data[N]!=s.value[N])return!1;return!0})),f.length>0&&(h=h.filter(w=>w.value.toLowerCase().includes(f.toLowerCase()))),h};return e.watchEffect(()=>{i.value=c(n,o.value)}),{filterText:o,filteredOptions:i,filterValues:s}},de=(n,l,t,r,a,o,i)=>{const s=getComputedStyle(document.querySelector("body")).font,d=function(f){const w=document.createElement("canvas").getContext("2d");return w.font=s,w.measureText(f).width},c=e.computed(()=>{var h,w;const f=(h=q(r.value).width)!=null?h:100;if(i==="inherit")return f;if(i==null||i==="dynamic"){const y=(w=parseInt(getComputedStyle(document.querySelector("html"))["font-size"]))!=null?w:16;return Math.max(f,Math.max(...n.value.map(g=>d(g.value)))+20+y*3)}return i}),u=e.ref({position:"absolute","min-width":"max-content"});return e.watchPostEffect(()=>{t.value<0&&console.log("is open"),l.value.size<0&&console.log("empty selection");var f=q(r.value),h=q(null);if(o.value&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(o.value).position))var h=q(o.value);let w=-h.left+f.left;const y=window.document.documentElement.clientWidth;w+c.value>y&&(w=y-c.value),u.value={position:"absolute","min-width":"max-content",width:c.value.toString()+"px",top:(-h.top+f.top+f.height).toString()+"px",left:w.toString()+"px"}}),{dropdownStyle:u,getTextWidth:d}},Ie=["name"],Pe={key:1,class:"extra-select selection"},Me=["onClick"],ze=["innerHTML"],De=["value"],$e={key:0,class:"input-searching"},je=["placeholder"],qe={key:0,class:"allselect-clear"},He={class:"row-input"},Re=["checked"],Ue={class:"row-input"},We=["checked"],Qe={key:1,class:"no-matches"},Ge={key:2},Je=["onClick"],Ke={class:"row-input"},Xe=["checked"],Ye=["value"],Ze=Object.assign({name:"ExtraSelect",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:Array,required:!1,default:[]},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!1},searchableUrl:{type:Boolean,default:!1},initialValue:{default:null},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null}},emits:["update:modelValue"],setup(n,{emit:l}){var ue,fe,pe;const t=n,r=e.computed(()=>{var m,p;return(p=(m=t.originalNode)==null?void 0:m.multiple)!=null?p:t.multiple}),{options:a,selectedOptions:o,onReset:i}=ae(t.originalNode,e.toRef(t,"options"),e.toRef(t,"modelValue"),t.initialValue),{t:s}=re(t.originalNode,e.toRef(t,"localization")),d=(ue=t.originalNode)==null?void 0:ue.classList,c=Object.values((pe=(fe=t.originalNode)==null?void 0:fe.style)!=null?pe:{});le(t.originalNode);const u=(m,p=null)=>{if(r.value){let B=p;switch(B==null&&(B=!o.value.has(m)),B){case!0:o.value.set(m,m);break;case!1:o.value.delete(m);break}}else o.value.clear(),p!==!1&&o.value.set(m,m),k.value=!1;F(Array.from(o.value.keys()))},{filterText:f,filteredOptions:h,filterValues:w}=ce(a,o,u,t.filterFields,t.hardFilterFields),{searchingFlag:y}=ie(a,t.url,t.searchableUrl,f,t.minChars,w,t.fetchMode,t.fetchOptions),g=e.ref(null),N=e.ref(null),M=e.ref(null),k=e.ref(!1),E=e.ref(null),v=function(m){const p=P(m.target);p.push(m.target),!p.includes(g.value)&&!p.includes(N.value)&&(k.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let m=!1;E.value=P(g.value).find(p=>!!(p instanceof Element&&(p.matches(t.dropdownContainer)&&(m=!0),m&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(p).position))))}if(E.value==null&&(E.value=document.querySelector("body")),t.originalNode){for(let p of d)p!="extraselect"&&g.value.classList.add(p);for(let p of c)g.value.style[p]=t.originalNode.style[p];let m=P(g.value,"form").pop();m instanceof HTMLElement&&m.matches("form")&&m.addEventListener("reset",()=>setTimeout(i)),t.originalNode.toggleValue=u,t.originalNode.setValues=p=>{o.value.clear();for(let B of p)u(B)}}window.document.addEventListener("mousedown",v),window.document.addEventListener("focusin",v)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",v),window.document.removeEventListener("focusin",v)});const{dropdownStyle:x,getTextWidth:O}=de(a,o,k,g,N,E,t.maxWidth),F=m=>{e.nextTick(()=>{var p;return(p=t.originalNode)==null?void 0:p.dispatchEvent(new Event("change",{bubbles:!0}))}),l("update:modelValue",m)},z=m=>{C(m,!1),f.value=""},C=(m,p=null)=>{p==null&&(p=!S.value),p?(o.value.clear(),a.value.forEach(B=>o.value.set(B.key,B.key))):o.value.clear(),F(Array.from(o.value.keys()))},b=()=>{V.value?h.value.forEach(m=>{o.value.has(m.key)&&o.value.delete(m.key)}):h.value.forEach(m=>{o.value.has(m.key)||o.value.set(m.key,m.key)}),F(Array.from(o.value.keys()))};e.watch(k,(m,p)=>{m!=p&&(m?t.search&&e.nextTick(()=>{M.value.focus({focusVisible:!0})}):f.value="")});const S=e.computed(()=>o.value.size==a.value.length),V=e.computed(()=>h.value.reduce((m,p)=>m&&o.value.has(p.key),!0)),rt=e.computed(()=>o.value.size==0),st=e.computed(()=>{var m,p,B,j,_;if(a.value.length<0)return"";if(r.value){if(rt.value)return s("No selection");if(!t.searchableUrl&&S.value)return s("All selected");const L=g.value?getComputedStyle(g.value):null,H=((m=g.value)==null?void 0:m.clientWidth)-parseInt(L==null?void 0:L.paddingLeft)-parseInt(L==null?void 0:L.paddingRight);let R=s(":n selected - ",{n:o.value.size}),me=!0;for(let ut of o.value)if(me?me=!1:R+=", ",R+=(B=(p=a.map.get(ut[0]))==null?void 0:p.value)!=null?B:y.value?s("Loading..."):s("Value not found"),H<O(R))return o.value.size+s(" selected");return R}else for(let L of o.value)return(_=(j=a.map.get(L[0]))==null?void 0:j.value)!=null?_:y.value?s("Loading..."):s("Value not found");return s("No selection")}),{list:it,containerProps:ct,wrapperProps:dt}=ne(h,{itemHeight:32});return(m,p)=>{var B,j;return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.unref(r)&&e.unref(o).size==0?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:(j=(B=t.originalNode)==null?void 0:B.name)==null?void 0:j.replace("[]",""),value:""},null,8,Ie)):e.createCommentVNode("",!0),t.showSelected?(e.openBlock(),e.createElementBlock("div",Pe,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),_=>{var L;return e.openBlock(),e.createElementBlock("div",{key:_,onClick:H=>u(_[0]),class:"selection-badge"},[e.createTextVNode(e.toDisplayString((L=e.unref(a).find(H=>H.key==_[0]))==null?void 0:L.value)+" ",1),e.createElementVNode("div",{class:"selection-remove",innerHTML:t.removeIcon},null,8,ze)],8,Me)}),128))])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({onFocus:p[0]||(p[0]=_=>k.value=!0),onClick:p[1]||(p[1]=_=>k.value=!0),ref_key:"inputNode",ref:g,value:e.unref(st),class:"extra-select extra-select-input",readonly:""},m.$attrs),null,16,De),E.value?(e.openBlock(),e.createBlock(e.Teleport,{key:2,to:E.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(y)>0}]),ref_key:"dropdownNode",ref:N,style:e.normalizeStyle(e.unref(x))},[t.search?(e.openBlock(),e.createElementBlock("div",$e,[e.withDirectives(e.createElementVNode("input",{ref_key:"searchNode",ref:M,class:"extra-select-search","onUpdate:modelValue":p[2]||(p[2]=_=>e.isRef(f)?f.value=_:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:e.unref(s)("Search...")},null,8,je),[[e.vModelText,e.unref(f)]])])):e.createCommentVNode("",!0),e.unref(f).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.unref(r)?(e.openBlock(),e.createElementBlock("div",qe,[e.unref(f).length==0?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:C,class:"all-select"},[e.createElementVNode("div",He,[e.createElementVNode("input",{checked:e.unref(S),type:"checkbox"},null,8,Re),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select all")),1)])])):e.createCommentVNode("",!0),e.unref(h).length>0&&e.unref(f).length>0?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:b,class:"all-select"},[e.createElementVNode("div",Ue,[e.createElementVNode("input",{checked:e.unref(V),type:"checkbox"},null,8,We),e.createElementVNode("b",null,e.toDisplayString(e.unref(s)("Select Filtered")),1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"clear",onClick:z},e.toDisplayString(e.unref(s)("Clear")),1)])):e.createCommentVNode("",!0),e.unref(h).length==0?(e.openBlock(),e.createElementBlock("div",Qe,e.toDisplayString(e.unref(s)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",Ge,e.toDisplayString(e.unref(s)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(ct),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(dt))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(it),_=>(e.openBlock(),e.createElementBlock("button",{key:_.index,class:"dropdown-row",onClick:e.withModifiers(L=>u(_.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",Ke,[e.unref(r)?(e.openBlock(),e.createElementBlock("input",{key:0,checked:e.unref(o).has(_.data.key),type:"checkbox"},null,8,Xe)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(_.data.value),1)])],8,Je))),128))],16)],16)],6),[[e.vShow,k.value]])],8,["to"])):e.createCommentVNode("",!0),t.originalNode?(e.openBlock(),e.createBlock(e.Teleport,{key:3,to:t.originalNode},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(o),_=>(e.openBlock(),e.createElementBlock("option",{key:_[0],selected:"selected",value:_[0]},null,8,Ye))),128))],8,["to"])):e.createCommentVNode("",!0)],64)}}}),et={key:0,class:"no-matches"},tt={key:1},nt=["onClick"],lt={class:"row-input"},at=Object.assign({name:"ExtraSuggest",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},url:{type:String,required:!1},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},dropdownContainer:{type:String,default:null}},emits:["update:modelValue"],setup(n,{emit:l}){var O,F,z;const t=n,{options:r}=ae(t.originalNode,e.toRef(t,"options"),e.ref([])),{t:a}=re(t.originalNode,e.toRef(t,"localization")),o=(O=t.originalNode)==null?void 0:O.classList,i=Object.values((z=(F=t.originalNode)==null?void 0:F.style)!=null?z:{});le(t.originalNode);const s=(C,b=null)=>{b===!1?d.value="":d.value=r.map.get(C).value,y.value=!1},{filterText:d,filteredOptions:c,filterValues:u}=ce(r,null,s,t.filterFields,t.hardFilterFields),{searchingFlag:f}=ie(r,t.url,t.searchableUrl,d,t.minChars,u,t.fetchMode,t.fetchOptions),h=e.ref(null),w=e.ref(null),y=e.ref(!1),g=e.ref(null),N=function(C){const b=P(C.target);b.push(C.target),!b.includes(h.value)&&!b.includes(w.value)&&(y.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let S=!1;g.value=P(h.value).find(V=>!!(V instanceof Element&&(V.matches(t.dropdownContainer)&&(S=!0),S&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(V).position))))}if(g.value==null&&(g.value=document.querySelector("body")),t.originalNode){for(let V of o)V!="extrasuggest"&&h.value.classList.add(V);for(let V of i)h.value.style[V]=t.originalNode.style[V];d.value=t.originalNode.value;let S=P(h.value,"form").pop();S instanceof HTMLElement&&S.matches("form")&&S.addEventListener("reset",()=>setTimeout(b)),t.originalNode.addEventListener("change",()=>{k(!0)})}e.watchEffect(()=>{t.modelValue!=null&&(d.value=t.modelValue)});const C=d.value,b=()=>{d.value=C};window.document.addEventListener("mousedown",N),window.document.addEventListener("focusin",N)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",N),window.document.removeEventListener("focusin",N)});const{dropdownStyle:M}=de(r,e.ref([]),y,h,w,g,t.maxWidth),k=(C=!1)=>{var b;t.originalNode&&(C?d.value=t.originalNode.value:(t.originalNode.value=d.value,(b=t.originalNode)==null||b.dispatchEvent(new Event("change",{bubbles:!0})))),l("update:modelValue",d.value)};e.watch(()=>y.value,C=>{C===!1&&k()});const{list:E,containerProps:v,wrapperProps:x}=ne(c,{itemHeight:32});return(C,b)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({onFocus:b[0]||(b[0]=S=>y.value=!0),onClick:b[1]||(b[1]=S=>y.value=!0),ref_key:"inputNode",ref:h,"onUpdate:modelValue":b[2]||(b[2]=S=>e.isRef(d)?d.value=S:null),class:"extra-select extra-select-input"},C.$attrs),null,16),[[e.vModelDynamic,e.unref(d)]]),g.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:g.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(f)>0}]),ref_key:"dropdownNode",ref:w,style:e.normalizeStyle(e.unref(M))},[e.unref(d).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(c).length==0?(e.openBlock(),e.createElementBlock("div",et,e.toDisplayString(e.unref(a)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",tt,e.toDisplayString(e.unref(a)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(v),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(x))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(E),S=>(e.openBlock(),e.createElementBlock("button",{key:S.index,class:"dropdown-row",onClick:e.withModifiers(V=>s(S.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",lt,e.toDisplayString(S.data.value),1)],8,nt))),128))],16)],16)],6),[[e.vShow,y.value]])],8,["to"])):e.createCommentVNode("",!0)],64))}}),ot=Q,G={init:function(){document.querySelectorAll(".extraselect").forEach(function(n){G.bindNew(n)})},bindNew(n){A.lock(n,"extra-select",()=>{const l={};for(let a in n.dataset)try{l[a]=JSON.parse(n.dataset[a])}catch{l[a]=n.dataset[a]}l.originalNode=n;const t=document.createElement("div");n.parentNode.insertBefore(t,n.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const r=e.createApp(Ze,l);r.mount(t),n.addEventListener("remove",function(){r.unmount(),t.remove(),n.remove(),A.remove(n,"extra-select")})})}},J={init:function(){document.querySelectorAll(".extrasuggest").forEach(function(n){J.bindNew(n)})},bindNew(n){A.lock(n,"extra-suggest",()=>{const l={};for(let a in n.dataset)try{l[a]=JSON.parse(n.dataset[a])}catch{l[a]=n.dataset[a]}l.originalNode=n;const t=document.createElement("div");n.parentNode.insertBefore(t,n.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const r=e.createApp(at,l);r.mount(t),n.addEventListener("remove",function(){r.unmount(),t.remove(),n.remove(),A.remove(n,"extra-suggest")})})}};return document.addEventListener("DOMContentLoaded",function(){G.init(),J.init(),Q()}),D.ExtraSelect=G,D.ExtraSuggest=J,D.loadExtraSelectDefaultLocalization=ot,Object.defineProperties(D,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),D}({},Vue);
