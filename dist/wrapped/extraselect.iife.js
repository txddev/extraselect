var Extraselect=function(M,e){"use strict";const V=new WeakMap;class C{static put(l,t,o){V.has(l)||V.set(l,new Map),V.get(l).set(t,o)}static get(l,t){return V.get(l).get(t)}static has(l,t){return V.has(l)&&V.get(l).has(t)}static remove(l,t){var o=V.get(l).delete(t);return V.get(l).size!==0&&V.delete(l),o}static lock(l,t,o){if(!C.has(l,t)){C.put(l,t,!0);const a=o();return a!==void 0&&C.put(l,t,a),a}return!1}static async lockAsync(l,t,o){if(!C.has(l,t)){C.put(l,t,!0);const a=await o();return a!==void 0&&C.put(l,t,a),a}return!1}}({BASE_URL:"/",MODE:"production",DEV:!1,PROD:!0}).DATASTORE_DEBUG&&(window.__Store=V);function j(n){if(n==null)return{top:0,left:0,width:null,height:null};let l=n.getBoundingClientRect();return{top:l.top+window.scrollY,left:l.left+window.scrollX,width:l.width,height:l.height}}function A(n,l){l===void 0&&(l=window.document);for(var t=[],o=n.parentNode;o!=null&&o instanceof HTMLElement&&!(l instanceof HTMLElement&&o===l)&&!(typeof l=="string"&&o.matches(l));){var a=o;t.push(a),o=a.parentNode}return o!=null&&t.push(o),t}function xe(n){var l=Array.prototype.slice.call(n.childNodes);l.forEach(function(t){n.removeChild(t)})}var Z;const z=typeof window<"u";z&&((Z=window==null?void 0:window.navigator)==null?void 0:Z.userAgent)&&/iP(ad|hone|od)/.test(window.navigator.userAgent);function Ne(n){return typeof n=="function"?n():e.unref(n)}function Ce(n){return n}function Be(n){return e.getCurrentScope()?(e.onScopeDispose(n),!0):!1}function Ve(n,l=!0){e.getCurrentInstance()?e.onMounted(n):l?n():e.nextTick(n)}function R(n){var l;const t=Ne(n);return(l=t==null?void 0:t.$el)!=null?l:t}const ee=z?window:void 0;z&&window.document,z&&window.navigator,z&&window.location;function Le(n,l=!1){const t=e.ref(),o=()=>t.value=Boolean(n());return o(),Ve(o,l),t}const Q=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},G="__vueuse_ssr_handlers__";Q[G]=Q[G]||{},Q[G];var te=Object.getOwnPropertySymbols,Te=Object.prototype.hasOwnProperty,Fe=Object.prototype.propertyIsEnumerable,Ae=(n,l)=>{var t={};for(var o in n)Te.call(n,o)&&l.indexOf(o)<0&&(t[o]=n[o]);if(n!=null&&te)for(var o of te(n))l.indexOf(o)<0&&Fe.call(n,o)&&(t[o]=n[o]);return t};function Pe(n,l,t={}){const o=t,{window:a=ee}=o,r=Ae(o,["window"]);let c;const i=Le(()=>a&&"ResizeObserver"in a),p=()=>{c&&(c.disconnect(),c=void 0)},s=e.watch(()=>R(n),u=>{p(),i.value&&a&&u&&(c=new ResizeObserver(l),c.observe(u,r))},{immediate:!0,flush:"post"}),d=()=>{p(),s()};return Be(d),{isSupported:i,stop:d}}function Ie(n,l={width:0,height:0},t={}){const{window:o=ee,box:a="content-box"}=t,r=e.computed(()=>{var p,s;return(s=(p=R(n))==null?void 0:p.namespaceURI)==null?void 0:s.includes("svg")}),c=e.ref(l.width),i=e.ref(l.height);return Pe(n,([p])=>{const s=a==="border-box"?p.borderBoxSize:a==="content-box"?p.contentBoxSize:p.devicePixelContentBoxSize;if(o&&r.value){const d=R(n);if(d){const u=o.getComputedStyle(d);c.value=parseFloat(u.width),i.value=parseFloat(u.height)}}else if(s){const d=Array.isArray(s)?s:[s];c.value=d.reduce((u,{inlineSize:f})=>u+f,0),i.value=d.reduce((u,{blockSize:f})=>u+f,0)}else c.value=p.contentRect.width,i.value=p.contentRect.height},t),e.watch(()=>R(n),p=>{c.value=p?l.width:0,i.value=p?l.height:0}),{width:c,height:i}}var ne;(function(n){n.UP="UP",n.RIGHT="RIGHT",n.DOWN="DOWN",n.LEFT="LEFT",n.NONE="NONE"})(ne||(ne={}));var Me=Object.defineProperty,le=Object.getOwnPropertySymbols,ze=Object.prototype.hasOwnProperty,$e=Object.prototype.propertyIsEnumerable,ae=(n,l,t)=>l in n?Me(n,l,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[l]=t,De=(n,l)=>{for(var t in l||(l={}))ze.call(l,t)&&ae(n,t,l[t]);if(le)for(var t of le(l))$e.call(l,t)&&ae(n,t,l[t]);return n};De({linear:Ce},{easeInSine:[.12,0,.39,0],easeOutSine:[.61,1,.88,1],easeInOutSine:[.37,0,.63,1],easeInQuad:[.11,0,.5,0],easeOutQuad:[.5,1,.89,1],easeInOutQuad:[.45,0,.55,1],easeInCubic:[.32,0,.67,0],easeOutCubic:[.33,1,.68,1],easeInOutCubic:[.65,0,.35,1],easeInQuart:[.5,0,.75,0],easeOutQuart:[.25,1,.5,1],easeInOutQuart:[.76,0,.24,1],easeInQuint:[.64,0,.78,0],easeOutQuint:[.22,1,.36,1],easeInOutQuint:[.83,0,.17,1],easeInExpo:[.7,0,.84,0],easeOutExpo:[.16,1,.3,1],easeInOutExpo:[.87,0,.13,1],easeInCirc:[.55,0,1,.45],easeOutCirc:[0,.55,.45,1],easeInOutCirc:[.85,0,.15,1],easeInBack:[.36,0,.66,-.56],easeOutBack:[.34,1.56,.64,1],easeInOutBack:[.68,-.6,.32,1.6]});function oe(n,l){const{containerStyle:t,wrapperProps:o,scrollTo:a,calculateRange:r,currentList:c,containerRef:i}="itemHeight"in l?qe(l,n):Re(l,n);return{list:c,scrollTo:a,containerProps:{ref:i,onScroll:()=>{r()},style:t},wrapperProps:o}}function re(n){const l=e.ref(null),t=Ie(l),o=e.ref([]),a=e.shallowRef(n);return{state:e.ref({start:0,end:10}),source:a,currentList:o,size:t,containerRef:l}}function se(n,l,t){return o=>{if(typeof t=="number")return Math.ceil(o/t);const{start:a=0}=n.value;let r=0,c=0;for(let i=a;i<l.value.length;i++){const p=t(i);if(r+=p,c=i,r>o)break}return c-a}}function ie(n,l){return t=>{if(typeof l=="number")return Math.floor(t/l)+1;let o=0,a=0;for(let r=0;r<n.value.length;r++){const c=l(r);if(o+=c,o>=t){a=r;break}}return a+1}}function ce(n,l,t,o,{containerRef:a,state:r,currentList:c,source:i}){return()=>{const p=a.value;if(p){const s=t(n==="vertical"?p.scrollTop:p.scrollLeft),d=o(n==="vertical"?p.clientHeight:p.clientWidth),u=s-l,f=s+d+l;r.value={start:u<0?0:u,end:f>i.value.length?i.value.length:f},c.value=i.value.slice(r.value.start,r.value.end).map((m,g)=>({data:m,index:g+r.value.start}))}}}function ue(n,l){return t=>typeof n=="number"?t*n:l.value.slice(0,t).reduce((a,r,c)=>a+n(c),0)}function de(n,l,t){e.watch([n.width,n.height,l],()=>{t()})}function fe(n,l){return e.computed(()=>typeof n=="number"?l.value.length*n:l.value.reduce((t,o,a)=>t+n(a),0))}const je={horizontal:"scrollLeft",vertical:"scrollTop"};function pe(n,l,t,o){return a=>{o.value&&(o.value[je[n]]=t(a),l())}}function Re(n,l){const t=re(l),{state:o,source:a,currentList:r,size:c,containerRef:i}=t,p={overflowX:"auto"},{itemWidth:s,overscan:d=5}=n,u=se(o,a,s),f=ie(a,s),m=ce("horizontal",d,f,u,t),g=ue(s,a),v=e.computed(()=>g(o.value.start)),w=fe(s,a);de(c,l,m);const x=pe("horizontal",m,g,i),B=e.computed(()=>({style:{height:"100%",width:`${w.value-v.value}px`,marginLeft:`${v.value}px`,display:"flex"}}));return{scrollTo:x,calculateRange:m,wrapperProps:B,containerStyle:p,currentList:r,containerRef:i}}function qe(n,l){const t=re(l),{state:o,source:a,currentList:r,size:c,containerRef:i}=t,p={overflowY:"auto"},{itemHeight:s,overscan:d=5}=n,u=se(o,a,s),f=ie(a,s),m=ce("vertical",d,f,u,t),g=ue(s,a),v=e.computed(()=>g(o.value.start)),w=fe(s,a);de(c,l,m);const x=pe("vertical",m,g,i),B=e.computed(()=>({style:{width:"100%",height:`${w.value-v.value}px`,marginTop:`${v.value}px`}}));return{calculateRange:m,scrollTo:x,containerStyle:p,wrapperProps:B,currentList:r,containerRef:i}}const F=n=>{let l=parseInt(n);return l==n?l:n},He=n=>{try{var l=JSON.parse(n);if(l&&typeof l=="object")return l}catch{}return n},We=(n,l,t)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const o={defaultArray:n.value,get:()=>n.value,push:(a,r,c=null)=>{parseInt(a)==a&&(a=parseInt(a));const i=n.map.get(a);if(i)i.value=r,i.data=c;else{let p={value:r,key:a,data:c};n.value.push(p),n.map.set(p.key,p)}},addRange:a=>{for(let r of a)n.actions.push(r.key,r.value,r.data)},remove:a=>{n.value.splice(n.value.findIndex(r=>r.key==a),1)},clear:()=>{n.value=[]},sort:(a=null)=>{a==null&&(a=(r,c)=>r.value.localeCompare(c.value)),n.value=n.value.sort(a)},setDefault:function(a){this.defaultArray=a},restoreDefault:function(){n.value=this.defaultArray},filter:function(a){},selection:{get(){return l.value},clear(){l.value.clear()},add(a){l.value.set(a,a)},remove(a){l.value.delete(a)}}};window.ExtraSelectOptions[t]=o,n.actions=o};let Ue=1;const me=n=>{n&&(n.style.display="none",xe(n))},he=(n,l,t,o)=>{const a=e.ref(new Map);e.watchEffect(()=>{if(Array.isArray(t.value)){a.value.clear();for(let s of t.value)a.value.set(s,s)}});const r=e.ref([]);if(r.map=new Map,r.rebuildMap=()=>{if(r.map.clear(),r.value)for(let s of r.value)r.map.set(s.key,s)},e.watchEffect(()=>{l.value&&(r.value=l.value.map(s=>({...s,key:F(s.key)})),r.rebuildMap())}),n){if(a.value.clear(),n.matches("select")){for(let s of Array.apply(null,n.selectedOptions).map(d=>F(d.value)).filter(d=>d!=null))a.value.set(s,s);r.value=Array.apply(null,n.options).reduce((s,d)=>(s.push({value:d.text,key:F(d.value),data:Object.keys(d.dataset).reduce((u,f)=>(u[f]=He(d.dataset[f]),u),{})}),s),[])}if(n.matches("input")){let s=n.value;s!=null&&s.length>0&&(r.value=[{value:s,key:s}])}r.rebuildMap()}if(Array.isArray(o))for(let s of o)a.value.set(F(s),F(s));else o!=null&&a.value.set(F(o),F(o));let c=n==null?void 0:n.id;(c==null||c===""||c==0)&&(c="extraselect_"+(++Ue).toString()),We(r,a,c);const i=[];return a.value.forEach((s,d)=>{i.push([d,s])}),{options:r,selectedOptions:a,onReset:()=>{a.value.clear();for(let[s,d]of i)a.value.set(s,d)}}};e.ref({});function Qe(n,l={}){for(let t in l)n=n.replace(`:${t}`,l[t]);return n}const J=(n=null)=>{var o,a;window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={});let t={...(a=(o=window.ExtraSelectLocalization.defaults)==null?void 0:o.defaultArray)!=null?a:{}};Object.assign(t,n!=null?n:{}),ye(e.ref(t),"defaults")},ye=(n,l)=>{window.ExtraSelectLocalization==null&&(window.ExtraSelectLocalization={},J());const t={defaultArray:n.value,list:()=>n.value,get:o=>{var a;return(a=n.value[o])!=null?a:null},push:(o,a)=>{n.value[o]=a}};window.ExtraSelectLocalization[l]=t,n.actions=t};let Ge=0;const ge=(n,l)=>{var o;return ye(l,(o=n==null?void 0:n.id)!=null?o:"extraselect_"+(++Ge).toString()),{propLocalization:l,t:(a,r={})=>{var i;let c=(i=l.value[a])!=null?i:window.ExtraSelectLocalization.defaults.get(a);return c==null&&(window.ExtraSelectLocalization.defaults.push(a,a),c=a),Qe(c,r)}}},we=async function(n,l=null,t={}){var r;const o={method:"POST",credentials:"include",...t,headers:{"Content-Type":"application/json",...(r=t.headers)!=null?r:{}},body:JSON.stringify({search:l,...t.body})};return await(await fetch(n,o)).json()},ve=(n,l,t,o,a,r,c="limited",i={})=>{const p=e.ref(0),s=e.ref(!1),d=e.computed(()=>s.value||p.value>0);if(l!=null&&l.length>0)if(t){const u=[];e.watchEffect(f=>{if(o.value.length>=a){let m=!0;switch(c){case"always":break;default:case"limited":m=!u.includes(o.value);break;case"complete":m=u.reduce((g,v)=>g&&!o.value.startsWith(v),!0);break}if(m){s.value=!0;const g=setTimeout(()=>{u.push(o.value),p.value+=1,i.body={...i.body,...r.value},we(l,o.value,i).then(v=>{n.actions.addRange(v),n.actions.sort(),p.value-=1,s.value=!1})},500);f(()=>{clearTimeout(g)})}}})}else we(l,null,i).then(u=>{n.actions.addRange(u),n.actions.sort()});return{searchingFlag:d}},ke=(n,l,t,o=[],a=[])=>{const r=e.ref(""),c=e.ref([]),i=e.ref({}),p={...o.reduce((d,u)=>(d[u]=!1,d),{}),...a.reduce((d,u)=>(d[u]=!0,d),{})};for(let d in p){let u=p[d],f=document.getElementById(d);i.value[d]=f==null?void 0:f.value,f&&f.addEventListener("change",m=>{i.value[d]=m.target.value,u&&e.nextTick(()=>{if(l!=null)for(let g of Array.from(l.value.keys()))c.value.find(v=>v.key==g)||t(g,!1);else c.value.find(g=>g.key==r.value)||t(r.value,!1)})})}const s=function(d,u){let f=d.value;return Object.keys(i.value).length>0&&(f=f.filter(m=>{var g,v;for(let w in i.value)if((p[w]?!0:((g=i.value[w])!=null?g:"").length>0)&&((v=m.data)==null?void 0:v.hasOwnProperty(w))){if(Array.isArray(m.data[w])){if(!m.data[w].includes(i.value[w]))return!1}else if(m.data[w]!=i.value[w])return!1}return!0})),u.length>0&&(f=f.filter(m=>m.value.toLowerCase().includes(u.toLowerCase()))),f};return e.watchEffect(()=>{c.value=s(n,r.value)}),{filterText:r,filteredOptions:c,filterValues:i}},Ee=(n,l,t,o,a,r,c)=>{const i=getComputedStyle(document.querySelector("body")).font,p=function(u){const m=document.createElement("canvas").getContext("2d");return m.font=i,m.measureText(u).width},s=e.computed(()=>{var f,m;const u=(f=j(o.value).width)!=null?f:100;if(c==="inherit")return u;if(c==null||c==="dynamic"){const g=(m=parseInt(getComputedStyle(document.querySelector("html"))["font-size"]))!=null?m:16;return Math.max(u,Math.max(...n.value.map(v=>p(v.value)))+20+g*3)}return c}),d=e.ref({position:"absolute","min-width":"max-content"});return e.watchPostEffect(()=>{t.value<0&&console.log("is open"),l.value.size<0&&console.log("empty selection");var u=j(o.value),f=j(null);if(r.value&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(r.value).position))var f=j(r.value);let m=-f.left+u.left;const g=window.document.documentElement.clientWidth;m+s.value>g&&(m=g-s.value),d.value={position:"absolute","min-width":"max-content",width:s.value.toString()+"px",top:(-f.top+u.top+u.height).toString()+"px",left:m.toString()+"px"}}),{dropdownStyle:d,getTextWidth:p}},Je=["name"],Ke={key:1,class:"extra-select selection"},Xe=["onClick"],Ye=["innerHTML"],Ze=["value","disabled"],et={key:0,class:"input-searching"},tt=["placeholder"],nt={key:0,class:"allselect-clear"},lt={class:"row-input"},at=["checked"],ot={class:"row-input"},rt=["checked"],st={key:1,class:"no-matches"},it={key:2},ct=["onClick"],ut={class:"row-input"},dt=["checked"],ft=["value"],pt=Object.assign({name:"ExtraSelect",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:Array,required:!1,default:[]},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!1},searchableUrl:{type:Boolean,default:!1},initialValue:{default:null},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:l}){var be,Se,_e;const t=n,o=e.computed(()=>{var h,y;return(y=(h=t.originalNode)==null?void 0:h.multiple)!=null?y:t.multiple}),{options:a,selectedOptions:r,onReset:c}=he(t.originalNode,e.toRef(t,"options"),e.toRef(t,"modelValue"),t.initialValue),{t:i}=ge(t.originalNode,e.toRef(t,"localization")),p=(be=t.originalNode)==null?void 0:be.classList,s=Object.values((_e=(Se=t.originalNode)==null?void 0:Se.style)!=null?_e:{});me(t.originalNode);const d=l,u=(h,y=null)=>{if(o.value){let _=y;switch(_==null&&(_=!r.value.has(h)),_){case!0:r.value.set(h,h);break;case!1:r.value.delete(h);break}}else r.value.clear(),y!==!1&&r.value.set(h,h),L.value=!1;I(Array.from(r.value.keys()))},{filterText:f,filteredOptions:m,filterValues:g}=ke(a,r,u,t.filterFields,t.hardFilterFields),{searchingFlag:v}=ve(a,t.url,t.searchableUrl,f,t.minChars,g,t.fetchMode,t.fetchOptions),w=e.ref(null),x=e.ref(null),B=e.ref(null),L=e.ref(!1);function $(h){t.disabled||(L.value=h)}e.watch(f,()=>{x.value.querySelector(".scroller").scrollTop=0});const T=e.ref(null),P=function(h){const y=A(h.target);y.push(h.target),!y.includes(w.value)&&!y.includes(x.value)?L.value=!1:(h.stopImmediatePropagation(),h.preventDefault())};e.onMounted(()=>{if(t.dropdownContainer){let h=!1;T.value=A(w.value).find(y=>!!(y instanceof Element&&(y.matches(t.dropdownContainer)&&(h=!0),h&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(y).position))))}if(T.value==null&&(T.value=document.querySelector("body")),t.originalNode){for(let y of p)y!="extraselect"&&w.value.classList.add(y);for(let y of s)w.value.style[y]=t.originalNode.style[y];let h=A(w.value,"form").pop();h instanceof HTMLElement&&h.matches("form")&&h.addEventListener("reset",()=>setTimeout(c)),t.originalNode.toggleValue=u,t.originalNode.setValues=y=>{r.value.clear();for(let _ of y)u(_)}}window.document.addEventListener("mousedown",P),window.document.addEventListener("focusin",P)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",P),window.document.removeEventListener("focusin",P)});const{dropdownStyle:Y,getTextWidth:q}=Ee(a,r,L,w,x,T,t.maxWidth),I=h=>{e.nextTick(()=>{var y;return(y=t.originalNode)==null?void 0:y.dispatchEvent(new Event("change",{bubbles:!0}))}),d("update:modelValue",h)},H=h=>{S(h,!1),f.value=""},S=(h,y=null)=>{y==null&&(y=!E.value),y?(r.value.clear(),a.value.forEach(_=>r.value.set(_.key,_.key))):r.value.clear(),I(Array.from(r.value.keys()))},k=()=>{O.value?m.value.forEach(h=>{r.value.has(h.key)&&r.value.delete(h.key)}):m.value.forEach(h=>{r.value.has(h.key)||r.value.set(h.key,h.key)}),I(Array.from(r.value.keys()))};e.watch(L,(h,y)=>{h!=y&&(h?t.search&&e.nextTick(()=>{B.value.focus({focusVisible:!0})}):f.value="")});const E=e.computed(()=>r.value.size==a.value.length),O=e.computed(()=>m.value.reduce((h,y)=>h&&r.value.has(y.key),!0)),Et=e.computed(()=>r.value.size==0),bt=e.computed(()=>{var h,y,_,D,b;if(a.value.length<0)return"";if(o.value){if(Et.value)return i("No selection");if(!t.searchableUrl&&E.value)return i("All selected");const N=w.value?getComputedStyle(w.value):null,W=((h=w.value)==null?void 0:h.clientWidth)-parseInt(N==null?void 0:N.paddingLeft)-parseInt(N==null?void 0:N.paddingRight);let U=i(":n selected - ",{n:r.value.size}),Oe=!0;for(let xt of r.value)if(Oe?Oe=!1:U+=", ",U+=(_=(y=a.map.get(xt[0]))==null?void 0:y.value)!=null?_:v.value?i("Loading..."):i("Value not found"),W<q(U))return r.value.size+i(" selected");return U}else for(let N of r.value)return(b=(D=a.map.get(N[0]))==null?void 0:D.value)!=null?b:v.value?i("Loading..."):i("Value not found");return i("No selection")}),{list:St,containerProps:_t,wrapperProps:Ot}=oe(m,{itemHeight:32});return(h,y)=>{var _,D;return e.openBlock(),e.createElementBlock(e.Fragment,null,[o.value&&e.unref(r).size==0?(e.openBlock(),e.createElementBlock("input",{key:0,type:"hidden",name:(D=(_=t.originalNode)==null?void 0:_.name)==null?void 0:D.replace("[]",""),value:""},null,8,Je)):e.createCommentVNode("",!0),t.showSelected?(e.openBlock(),e.createElementBlock("div",Ke,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),b=>{var N;return e.openBlock(),e.createElementBlock("div",{key:b,onClick:e.withModifiers(W=>u(b[0]),["stop","prevent"]),class:"selection-badge"},[e.createTextVNode(e.toDisplayString((N=e.unref(a).find(W=>W.key==b[0]))==null?void 0:N.value)+" ",1),e.createElementVNode("div",{class:"selection-remove",innerHTML:t.removeIcon},null,8,Ye)],8,Xe)}),128))])):e.createCommentVNode("",!0),e.createElementVNode("input",e.mergeProps({onFocus:y[0]||(y[0]=b=>$(!0)),onClick:y[1]||(y[1]=e.withModifiers(b=>$(!0),["stop","prevent"])),ref_key:"inputNode",ref:w,value:bt.value,class:"extra-select extra-select-input",readonly:""},h.$attrs,{disabled:n.disabled}),null,16,Ze),T.value?(e.openBlock(),e.createBlock(e.Teleport,{key:2,to:T.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(v)>0}]),ref_key:"dropdownNode",ref:x,style:e.normalizeStyle(e.unref(Y))},[t.search?(e.openBlock(),e.createElementBlock("div",et,[e.withDirectives(e.createElementVNode("input",{ref_key:"searchNode",ref:B,class:"extra-select-search","onUpdate:modelValue":y[2]||(y[2]=b=>e.isRef(f)?f.value=b:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:e.unref(i)("Search...")},null,8,tt),[[e.vModelText,e.unref(f)]])])):e.createCommentVNode("",!0),e.unref(f).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[o.value?(e.openBlock(),e.createElementBlock("div",nt,[e.unref(f).length==0?(e.openBlock(),e.createElementBlock("div",{key:0,onClick:e.withModifiers(S,["stop","prevent"]),class:"all-select"},[e.createElementVNode("div",lt,[e.createElementVNode("input",{checked:E.value,type:"checkbox"},null,8,at),e.createElementVNode("b",null,e.toDisplayString(e.unref(i)("Select all")),1)])])):e.createCommentVNode("",!0),e.unref(m).length>0&&e.unref(f).length>0?(e.openBlock(),e.createElementBlock("div",{key:1,onClick:e.withModifiers(k,["stop","prevent"]),class:"all-select"},[e.createElementVNode("div",ot,[e.createElementVNode("input",{checked:O.value,type:"checkbox"},null,8,rt),e.createElementVNode("b",null,e.toDisplayString(e.unref(i)("Select Filtered")),1)])])):e.createCommentVNode("",!0),e.createElementVNode("div",{class:"clear",onClick:e.withModifiers(H,["stop","prevent"])},e.toDisplayString(e.unref(i)("Clear")),1)])):e.createCommentVNode("",!0),e.unref(m).length==0?(e.openBlock(),e.createElementBlock("div",st,e.toDisplayString(e.unref(i)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",it,e.toDisplayString(e.unref(i)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(_t),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(Ot))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(St),b=>(e.openBlock(),e.createElementBlock("button",{key:b.index,class:"dropdown-row",onClick:e.withModifiers(N=>u(b.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",ut,[o.value?(e.openBlock(),e.createElementBlock("input",{key:0,checked:e.unref(r).has(b.data.key),type:"checkbox"},null,8,dt)):e.createCommentVNode("",!0),e.createTextVNode(" "+e.toDisplayString(b.data.value),1)])],8,ct))),128))],16)],16)],6),[[e.vShow,L.value]])],8,["to"])):e.createCommentVNode("",!0),t.originalNode?(e.openBlock(),e.createBlock(e.Teleport,{key:3,to:t.originalNode},[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(r),b=>(e.openBlock(),e.createElementBlock("option",{key:b[0],selected:"selected",value:b[0]},null,8,ft))),128))],8,["to"])):e.createCommentVNode("",!0)],64)}}}),mt=["disabled"],ht={key:0,class:"no-matches"},yt={key:1},gt=["onClick"],wt={class:"row-input"},vt=Object.assign({name:"ExtraSuggest",inheritAttrs:!1},{props:{originalNode:{type:Object,required:!1},options:{type:Array,required:!1},localization:{type:Object,required:!1,default:{}},modelValue:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},url:{type:String,required:!1},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},filterFields:{type:Array,default:[]},hardFilterFields:{type:Array,default:[]},dropdownContainer:{type:String,default:null},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(n,{emit:l}){var q,I,H;const t=n,{options:o}=he(t.originalNode,e.toRef(t,"options"),e.ref([])),{t:a}=ge(t.originalNode,e.toRef(t,"localization")),r=(q=t.originalNode)==null?void 0:q.classList,c=Object.values((H=(I=t.originalNode)==null?void 0:I.style)!=null?H:{});me(t.originalNode);const i=l,p=(S,k=null)=>{k===!1?s.value="":s.value=o.map.get(S).value,v.value=!1},{filterText:s,filteredOptions:d,filterValues:u}=ke(o,null,p,t.filterFields,t.hardFilterFields),{searchingFlag:f}=ve(o,t.url,t.searchableUrl,s,t.minChars,u,t.fetchMode,t.fetchOptions),m=e.ref(null),g=e.ref(null),v=e.ref(!1),w=e.ref(null);function x(S){t.disabled||(v.value=S)}e.watch(s,()=>{g.value.querySelector(".scroller").scrollTop=0});const B=function(S){const k=A(S.target);k.push(S.target),!k.includes(m.value)&&!k.includes(g.value)&&(v.value=!1)};e.onMounted(()=>{if(t.dropdownContainer){let E=!1;w.value=A(m.value).find(O=>!!(O instanceof Element&&(O.matches(t.dropdownContainer)&&(E=!0),E&&["absolute","relative","fixed","sticky"].includes(getComputedStyle(O).position))))}if(w.value==null&&(w.value=document.querySelector("body")),t.originalNode){for(let O of r)O!="extrasuggest"&&m.value.classList.add(O);for(let O of c)m.value.style[O]=t.originalNode.style[O];s.value=t.originalNode.value;let E=A(m.value,"form").pop();E instanceof HTMLElement&&E.matches("form")&&E.addEventListener("reset",()=>setTimeout(k)),t.originalNode.addEventListener("change",()=>{$(!0)})}e.watchEffect(()=>{t.modelValue!=null&&(s.value=t.modelValue)});const S=s.value,k=()=>{s.value=S};window.document.addEventListener("mousedown",B),window.document.addEventListener("focusin",B)}),e.onUnmounted(()=>{window.document.removeEventListener("mousedown",B),window.document.removeEventListener("focusin",B)});const{dropdownStyle:L}=Ee(o,e.ref([]),v,m,g,w,t.maxWidth),$=(S=!1)=>{var k;t.originalNode&&(S?s.value=t.originalNode.value:(t.originalNode.value=s.value,(k=t.originalNode)==null||k.dispatchEvent(new Event("change",{bubbles:!0})))),i("update:modelValue",s.value)};e.watch(()=>v.value,S=>{S===!1&&$()});const{list:T,containerProps:P,wrapperProps:Y}=oe(d,{itemHeight:32});return(S,k)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[e.withDirectives(e.createElementVNode("input",e.mergeProps({onFocus:k[0]||(k[0]=E=>x(!0)),onClick:k[1]||(k[1]=E=>x(!0)),ref_key:"inputNode",ref:m,"onUpdate:modelValue":k[2]||(k[2]=E=>e.isRef(s)?s.value=E:null),class:"extra-select extra-select-input"},S.$attrs,{disabled:n.disabled}),null,16,mt),[[e.vModelDynamic,e.unref(s)]]),w.value?(e.openBlock(),e.createBlock(e.Teleport,{key:0,to:w.value},[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["extra-select dropdown",{searching:e.unref(f)>0}]),ref_key:"dropdownNode",ref:g,style:e.normalizeStyle(e.unref(L))},[e.unref(s).length>=t.minChars?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.unref(d).length==0?(e.openBlock(),e.createElementBlock("div",ht,e.toDisplayString(e.unref(a)("No matches found")),1)):e.createCommentVNode("",!0)],64)):(e.openBlock(),e.createElementBlock("div",yt,e.toDisplayString(e.unref(a)("Insert at least :n characters",{n:t.minChars})),1)),e.createElementVNode("div",e.mergeProps(e.unref(P),{class:"scroller"}),[e.createElementVNode("div",e.normalizeProps(e.guardReactiveProps(e.unref(Y))),[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(T),E=>(e.openBlock(),e.createElementBlock("button",{key:E.index,class:"dropdown-row",onClick:e.withModifiers(O=>p(E.data.key),["stop","prevent"]),style:{height:"32px"}},[e.createElementVNode("div",wt,e.toDisplayString(E.data.value),1)],8,gt))),128))],16)],16)],6),[[e.vShow,v.value]])],8,["to"])):e.createCommentVNode("",!0)],64))}}),kt=J,K={init:function(){document.querySelectorAll(".extraselect").forEach(function(n){K.bindNew(n)})},bindNew(n){C.lock(n,"extra-select",()=>{const l={};for(let a in n.dataset)try{l[a]=JSON.parse(n.dataset[a])}catch{l[a]=n.dataset[a]}l.disabled=n.disabled,l.originalNode=n;const t=document.createElement("div");n.parentNode.insertBefore(t,n.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const o=e.createApp(pt,l);o.mount(t),n.addEventListener("remove",function(){o.unmount(),t.remove(),n.remove(),C.remove(n,"extra-select")})})}},X={init:function(){document.querySelectorAll(".extrasuggest").forEach(function(n){X.bindNew(n)})},bindNew(n){C.lock(n,"extra-suggest",()=>{const l={};for(let a in n.dataset)try{l[a]=JSON.parse(n.dataset[a])}catch{l[a]=n.dataset[a]}l.disabled=n.disabled,l.originalNode=n;const t=document.createElement("div");n.parentNode.insertBefore(t,n.nextSibling),t.dataset.isVue=!0,t.style.display="contents";const o=e.createApp(vt,l);o.mount(t),n.addEventListener("remove",function(){o.unmount(),t.remove(),n.remove(),C.remove(n,"extra-suggest")})})}};return document.addEventListener("DOMContentLoaded",function(){K.init(),X.init(),J()}),M.ExtraSelect=K,M.ExtraSuggest=X,M.loadExtraSelectDefaultLocalization=kt,Object.defineProperties(M,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}}),M}({},Vue);
