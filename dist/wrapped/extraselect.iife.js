(function(){"use strict";try{if(typeof document!="undefined"){var e=document.createElement("style");e.appendChild(document.createTextNode("")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();
var Extraselect=function(t){"use strict";const O=new WeakMap;class C{static put(i,n,r){O.has(i)||O.set(i,new Map),O.get(i).set(n,r)}static get(i,n){return O.get(i).get(n)}static has(i,n){return O.has(i)&&O.get(i).has(n)}static remove(i,n){var r=O.get(i).delete(n);return!O.get(i).size===0&&O.delete(i),r}static lock(i,n,r){return C.has(i,n)?!1:(C.put(i,n,!0),r())}}window.__Store=O;function te(){var e=window.navigator.userAgent,i=e.indexOf("MSIE ");if(i>0)return parseInt(e.substring(i+5,e.indexOf(".",i)),10);var n=e.indexOf("Trident/");if(n>0){var r=e.indexOf("rv:");return parseInt(e.substring(r+3,e.indexOf(".",r)),10)}var s=e.indexOf("Edge/");return s>0?parseInt(e.substring(s+5,e.indexOf(".",s)),10):-1}let T;function P(){P.init||(P.init=!0,T=te()!==-1)}var L={name:"ResizeObserver",props:{emitOnMount:{type:Boolean,default:!1},ignoreWidth:{type:Boolean,default:!1},ignoreHeight:{type:Boolean,default:!1}},emits:["notify"],mounted(){P(),t.nextTick(()=>{this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitOnMount&&this.emitSize()});const e=document.createElement("object");this._resizeObject=e,e.setAttribute("aria-hidden","true"),e.setAttribute("tabindex",-1),e.onload=this.addResizeHandlers,e.type="text/html",T&&this.$el.appendChild(e),e.data="about:blank",T||this.$el.appendChild(e)},beforeUnmount(){this.removeResizeHandlers()},methods:{compareAndNotify(){(!this.ignoreWidth&&this._w!==this.$el.offsetWidth||!this.ignoreHeight&&this._h!==this.$el.offsetHeight)&&(this._w=this.$el.offsetWidth,this._h=this.$el.offsetHeight,this.emitSize())},emitSize(){this.$emit("notify",{width:this._w,height:this._h})},addResizeHandlers(){this._resizeObject.contentDocument.defaultView.addEventListener("resize",this.compareAndNotify),this.compareAndNotify()},removeResizeHandlers(){this._resizeObject&&this._resizeObject.onload&&(!T&&this._resizeObject.contentDocument&&this._resizeObject.contentDocument.defaultView.removeEventListener("resize",this.compareAndNotify),this.$el.removeChild(this._resizeObject),this._resizeObject.onload=null,this._resizeObject=null)}}};const ie=t.withScopeId("data-v-b329ee4c");t.pushScopeId("data-v-b329ee4c");const ne={class:"resize-observer",tabindex:"-1"};t.popScopeId();const re=ie((e,i,n,r,s,l)=>(t.openBlock(),t.createBlock("div",ne)));L.render=re,L.__scopeId="data-v-b329ee4c",L.__file="src/components/ResizeObserver.vue";function A(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?A=function(i){return typeof i}:A=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},A(e)}function se(e,i){if(!(e instanceof i))throw new TypeError("Cannot call a class as a function")}function U(e,i){for(var n=0;n<i.length;n++){var r=i[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function le(e,i,n){return i&&U(e.prototype,i),n&&U(e,n),e}function W(e){return oe(e)||ae(e)||ce(e)||de()}function oe(e){if(Array.isArray(e))return j(e)}function ae(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ce(e,i){if(!!e){if(typeof e=="string")return j(e,i);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(e,i)}}function j(e,i){(i==null||i>e.length)&&(i=e.length);for(var n=0,r=new Array(i);n<i;n++)r[n]=e[n];return r}function de(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ue(e){var i;return typeof e=="function"?i={callback:e}:i=e,i}function fe(e,i){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r,s,l,a=function(o){for(var f=arguments.length,g=new Array(f>1?f-1:0),y=1;y<f;y++)g[y-1]=arguments[y];if(l=g,!(r&&o===s)){var p=n.leading;typeof p=="function"&&(p=p(o,s)),(!r||o!==s)&&p&&e.apply(void 0,[o].concat(W(l))),s=o,clearTimeout(r),r=setTimeout(function(){e.apply(void 0,[o].concat(W(l))),r=0},i)}};return a._clear=function(){clearTimeout(r),r=null},a}function K(e,i){if(e===i)return!0;if(A(e)==="object"){for(var n in e)if(!K(e[n],i[n]))return!1;return!0}return!1}var he=function(){function e(i,n,r){se(this,e),this.el=i,this.observer=null,this.frozen=!1,this.createObserver(n,r)}return le(e,[{key:"createObserver",value:function(n,r){var s=this;if(this.observer&&this.destroyObserver(),!this.frozen){if(this.options=ue(n),this.callback=function(c,o){s.options.callback(c,o),c&&s.options.once&&(s.frozen=!0,s.destroyObserver())},this.callback&&this.options.throttle){var l=this.options.throttleOptions||{},a=l.leading;this.callback=fe(this.callback,this.options.throttle,{leading:function(o){return a==="both"||a==="visible"&&o||a==="hidden"&&!o}})}this.oldResult=void 0,this.observer=new IntersectionObserver(function(c){var o=c[0];if(c.length>1){var f=c.find(function(y){return y.isIntersecting});f&&(o=f)}if(s.callback){var g=o.isIntersecting&&o.intersectionRatio>=s.threshold;if(g===s.oldResult)return;s.oldResult=g,s.callback(g,o)}},this.options.intersection),t.nextTick(function(){s.observer&&s.observer.observe(s.el)})}}},{key:"destroyObserver",value:function(){this.observer&&(this.observer.disconnect(),this.observer=null),this.callback&&this.callback._clear&&(this.callback._clear(),this.callback=null)}},{key:"threshold",get:function(){return this.options.intersection&&typeof this.options.intersection.threshold=="number"?this.options.intersection.threshold:0}}]),e}();function X(e,i,n){var r=i.value;if(!!r)if(typeof IntersectionObserver>"u")console.warn("[vue-observe-visibility] IntersectionObserver API is not available in your browser. Please install this polyfill: https://github.com/w3c/IntersectionObserver/tree/master/polyfill");else{var s=new he(e,r,n);e._vue_visibilityState=s}}function pe(e,i,n){var r=i.value,s=i.oldValue;if(!K(r,s)){var l=e._vue_visibilityState;if(!r){J(e);return}l?l.createObserver(r,n):X(e,{value:r},n)}}function J(e){var i=e._vue_visibilityState;i&&(i.destroyObserver(),delete e._vue_visibilityState)}var me={beforeMount:X,updated:pe,unmounted:J},ye={itemsLimit:1e3},ge=/(auto|scroll)/;function Y(e,i){return e.parentNode===null?i:Y(e.parentNode,i.concat([e]))}var R=function(i,n){return getComputedStyle(i,null).getPropertyValue(n)},be=function(i){return R(i,"overflow")+R(i,"overflow-y")+R(i,"overflow-x")},ve=function(i){return ge.test(be(i))};function we(e){if(e instanceof HTMLElement||e instanceof SVGElement){for(var i=Y(e.parentNode,[]),n=0;n<i.length;n+=1)if(ve(i[n]))return i[n];return document.scrollingElement||document.documentElement}}function M(e){return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?M=function(i){return typeof i}:M=function(i){return i&&typeof Symbol=="function"&&i.constructor===Symbol&&i!==Symbol.prototype?"symbol":typeof i},M(e)}var ke={items:{type:Array,required:!0},keyField:{type:String,default:"id"},direction:{type:String,default:"vertical",validator:function(i){return["vertical","horizontal"].includes(i)}}};function _e(){return this.items.length&&M(this.items[0])!=="object"}var D=!1;if(typeof window<"u"){D=!1;try{var Se=Object.defineProperty({},"passive",{get:function(){D=!0}});window.addEventListener("test",null,Se)}catch{}}let Ve=0;var H={name:"RecycleScroller",components:{ResizeObserver:L},directives:{ObserveVisibility:me},props:{...ke,itemSize:{type:Number,default:null},minItemSize:{type:[Number,String],default:null},sizeField:{type:String,default:"size"},typeField:{type:String,default:"type"},buffer:{type:Number,default:200},pageMode:{type:Boolean,default:!1},prerender:{type:Number,default:0},emitUpdate:{type:Boolean,default:!1}},emits:["resize","visible","hidden","update"],data(){return{pool:[],totalSize:0,ready:!1,hoverKey:null}},computed:{sizes(){if(this.itemSize===null){const e={"-1":{accumulator:0}},i=this.items,n=this.sizeField,r=this.minItemSize;let s=1e4,l=0,a;for(let c=0,o=i.length;c<o;c++)a=i[c][n]||r,a<s&&(s=a),l+=a,e[c]={accumulator:l,size:a};return this.$_computedMinItemSize=s,e}return[]},simpleArray:_e},watch:{items(){this.updateVisibleItems(!0)},pageMode(){this.applyPageMode(),this.updateVisibleItems(!1)},sizes:{handler(){this.updateVisibleItems(!1)},deep:!0}},created(){this.$_startIndex=0,this.$_endIndex=0,this.$_views=new Map,this.$_unusedViews=new Map,this.$_scrollDirty=!1,this.$_lastUpdateScrollPosition=0,this.prerender&&(this.$_prerender=!0,this.updateVisibleItems(!1))},mounted(){this.applyPageMode(),this.$nextTick(()=>{this.$_prerender=!1,this.updateVisibleItems(!0),this.ready=!0})},beforeUnmount(){this.removeListeners()},methods:{addView(e,i,n,r,s){const l=t.markRaw({id:Ve++,index:i,used:!0,key:r,type:s}),a=t.shallowReactive({item:n,position:0,nr:l});return e.push(a),a},unuseView(e,i=!1){const n=this.$_unusedViews,r=e.nr.type;let s=n.get(r);s||(s=[],n.set(r,s)),s.push(e),i||(e.nr.used=!1,e.position=-9999,this.$_views.delete(e.nr.key))},handleResize(){this.$emit("resize"),this.ready&&this.updateVisibleItems(!1)},handleScroll(e){this.$_scrollDirty||(this.$_scrollDirty=!0,requestAnimationFrame(()=>{this.$_scrollDirty=!1;const{continuous:i}=this.updateVisibleItems(!1,!0);i||(clearTimeout(this.$_refreshTimout),this.$_refreshTimout=setTimeout(this.handleScroll,100))}))},handleVisibilityChange(e,i){this.ready&&(e||i.boundingClientRect.width!==0||i.boundingClientRect.height!==0?(this.$emit("visible"),requestAnimationFrame(()=>{this.updateVisibleItems(!1)})):this.$emit("hidden"))},updateVisibleItems(e,i=!1){const n=this.itemSize,r=this.$_computedMinItemSize,s=this.typeField,l=this.simpleArray?null:this.keyField,a=this.items,c=a.length,o=this.sizes,f=this.$_views,g=this.$_unusedViews,y=this.pool;let p,m,k;if(!c)p=m=k=0;else if(this.$_prerender)p=0,m=this.prerender,k=null;else{const h=this.getScroll();if(i){let S=h.start-this.$_lastUpdateScrollPosition;if(S<0&&(S=-S),n===null&&S<r||S<n)return{continuous:!0}}this.$_lastUpdateScrollPosition=h.start;const w=this.buffer;if(h.start-=w,h.end+=w,n===null){let S,N=0,B=c-1,_=~~(c/2),u;do u=_,S=o[_].accumulator,S<h.start?N=_:_<c-1&&o[_+1].accumulator>h.start&&(B=_),_=~~((N+B)/2);while(_!==u);for(_<0&&(_=0),p=_,k=o[c-1].accumulator,m=_;m<c&&o[m].accumulator<h.end;m++);m===-1?m=a.length-1:(m++,m>c&&(m=c))}else p=~~(h.start/n),m=Math.ceil(h.end/n),p<0&&(p=0),m>c&&(m=c),k=c*n}m-p>ye.itemsLimit&&this.itemsLimitError(),this.totalSize=k;let d;const V=p<=this.$_endIndex&&m>=this.$_startIndex;if(this.$_continuous!==V){if(V){f.clear(),g.clear();for(let h=0,w=y.length;h<w;h++)d=y[h],this.unuseView(d)}this.$_continuous=V}else if(V)for(let h=0,w=y.length;h<w;h++)d=y[h],d.nr.used&&(e&&(d.nr.index=a.findIndex(S=>l?S[l]===d.item[l]:S===d.item)),(d.nr.index===-1||d.nr.index<p||d.nr.index>=m)&&this.unuseView(d));const F=V?null:new Map;let E,x,z,$;for(let h=p;h<m;h++){E=a[h];const w=l?E[l]:E;if(w==null)throw new Error(`Key is ${w} on item (keyField is '${l}')`);if(d=f.get(w),!n&&!o[h].size){d&&this.unuseView(d);continue}d?(d.nr.used=!0,d.item=E):(x=E[s],z=g.get(x),V?z&&z.length?(d=z.pop(),d.item=E,d.nr.used=!0,d.nr.index=h,d.nr.key=w,d.nr.type=x):d=this.addView(y,h,E,w,x):($=F.get(x)||0,(!z||$>=z.length)&&(d=this.addView(y,h,E,w,x),this.unuseView(d,!0),z=g.get(x)),d=z[$],d.item=E,d.nr.used=!0,d.nr.index=h,d.nr.key=w,d.nr.type=x,F.set(x,$+1),$++),f.set(w,d)),n===null?d.position=o[h-1].accumulator:d.position=h*n}return this.$_startIndex=p,this.$_endIndex=m,this.emitUpdate&&this.$emit("update",p,m),clearTimeout(this.$_sortTimer),this.$_sortTimer=setTimeout(this.sortViews,300),{continuous:V}},getListenerTarget(){let e=we(this.$el);return window.document&&(e===window.document.documentElement||e===window.document.body)&&(e=window),e},getScroll(){const{$el:e,direction:i}=this,n=i==="vertical";let r;if(this.pageMode){const s=e.getBoundingClientRect(),l=n?s.height:s.width;let a=-(n?s.top:s.left),c=n?window.innerHeight:window.innerWidth;a<0&&(c+=a,a=0),a+c>l&&(c=l-a),r={start:a,end:a+c}}else n?r={start:e.scrollTop,end:e.scrollTop+e.clientHeight}:r={start:e.scrollLeft,end:e.scrollLeft+e.clientWidth};return r},applyPageMode(){this.pageMode?this.addListeners():this.removeListeners()},addListeners(){this.listenerTarget=this.getListenerTarget(),this.listenerTarget.addEventListener("scroll",this.handleScroll,D?{passive:!0}:!1),this.listenerTarget.addEventListener("resize",this.handleResize)},removeListeners(){!this.listenerTarget||(this.listenerTarget.removeEventListener("scroll",this.handleScroll),this.listenerTarget.removeEventListener("resize",this.handleResize),this.listenerTarget=null)},scrollToItem(e){let i;this.itemSize===null?i=e>0?this.sizes[e-1].accumulator:0:i=e*this.itemSize,this.scrollToPosition(i)},scrollToPosition(e){this.direction==="vertical"?this.$el.scrollTop=e:this.$el.scrollLeft=e},itemsLimitError(){throw setTimeout(()=>{console.log("It seems the scroller element isn't scrolling, so it tries to render all the items at once.","Scroller:",this.$el),console.log("Make sure the scroller has a fixed height (or width) and 'overflow-y' (or 'overflow-x') set to 'auto' so it can scroll correctly and only render the items visible in the scroll viewport.")}),new Error("Rendered items limit reached")},sortViews(){this.pool.sort((e,i)=>e.index-i.index)}}};const Ee={key:0,class:"vue-recycle-scroller__slot"},xe={key:1,class:"vue-recycle-scroller__slot"};function ze(e,i,n,r,s,l){const a=t.resolveComponent("ResizeObserver"),c=t.resolveDirective("observe-visibility");return t.withDirectives((t.openBlock(),t.createBlock("div",{class:["vue-recycle-scroller",{ready:s.ready,"page-mode":n.pageMode,[`direction-${e.direction}`]:!0}],onScrollPassive:i[2]||(i[2]=(...o)=>l.handleScroll&&l.handleScroll(...o))},[e.$slots.before?(t.openBlock(),t.createBlock("div",Ee,[t.renderSlot(e.$slots,"before")])):t.createCommentVNode("v-if",!0),t.createVNode("div",{ref:"wrapper",style:{[e.direction==="vertical"?"minHeight":"minWidth"]:s.totalSize+"px"},class:"vue-recycle-scroller__item-wrapper"},[(t.openBlock(!0),t.createBlock(t.Fragment,null,t.renderList(s.pool,o=>(t.openBlock(),t.createBlock("div",{key:o.nr.id,style:s.ready?{transform:`translate${e.direction==="vertical"?"Y":"X"}(${o.position}px)`}:null,class:["vue-recycle-scroller__item-view",{hover:s.hoverKey===o.nr.key}],onMouseenter:f=>s.hoverKey=o.nr.key,onMouseleave:i[1]||(i[1]=f=>s.hoverKey=null)},[t.renderSlot(e.$slots,"default",{item:o.item,index:o.nr.index,active:o.nr.used})],46,["onMouseenter"]))),128))],4),e.$slots.after?(t.openBlock(),t.createBlock("div",xe,[t.renderSlot(e.$slots,"after")])):t.createCommentVNode("v-if",!0),t.createVNode(a,{onNotify:l.handleResize},null,8,["onNotify"])],34)),[[c,l.handleVisibilityChange]])}H.render=ze,H.__file="src/components/RecycleScroller.vue";const G=function(e){if(e==null)return{top:0,left:0};let i=e.getBoundingClientRect();return{top:i.top+window.scrollY,left:i.left+window.scrollX,width:i.width,height:i.height}},Q=function(e,i){i===void 0&&(i=document);for(var n=[],r=e.parentNode;r!==i;){var s=r;n.push(s),r=s.parentNode}return n.push(i),n},Oe=function(e){var i=Array.prototype.slice.call(e.childNodes);i.forEach(function(n){e.removeChild(n)})},$e=(e,i)=>{window.ExtraSelectOptions==null&&(window.ExtraSelectOptions={});const n={defaultArray:e.value,get:()=>e.value,push:(r,s,l=null)=>{const a=e.value.find(c=>c.key==r);a?(a.value=s,a.data=l):e.value.push({value:s,key:r,data:l})},addRange:r=>{for(let s of r)e.actions.push(s.key,s.value,s.data)},remove:r=>{e.value.splice(e.value.findIndex(s=>s.key==r),1)},clear:()=>{e.value=[]},sort:(r=null)=>{r==null&&(r=(s,l)=>s.value.localeCompare(l.value)),e.value=e.value.sort(r)},setDefault:function(r){this.defaultArray=r},restoreDefault:function(){e.value=this.defaultArray},filter:function(r){}};window.ExtraSelectOptions[i]=n,e.actions=n};let Ce=1;const Ne=e=>{e&&(e.style.display="none",Oe(e))},Be=(e,i,n,r)=>{var a,c;const s=t.ref([]);t.watchEffect(()=>{s.value=n});const l=t.ref([]);return t.watchEffect(()=>{l.value=i}),e&&(s.value=Array.apply(null,e.selectedOptions).map(o=>o.value).filter(o=>o),l.value=Array.apply(null,e.options).reduce((o,f)=>(o.push({value:f.text,key:f.value,data:f.dataset}),o),[])),$e(l,(c=(a=e==null?void 0:e.id)!=null?a:r)!=null?c:"extraselect_"+(++Ce).toString()),{options:l,selectedOptions:s}},Z=async function(e,i=null,n={}){var l;const r={method:"POST",credentials:"include",...n,headers:{"Content-Type":"application/json",...(l=n.headers)!=null?l:{}},body:JSON.stringify({search:i,...n.body})};return await(await fetch(e,r)).json()},Ie=(e,i,n,r,s,l="limited",a={})=>{const c=t.ref(0),o=t.ref(!1),f=t.computed(()=>o.value||c.value>0);if(i!=null&&i.length>0)if(n){const g=[];t.watchEffect(y=>{if(r.value.length>=s){let p=!0;switch(l){case"always":break;default:case"limited":p=!g.includes(r.value);break;case"complete":p=g.reduce((m,k)=>m&&!r.value.startsWith(k),!0);break}if(p){o.value=!0;const m=setTimeout(()=>{g.push(r.value),c.value+=1,Z(i,r.value,a).then(k=>{e.actions.addRange(k),e.actions.sort(),c.value-=1,o.value=!1})},500);y(()=>{clearTimeout(m)})}}})}else Z(i,null,a).then(g=>{e.actions.addRange(g),e.actions.sort()});return{searchingFlag:f}},Te=(e,i)=>{const n=t.ref(""),r=t.ref([]),s=function(l,a){return l.value.filter(o=>a.length>0?o.value.toLowerCase().includes(a.toLowerCase()):!0)};return t.watchEffect(()=>{n.value.length>=i?r.value=s(e,n.value):r.value=[]}),{filterText:n,filteredOptions:r}},Le=(e,i,n,r,s,l)=>{const a=function(f,g){const p=document.createElement("canvas").getContext("2d");return p.font=g,p.measureText(f).width},c=t.computed(()=>{var g;const f=(g=G(r.value).width)!=null?g:100;if(l==="inherit")return f;if(l==null||l==="dynamic"){const y=getComputedStyle(document.querySelector("body")).font;return Math.max(f,Math.max(...e.value.map(p=>a(p.value,y)))+15)}return l}),o=t.ref({position:"absolute","min-width":"max-content"});return t.watchPostEffect(()=>{n.value<0&&console.log("is open"),i.value.length<0&&console.log("empty selection");var f=G(r.value);console.log(f),o.value={position:"absolute","min-width":"max-content",width:c.value.toString()+"px",top:(f.top+f.height).toString()+"px",left:f.left.toString()+"px"}}),{dropdownStyle:o}},Ae={key:0,class:"extra-select selection"},Me=["onClick"],Fe=["innerHTML"],Pe=["value"],je={key:0,class:"input-searching"},Re={key:0,class:"allselect-clear"},De={class:"row-input"},He=["checked"],qe=t.createElementVNode("b",null,"Select all",-1),Ue={class:"row-input"},We=["checked"],Ke=t.createElementVNode("b",null,"Select Filtered",-1),Xe={key:1,class:"no-matches"},Je={key:2},Ye=["onClick"],Ge={class:"row-input"},Qe=["checked"],Ze=["value"],et={__name:"ExtraSelect",props:{originalNode:{type:Object,required:!1},multiple:{type:Boolean,required:!1},options:{type:Array,required:!1},modelValue:{type:Array,required:!1},url:{type:String,required:!1},maxWidth:{type:String,default:"dynamic"},search:{type:Boolean,default:!0},searchableUrl:{type:Boolean,default:!1},minChars:{type:Number,default:0},showSelected:{type:Boolean,default:!1},fetchMode:{type:String,default:"limited"},fetchOptions:{type:Object,default:{}},removeIcon:{type:String,default:"X"},dropdownContainer:{type:String,default:null}},emits:["update:modelValue"],setup(e,{emit:i}){var N,B,_;const n=e,r=t.computed(()=>{var u,b;return(b=(u=n.originalNode)==null?void 0:u.multiple)!=null?b:n.multiple}),{options:s,selectedOptions:l}=Be(n.originalNode,n.options,n.modelValue),a=(N=n.originalNode)==null?void 0:N.classList,c=Object.values((_=(B=n.originalNode)==null?void 0:B.style)!=null?_:{});Ne(n.originalNode);const{filterText:o,filteredOptions:f}=Te(s,n.minChars),{searchingFlag:g}=Ie(s,n.url,n.searchableUrl,o,n.minChars,n.fetchMode,n.fetchOptions),y=t.ref(null),p=t.ref(null),m=t.ref(null),k=t.ref(!1),d=t.ref(null),V=function(u){const b=Q(u.target);b.push(u.target),!b.includes(y.value)&&!b.includes(p.value)&&(k.value=!1)};t.onMounted(()=>{if(n.dropdownContainer&&(d.value=Q(y.value).find(u=>u instanceof Element&&u.matches(n.dropdownContainer))),d.value==null&&(d.value=document.querySelector("body")),n.originalNode){for(let u of a)u!="extraselect"&&y.value.classList.add(u);for(let u of c)y.value.style[u]=n.originalNode.style[u];c.includes("background-color")||(y.value.style.backgroundColor="white")}window.document.addEventListener("mousedown",V),window.document.addEventListener("focusin",V)}),t.onUnmounted(()=>{window.document.removeEventListener("mousedown",V),window.document.removeEventListener("focusin",V)});const{dropdownStyle:F}=Le(s,l,k,y,p,n.maxWidth),E=u=>{r.value?l.value.includes(u)?l.value.splice(l.value.indexOf(u),1):l.value.push(u):(l.value=[u],k.value=!1),i("update:modelValue",l.value)},x=u=>{z(u,!1),o.value=""},z=(u,b=null)=>{b==null&&(b=!h.value),b?l.value=s.value.map(v=>v.key):l.value=[],i("update:modelValue",l.value)},$=()=>{w.value?f.value.forEach(u=>{l.value.includes(u.key)&&l.value.splice(l.value.indexOf(u.key),1)}):f.value.forEach(u=>{l.value.includes(u.key)||l.value.push(u.key)}),i("update:modelValue",l.value)};t.watchEffect(()=>{k.value?n.search&&t.nextTick(()=>{m.value.focus({focusVisible:!0})}):o.value=""});const h=t.computed(()=>l.value.length==s.value.length),w=t.computed(()=>f.value.reduce((u,b)=>u&&l.value.includes(b.key),!0));t.computed(()=>l.value.length==0);const S=t.computed(()=>{const u=l.value.map(b=>{var v;return(v=s.value.find(I=>I.key==b))==null?void 0:v.value}).join(", ");return u.length>0?u:"--"});return(u,b)=>(t.openBlock(),t.createElementBlock(t.Fragment,null,[n.showSelected?(t.openBlock(),t.createElementBlock("div",Ae,[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(l),v=>{var I;return t.openBlock(),t.createElementBlock("div",{key:v,onClick:ee=>E(v),class:"selection-badge"},[t.createTextVNode(t.toDisplayString((I=t.unref(s).find(ee=>ee.key==v))==null?void 0:I.value)+" ",1),t.createElementVNode("div",{class:"selection-remove",innerHTML:n.removeIcon},null,8,Fe)],8,Me)}),128))])):t.createCommentVNode("",!0),t.createElementVNode("input",{onFocus:b[0]||(b[0]=v=>k.value=!0),onClick:b[1]||(b[1]=v=>k.value=!0),ref_key:"inputNode",ref:y,value:t.unref(S),class:"extra-select extra-select-input",readonly:""},null,40,Pe),d.value?(t.openBlock(),t.createBlock(t.Teleport,{key:1,to:d.value},[t.withDirectives(t.createElementVNode("div",{class:t.normalizeClass(["extra-select dropdown",{searching:t.unref(g)>0}]),ref_key:"dropdownNode",ref:p,style:t.normalizeStyle(t.unref(F))},[n.search?(t.openBlock(),t.createElementBlock("div",je,[t.withDirectives(t.createElementVNode("input",{ref_key:"searchNode",ref:m,class:"extra-select-search","onUpdate:modelValue":b[2]||(b[2]=v=>t.isRef(o)?o.value=v:null),type:"text",autocomplete:"off",autocorrect:"off",autocapitilize:"off",spellcheck:"false",placeholder:"Cerca..."},null,512),[[t.vModelText,t.unref(o)]])])):t.createCommentVNode("",!0),t.unref(o).length>=n.minChars?(t.openBlock(),t.createElementBlock(t.Fragment,{key:1},[t.unref(r)?(t.openBlock(),t.createElementBlock("div",Re,[t.unref(o).length==0?(t.openBlock(),t.createElementBlock("div",{key:0,onClick:z,class:"all-select"},[t.createElementVNode("div",De,[t.createElementVNode("input",{checked:t.unref(h),type:"checkbox"},null,8,He),qe])])):t.createCommentVNode("",!0),t.unref(f).length>0&&t.unref(o).length>0?(t.openBlock(),t.createElementBlock("div",{key:1,onClick:$,class:"all-select"},[t.createElementVNode("div",Ue,[t.createElementVNode("input",{checked:t.unref(w),type:"checkbox"},null,8,We),Ke])])):t.createCommentVNode("",!0),t.createElementVNode("div",{class:"clear",onClick:x},"Clear")])):t.createCommentVNode("",!0),t.unref(f).length==0?(t.openBlock(),t.createElementBlock("div",Xe,"No matches found")):t.createCommentVNode("",!0)],64)):(t.openBlock(),t.createElementBlock("div",Je,"Insert at least "+t.toDisplayString(n.minChars)+" characters",1)),t.createVNode(t.unref(H),{items:t.unref(f),"item-size":32,"key-field":"key",class:"scroller"},{default:t.withCtx(({item:v})=>[t.createElementVNode("div",{class:"dropdown-row",onClick:I=>E(v.key),style:{height:"32px"}},[t.createElementVNode("div",Ge,[t.unref(r)?(t.openBlock(),t.createElementBlock("input",{key:0,checked:t.unref(l).includes(v.key),type:"checkbox"},null,8,Qe)):t.createCommentVNode("",!0),t.createTextVNode(" "+t.toDisplayString(v.value),1)])],8,Ye)]),_:1},8,["items"])],6),[[t.vShow,k.value]])],8,["to"])):t.createCommentVNode("",!0),n.originalNode?(t.openBlock(),t.createBlock(t.Teleport,{key:2,to:n.originalNode},[(t.openBlock(!0),t.createElementBlock(t.Fragment,null,t.renderList(t.unref(l),v=>(t.openBlock(),t.createElementBlock("option",{key:v,selected:"selected",value:v},null,8,Ze))),128))],8,["to"])):t.createCommentVNode("",!0)],64))}},q={init:function(){document.querySelectorAll(".extraselect").forEach(function(e){q.bindNew(e)})},bindNew(e){C.lock(e,"extra-select",()=>{const i={};for(let s in e.dataset)try{i[s]=JSON.parse(e.dataset[s])}catch{i[s]=e.dataset[s]}i.originalNode=e;const n=document.createElement("div");e.parentNode.insertBefore(n,e.nextSibling),n.dataset.isVue=!0;const r=t.createApp(et,i);r.mount(n),e.addEventListener("remove",function(){r.unmount(),n.remove(),e.remove(),C.remove(e,"extra-select")})})}};return document.addEventListener("DOMContentLoaded",function(){q.init()}),q}(Vue);
